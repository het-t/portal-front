"use strict";(self["webpackChunkportal"]=self["webpackChunkportal"]||[]).push([[74,978,830,903],{1435:function(e,t,s){s.d(t,{Z:function(){return m}});var o=s(6252),i=s(9963),r=s(3577);const n={class:"dots-parent"};function a(e,t,s,a,l,d){const c=(0,o.up)("font-awesome-icon"),u=(0,o.Q2)("click-away");return(0,o.wy)(((0,o.wg)(),(0,o.iD)("td",{onClick:t[0]||(t[0]=(0,i.iM)((e=>d.showDots(e)),["stop"])),class:"dots-parent p0"},[(0,o._)("div",n,[(0,o.Wm)(c,{class:(0,r.C_)([l.dotsVisibility,"dots-img"]),icon:["fas","ellipsis-vertical"]},null,8,["class"])])])),[[u,d.hide]])}var l=s(1535),d={name:"DotsImg",mixins:[l.jB],data(){return{dotsVisibility:""}},methods:{showDots(e){this.dotsVisibility="dots-clicked",this.$emit("openMenu",e)},hide(e){this.dotsVisibility="",this.$emit("hideMenu",e)}}},c=s(3744);const u=(0,c.Z)(d,[["render",a],["__scopeId","data-v-42ac310e"]]);var m=u},1936:function(e,t,s){s.d(t,{Z:function(){return u}});var o=s(6252),i=s(9963);const r={class:"dots-menu"};function n(e,t,s,n,a,l){return(0,o.wg)(),(0,o.iD)("div",r,[(0,o._)("ul",{onClick:t[0]||(t[0]=(0,i.iM)((e=>!0),["stop"]))},[(0,o.WI)(e.$slots,"links")])])}var a=s(1535),l={name:"dotsMenu",data(){return{menu:""}},mixins:[a.jB]},d=s(3744);const c=(0,d.Z)(l,[["render",n]]);var u=c},5978:function(e,t,s){s.r(t),s.d(t,{default:function(){return l}});var o=s(6252);function i(e,t){return(0,o.wg)(),(0,o.iD)("div",null," you dont have access to this page ")}var r=s(3744);const n={},a=(0,r.Z)(n,[["render",i]]);var l=a},6830:function(e,t,s){s.r(t),s.d(t,{default:function(){return N}});var o=s(6252),i=s(9963),r=s(3577);const n=e=>((0,o.dD)("data-v-5af4d39c"),e=e(),(0,o.Cn)(),e),a={class:"card pr16 pl16 pb16"},l={class:"pr16 pl16 pt16 pb16"},d={class:"row mt8"},c={ref:"focus",for:"role-name",class:"labels c1"},u=n((()=>(0,o._)("div",{class:"hr"},null,-1))),m={class:"row mt8"},h=n((()=>(0,o._)("label",{class:"labels c1"},"rights",-1))),g=["id","value","name","title"],p=["for"],f=n((()=>(0,o._)("div",{class:"hr"},null,-1))),b=["disabled"],v=["disabled"];function _(e,t,s,n,_,w){return(0,o.wg)(),(0,o.iD)("div",a,[(0,o._)("form",l,[(0,o._)("div",d,[(0,o._)("label",c,"name",512),(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>_.roleName=e),type:"text",id:"role-name"},null,512),[[i.nr,_.roleName]])]),u,(0,o._)("div",m,[h,(0,o._)("div",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(_.rightsList,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"mt16 flex",key:e},[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>_.roleRights=e),id:e.id,value:e.id,class:"m0 mr16",type:"checkbox",name:e.name,title:e?.description},null,8,g),[[i.e8,_.roleRights]]),(0,o._)("label",{for:e.id},(0,r.zw)(e.name),9,p)])))),128))])]),f,(0,o._)("button",{disabled:!0===_.disabled,onClick:t[2]||(t[2]=(0,i.iM)((e=>void 0==s.editRoleId||""==s.editRoleId?w.createRole({roleName:_.roleName,roleRights:_.roleRights}):w.editRole()),["prevent"])),class:"green button"},"save",8,b),(0,o._)("button",{disabled:!0===_.disabled,onClick:t[3]||(t[3]=(0,i.iM)((e=>w.canceled()),["prevent"])),class:"neutral ml8 button"},"cancel",8,v)])])}var w=s(9235),y=s(3262),k=s(4802),$={name:"CreateRole",props:["editRoleId","uk"],data(){return{roleName:"",roleRights:[],rightsList:[],disabled:!1}},methods:{createRole({roleName:e,roleRights:t}){this.disabled=!0,(0,y.Z)({text:e,mutationFnName:"roles/RESET_STATE",promise:w.uJ.create({roleName:e,roleRights:t}),context:this,url:"/u/roles/list"})},editRole(){this.disabled=!0;const e={roleId:this.editRoleId,roleName:this.roleName,roleRights:this.roleRights};(0,k.Z)({text:e.roleName,mutationFnName:"roles/refetch",mutationArgs:{roleId:e.roleId},promise:w.uJ.edit(e),context:this})},canceled(){void 0!=this.editRoleId?this.$emit("editingCompleted",{force:!0}):this.$router.push("/u/roles/list")}},created(){this.rightsList=this.$store.getters["rights/getAllRightsList"];const e=this.$store.getters["roles/rolesDataGet"](this.editRoleId);console.log("editing",e),void 0!=e&&""!=e&&(console.log("coming inside",e),this.roleName=e[0].roleName,this.roleRights=e.map((e=>e.rightId)))},mounted(){this.$refs["focus"].focus()}},C=s(3744);const I=(0,C.Z)($,[["render",_],["__scopeId","data-v-5af4d39c"]]);var N=I},6074:function(e,t,s){s.r(t),s.d(t,{default:function(){return Z}});var o=s(6252),i=s(9963),r=s(3577);const n=e=>((0,o.dD)("data-v-72a21a1e"),e=e(),(0,o.Cn)(),e),a={ref:"menu"},l={class:"card"},d={class:"mr16 ml16 mt16"},c={class:"flex"},u={class:"floating-container"},m={class:"flex"},h={class:"floating-container"},g=n((()=>(0,o._)("th",null,null,-1))),p=["onKeyup","onClick"],f={colspan:"2",class:"p0 m0"};function b(e,t,s,n,b,v){const _=(0,o.up)("font-awesome-icon"),w=(0,o.up)("router-link"),y=(0,o.up)("dots-menu"),k=(0,o.up)("table-sort"),$=(0,o.up)("DotsImg"),C=(0,o.up)("skeleton-form"),I=(0,o.up)("table-pagination"),N=(0,o.Q2)("debounce");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",a,[1==b.menuVisibisility?((0,o.wg)(),(0,o.j4)(y,{key:0},{links:(0,o.w5)((()=>[(0,o._)("li",null,[(0,o.Wm)(w,{to:{name:"edit_role",params:{editRoleId:b.editRoleId}}},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{class:"menu-icons",icon:["fas","pencil"]})])),_:1},8,["to"])]),(0,o._)("li",null,[(0,o.Wm)(_,{onClick:t[0]||(t[0]=t=>v.deleteRole(b.editRoleId,e.editRoleName)),class:"menu-icons",icon:["fas","trash"]})])])),_:1})):(0,o.kq)("",!0)],512),(0,o._)("div",l,[(0,o._)("div",d,[(0,o._)("table",null,[(0,o._)("tr",null,[(0,o._)("th",null,[(0,o._)("div",c,[((0,o.wg)(),(0,o.j4)(k,{key:b.i,onClicked:t[1]||(t[1]=e=>{b.j=!b.j,b.p=!b.p}),sortType:"string",sortBy:"name",storeName:"roles"})),(0,o._)("div",u,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>b.filterFor[0]=e),ref:"nameH",class:"header p0",type:"text",required:""},null,512),[[N,v.sort,"700ms",{lock:!0}],[i.nr,b.filterFor[0]]]),(0,o._)("span",{onClick:t[3]||(t[3]=t=>e.$refs["nameH"].focus()),class:"floating-label"},"name")])])]),(0,o._)("th",null,[(0,o._)("div",m,[((0,o.wg)(),(0,o.j4)(k,{key:b.j,onClicked:t[4]||(t[4]=e=>{b.i,b.i,b.p=!b.p}),sortType:"number",sortBy:"rights",storeName:"roles"})),(0,o._)("div",h,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>b.filterFor[1]=e),ref:"rightsH",type:"text",class:"header p0",required:""},null,512),[[N,v.sort,"700ms",{lock:!0}],[i.nr,b.filterFor[1]]]),(0,o._)("span",{onClick:t[6]||(t[6]=t=>e.$refs["rightsH"].focus()),class:"floating-label"},"rights")])])]),g]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(v.roles(),((e,t)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:e.id},[(0,o._)("tr",{class:"tr edit-role-tr",tabindex:"0",onKeyup:(0,i.D2)((s=>v.editRole("row"+t,e.id,{})),["enter"]),onClick:(0,i.iM)((s=>v.editRole("row"+t,e.id,{})),["prevent"])},[(0,o._)("td",null,(0,r.zw)(e?.name),1),(0,o._)("td",null,(0,r.zw)(e?.rights),1),(0,o.Wm)($,{onOpenMenu:t=>v.menu(t,{roleName:e.name,roleId:e.id,visibility:!0}),onHideMenu:t=>v.menu(t,{roleName:e.name,roleId:e.id,visibility:!1})},null,8,["onOpenMenu","onHideMenu"])],40,p),(0,o._)("tr",{class:"tr tr-hidden hide",ref_for:!0,ref:"row"+t},[(0,o._)("td",f,[b.componentId?.[e.id]?((0,o.wg)(),(0,o.j4)((0,o.LL)(b.componentId?.[e.id]),{key:0,editRoleId:e.id,uk:t,buttonsIndex:1,onEditingCompleted:s=>v.editRole("row"+t,e.id,s)},null,40,["editRoleId","uk","onEditingCompleted"])):((0,o.wg)(),(0,o.j4)(C,{key:1,buttonsIndex:2}))])],512)],64)))),128))]),((0,o.wg)(),(0,o.j4)(I,{onTableData:t[7]||(t[7]=e=>b.rolesList=e),key:e.$store.getters["roles/getKey"],filters:b.filterFor,tableName:"roles"},null,8,["filters"]))])])])}var v=s(9235),_=s(1936),w=s(1435),y=s(4903),k=s(1049),$=s(6830),C=s(665),I=s(7359),N=s(5978),R=s(4814),D={name:"EditRoleList",data(){return{menuVisibisility:"",rolesList:[],editRoleId:"",i:0,j:0,p:0,filterFor:["",""],componentId:{}}},methods:{roles(){return 0!=this.rolesList?.length?this.rolesList:this.$store.getters["roles/rolesListGet"](1,"id",0,this.filterFor)},editRole(e,t,{force:s}){const o=this.$refs[e][0].classList.contains("hide");1==o?this.$refs[e][0].classList.remove("hide"):this.$refs[e][0].classList.add("hide"),(0,C.Z)("edit_role")&&(this.componentId[t]="SkeletonForm",this.$store.dispatch("roles/rolesDataSet",{roleId:t,force:s}).then((()=>this.componentId[t]="RoleCreate")))},deleteRole(e,t){v.uJ["delete"]({roleId:e}).then((()=>(0,R.Z)({text:t,context:this,mutationFn:"roles/deleteRole",mutationArgs:{roleId:e,filters:this.filterFor}})))},menu(e,{roleName:t,roleId:s,visibility:o}){this.menuVisibisility=o,this.editRoleId=s,this.editRoleName=t,1==o&&e.target.parentElement.appendChild(this.$refs["menu"])},sort(){console.log("sorting",this.filterFor),this.p=!this.p}},components:{TablePagination:y["default"],DotsMenu:_.Z,DotsImg:w.Z,TableSort:k.Z,RoleCreate:$["default"],SkeletonForm:I.Z,NoAccess:N["default"]}},P=s(3744);const x=(0,P.Z)(D,[["render",b],["__scopeId","data-v-72a21a1e"]]);var Z=x},4903:function(e,t,s){s.r(t),s.d(t,{default:function(){return C}});var o=s(6252),i=s(9963),r=s(3577);const n=e=>((0,o.dD)("data-v-18a9769c"),e=e(),(0,o.Cn)(),e),a={class:"flex"},l={class:"recordsPerPage"},d=n((()=>(0,o._)("label",{for:"recordsPerPage"},"entries",-1))),c=n((()=>(0,o._)("option",{value:10},"10",-1))),u=n((()=>(0,o._)("option",{value:20},"20",-1))),m=n((()=>(0,o._)("option",{value:50},"50",-1))),h=n((()=>(0,o._)("option",{value:100},"100",-1))),g=[c,u,m,h],p={class:"neutral"},f=["onClick"],b={class:"neutral"};function v(e,t,s,n,c,u){return(0,o.wg)(),(0,o.iD)("div",a,[(0,o._)("div",l,[d,(0,o.wy)((0,o._)("select",{onChange:t[0]||(t[0]=e=>u.getPageData()),id:"recordsPerPage","onUpdate:modelValue":t[1]||(t[1]=e=>c.recordsPerPage=e),class:"ml8"},g,544),[[i.bM,c.recordsPerPage]])]),(0,o._)("ul",null,[(0,o._)("li",p,[(0,o._)("button",{onClick:t[2]||(t[2]=e=>u.pageChange(1))},"<")]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.showPage(),(e=>((0,o.wg)(),(0,o.iD)("li",{class:"neutral",key:e},[(0,o._)("button",{class:(0,r.C_)(e==c.currentPage?"green":""),onClick:t=>u.pageChange(e)},(0,r.zw)(e),11,f)])))),128)),(0,o._)("li",b,[(0,o._)("button",{onClick:t[3]||(t[3]=e=>u.pageChange(c.pageCount))},">")])])])}var _=s(9669),w=s.n(_),y={name:"TablePagination",data(){return{pageData:"",currentPage:1,recordsPerPage:10,pageCount:""}},computed:{totalRecords(){return this.$store.getters[`${this.tableName}/${this.tableName}CountGet`]}},props:{tableName:String,sortBy:String,sortOrder:Number,filters:Array},methods:{showPage(){if(isNaN(this.pageCount))return 0;{let e=5;e=Math.min(e,this.pageCount);let t=this.currentPage-Math.floor(e/2);return t=Math.max(t,1),t=Math.min(t,this.pageCount-e+1),[...Array(e)].map(((e,s)=>s+t))}},pageChange(e){this.currentPage=e,this.$store.commit(`${this.tableName}/currentPageSet`,{index:e}),this.getPageData()},getPageData(){this.pageCount=Math.ceil(this.totalRecords/this.recordsPerPage);const{sortBy:e,sortOrder:t}=this.$store.getters[`${this.tableName}/sortGet`];let s=this.$store.getters[`${this.tableName}/${this.tableName}ListGet`]?.(this.currentPage,e,t,this.filters);void 0==s||0==s?.length||s?.length<this.recordsPerPage&&s?.length>=10?w().get(`/u/api/${this.tableName}`,{params:{from:(this.currentPage-1)*this.recordsPerPage,recordsPerPage:this.recordsPerPage,sortBy:e,sortOrder:t,filters:this.filters},withCredentials:!0}).then((s=>{this.$store.commit(`${this.tableName}/${this.tableName}List`,{index:this.currentPage,sortBy:e,sortOrder:t,filters:this.filters,data:s.data[this.tableName+"List"]}),this.$emit("tableData",s.data[this.tableName+"List"])})):this.$emit("tableData",s)}},created(){this.$store.commit(`${this.tableName}/currentPageSet`,{index:this.currentPage}),""==this.totalRecords?w().get(`/u/api/${this.tableName}/count`,{withCredentials:!0}).then((e=>{this.$store.commit(`${this.tableName}/${this.tableName}CountSet`,e?.data?.count),this.getPageData()})):this.getPageData()}},k=s(3744);const $=(0,k.Z)(y,[["render",v],["__scopeId","data-v-18a9769c"]]);var C=$},1049:function(e,t,s){s.d(t,{Z:function(){return d}});var o=s(6252),i=s(9963);function r(e,t,s,r,n,a){const l=(0,o.up)("font-awesome-icon");return(0,o.wg)(),(0,o.iD)("div",{class:"sort mr8",onClick:t[0]||(t[0]=(...e)=>a.rotateImg&&a.rotateImg(...e)),onKeyup:t[1]||(t[1]=(0,i.D2)(((...e)=>a.rotateImg&&a.rotateImg(...e)),["enter"]))},["string"==s.sortType?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[1==n.sortOrder?((0,o.wg)(),(0,o.j4)(l,{key:0,class:"sort-btn",icon:"fa-solid fa-arrow-down-a-z"})):((0,o.wg)(),(0,o.j4)(l,{key:1,class:"sort-btn",icon:"fa-solid fa-arrow-up-a-z"}))],64)):"number"==s.sortType?((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[1==n.sortOrder?((0,o.wg)(),(0,o.j4)(l,{key:0,class:"sort-btn",icon:"fa-solid fa-arrow-down-1-9"})):((0,o.wg)(),(0,o.j4)(l,{key:1,class:"sort-btn",icon:"fa-solid fa-arrow-up-1-9"}))],64)):(0,o.kq)("",!0)],32)}var n={name:"TableSort",props:["sortBy","storeName","sortType"],data(){return{sortOrder:0}},methods:{rotateImg(){1===this.sortOrder?this.sortOrder=0:this.sortOrder=1,this.$emit("clicked"),this.$store.commit(`${this.storeName}/sortSet`,{sortBy:this.sortBy,sortOrder:this.sortOrder})}},updated(){console.log("updated")}},a=s(3744);const l=(0,a.Z)(n,[["render",r],["__scopeId","data-v-8a032ec6"]]);var d=l},7359:function(e,t,s){s.d(t,{Z:function(){return b}});var o=s(6252);const i=e=>((0,o.dD)("data-v-2c9935b4"),e=e(),(0,o.Cn)(),e),r={class:"card"},n={class:"table-tabs"},a={class:"mt16 pb16 pr16 pl16"},l={class:"pl16 pb16"},d={class:"fg"},c=i((()=>(0,o._)("label",{class:"skeleton labels c1"},null,-1))),u=i((()=>(0,o._)("label",{class:"skeleton input ml16"},null,-1))),m=[c,u];function h(e,t,s,i,c,u){return(0,o.wg)(),(0,o.iD)("div",r,[(0,o._)("div",n,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.buttonsIndex,(e=>((0,o.wg)(),(0,o.iD)("button",{key:e,class:"skeleton button neutral tab"},".")))),128))]),(0,o._)("div",null,[(0,o._)("form",a,[(0,o._)("div",l,[(0,o._)("div",d,[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)(5,(e=>(0,o._)("div",{key:e,class:"row mt8"},m))),64))])])])])])}var g={name:"SkeletonForm",props:{buttonsIndex:Number}},p=s(3744);const f=(0,p.Z)(g,[["render",h],["__scopeId","data-v-2c9935b4"]]);var b=f},1535:function(e,t,s){s.d(t,{jB:function(){return d}});const o=function(){return null!==document.ontouchstart?"click":"touchstart"},i="__vue_click_away__",r=function(e,t,s){n(e);let r=s.context,a=t.value,l=!1;setTimeout((function(){l=!0}),0),e[i]=function(t){if((!e||!e.contains(t.target))&&a&&l&&"function"===typeof a)return a.call(r,t)},document.addEventListener(o(),e[i],!1)},n=function(e){document.removeEventListener(o(),e[i],!1),delete e[i]},a=function(e,t,s){t.value!==t.oldValue&&r(e,t,s)},l={mounted:r,updated:a,unmounted:n},d={directives:{ClickAway:l}}},665:function(e,t,s){s.d(t,{Z:function(){return i}});var o=s(4907);function i(e){const t=o.Z.getters["rights/getUserRights"],s=t?.some((t=>t.code_name==e));return s}},3262:function(e,t,s){s.d(t,{Z:function(){return r}});var o=s(6737),i=s.n(o);function r({text:e,url:t,mutationFnName:s,mutationArgs:o,promise:r,context:n}){let a=o;void 0==a&&(a={}),r.then((()=>i()({title:"Success",text:`Created "${e}"`,icon:"success",button:"ok"}))).then((()=>{n.$store.commit(s,a),setTimeout((()=>n.$router.push(t)),1)})).catch((e=>{null!=e&&i()("Oops!",`We can't perform this action right now please try again\n\n details: ${e}`)})).finally((()=>{n.disabled=!1}))}},4814:function(e,t,s){s.d(t,{Z:function(){return n}});var o=s(4907),i=s(6737),r=s.n(i);function n({text:e,mutationFn:t,mutationArgs:s,promise:i}){r()({icon:"warning",title:"Alert",text:`Do you really want to delete "${e}"`,buttons:!0,dangerMode:!0}).then((e=>{if(null==e)throw null;return i()})).then((()=>(o.Z.commit(t,s),r()({title:"Success",text:`Deleted "${e}"`,icon:"success",button:"ok"})))).catch((e=>{if(null!=e)return r()("Oops!",`We can't perform this action right now please try again\n\n details: ${e}`)}))}},4802:function(e,t,s){s.d(t,{Z:function(){return n}});var o=s(4907),i=s(6737),r=s.n(i);function n({text:e,mutationFnName:t,mutationArgs:s,promise:i,context:n}){i.then((()=>(t&&o.Z.commit(t,s),n.$emit("editingCompleted",{}),r()({title:"Success",text:`Edited "${e}"`,icon:"success",button:"Ok"})))).catch((e=>{if(null!=e)return r()("Oops!",`We can't perform this action right now please try again\n\n details: ${e}`)})).finally((()=>{n.disabled=!1}))}}}]);
//# sourceMappingURL=74.358f90b7.js.map