"use strict";(self["webpackChunkportal"]=self["webpackChunkportal"]||[]).push([[433],{433:function(e,t,l){l.r(t),l.d(t,{default:function(){return y}});var o=l(6252),i=l(9963),s=l(3577);const r=e=>((0,o.dD)("data-v-07760fbe"),e=e(),(0,o.Cn)(),e),n={class:"card pr16 pl16 pb16"},a={class:"pr16 pl16 pt16 pb16"},c={class:"row mt8"},d={ref:"focus",for:"role-name",class:"labels c1"},u=r((()=>(0,o._)("div",{class:"hr"},null,-1))),h={class:"row mt8"},m=r((()=>(0,o._)("label",{class:"labels c1"},"rights",-1))),g=["id","value","name","title"],p=["for"],f=r((()=>(0,o._)("div",{class:"hr"},null,-1)));function R(e,t,l,r,R,v){return(0,o.wg)(),(0,o.iD)("div",n,[(0,o._)("form",a,[(0,o._)("div",c,[(0,o._)("label",d,"name",512),(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>R.roleName=e),type:"text",id:"role-name"},null,512),[[i.nr,R.roleName]])]),u,(0,o._)("div",h,[m,(0,o._)("div",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(R.rightsList,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"mt16 flex",key:e},[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>R.roleRights=e),id:e.id,value:e.id,class:"m0 mr16",type:"checkbox",name:e.name,title:e?.description},null,8,g),[[i.e8,R.roleRights]]),(0,o._)("label",{for:e.id},(0,s.zw)(e.name),9,p)])))),128))])]),f,(0,o._)("button",{onClick:t[2]||(t[2]=(0,i.iM)((e=>void 0==l.editRoleId||""==l.editRoleId?v.createRole({roleName:R.roleName,roleRights:R.roleRights}):v.editRole()),["prevent"])),class:"green button"},"save"),(0,o._)("button",{onClick:t[3]||(t[3]=(0,i.iM)((e=>v.canceled()),["prevent"])),class:"neutral ml8 button"},"cancel")])])}var v=l(9235),b=l(3262),_=l(6737),N=l.n(_),w=l(4802),x={name:"CreateRole",props:["editRoleId","uk"],data(){return{roleName:"",roleRights:[],rightsList:[]}},methods:{createRole({roleName:e,roleRights:t}){(0,b.Z)({text:e,mutationFnName:"roles/RESET_STATE",promise:()=>v.uJ.create({roleName:e,roleRights:t}),context:this,url:"/u/roles/list"})},editRole(){const e={roleId:this.editRoleId,roleName:this.roleName,roleRights:this.roleRights};(0,w.Z)({text:e.roleName,promise:()=>v.uJ.edit(e),mutationFnName:"roles/RESET_STATE",context:this})},canceled(){N()({title:"Do you really want to cancel editing?",text:"All changes will be reverted",icon:"warning",buttons:!0,dangerMode:!0}).then((e=>{if(null!=e)throw null})).catch((()=>{1==this.editing?this.$emit("editingCompleted",{editing:0,role:this.roleName}):this.$router.push("/u/roles/list")}))}},created(){this.rightsList=this.$store.getters["rights/getAllRightsList"];const e=this.$store.getters["roles/rolesDataGet"](this.editRoleId);console.log("editing",e),void 0!=e&&""!=e&&(console.log("coming inside",e),this.roleName=e[0].roleName,this.roleRights=e.map((e=>e.rightId)))},mounted(){this.$refs["focus"].focus()}},k=l(3744);const $=(0,k.Z)(x,[["render",R],["__scopeId","data-v-07760fbe"]]);var y=$},3262:function(e,t,l){l.d(t,{Z:function(){return s}});var o=l(6737),i=l.n(o);function s({text:e,url:t,mutationFnName:l,mutationArgs:o,promise:s,context:r}){s().then((()=>i()({title:"Success",text:`Created "${e}"`,icon:"success",button:"ok"}))).then((()=>{r.$store.commit(l,o),setTimeout((()=>r.$router.push(t)),1)})).catch((e=>{null!=e&&i()("Oops!",`We can't perform this action right now please try again\n\n details: ${e}`)}))}}}]);
//# sourceMappingURL=433.be6325dd.js.map