"use strict";(self["webpackChunkportal"]=self["webpackChunkportal"]||[]).push([[233,978,277],{1435:function(e,t,s){s.d(t,{Z:function(){return m}});var r=s(6252),i=s(9963),n=s(3577);const a={class:"dots-parent"};function o(e,t,s,o,l,u){const d=(0,r.up)("font-awesome-icon"),c=(0,r.Q2)("click-away");return(0,r.wy)(((0,r.wg)(),(0,r.iD)("td",{onClick:t[0]||(t[0]=(0,i.iM)((e=>u.showDots(e)),["stop"])),class:"dots-parent p0"},[(0,r._)("div",a,[(0,r.Wm)(d,{class:(0,n.C_)([l.dotsVisibility,"dots-img"]),icon:["fas","ellipsis-vertical"]},null,8,["class"])])])),[[c,u.hide]])}var l=s(1535),u={name:"DotsImg",mixins:[l.jB],data(){return{dotsVisibility:""}},methods:{showDots(e){this.dotsVisibility="dots-clicked",this.$emit("openMenu",e)},hide(e){this.dotsVisibility="",this.$emit("hideMenu",e)}}},d=s(3744);const c=(0,d.Z)(u,[["render",o],["__scopeId","data-v-42ac310e"]]);var m=c},1936:function(e,t,s){s.d(t,{Z:function(){return c}});var r=s(6252),i=s(9963);const n={class:"dots-menu"};function a(e,t,s,a,o,l){return(0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("ul",{onClick:t[0]||(t[0]=(0,i.iM)((e=>!0),["stop"]))},[(0,r.WI)(e.$slots,"links")])])}var o=s(1535),l={name:"dotsMenu",data(){return{menu:""}},mixins:[o.jB]},u=s(3744);const d=(0,u.Z)(l,[["render",a]]);var c=d},5978:function(e,t,s){s.r(t),s.d(t,{default:function(){return l}});var r=s(6252);function i(e,t){return(0,r.wg)(),(0,r.iD)("div",null," you dont have access to this page ")}var n=s(3744);const a={},o=(0,n.Z)(a,[["render",i]]);var l=o},1049:function(e,t,s){s.d(t,{Z:function(){return u}});var r=s(6252),i=s(9963);function n(e,t,s,n,a,o){const l=(0,r.up)("font-awesome-icon");return(0,r.wg)(),(0,r.iD)("div",{class:"sort mr8",onClick:t[0]||(t[0]=(...e)=>o.rotateImg&&o.rotateImg(...e)),onKeyup:t[1]||(t[1]=(0,i.D2)(((...e)=>o.rotateImg&&o.rotateImg(...e)),["enter"]))},["string"==s.sortType?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[1==a.sortOrder?((0,r.wg)(),(0,r.j4)(l,{key:0,class:"sort-btn",icon:"fa-solid fa-arrow-down-a-z"})):((0,r.wg)(),(0,r.j4)(l,{key:1,class:"sort-btn",icon:"fa-solid fa-arrow-up-a-z"}))],64)):"number"==s.sortType?((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[1==a.sortOrder?((0,r.wg)(),(0,r.j4)(l,{key:0,class:"sort-btn",icon:"fa-solid fa-arrow-down-1-9"})):((0,r.wg)(),(0,r.j4)(l,{key:1,class:"sort-btn",icon:"fa-solid fa-arrow-up-1-9"}))],64)):(0,r.kq)("",!0)],32)}var a={name:"TableSort",props:["sortBy","storeName","sortType"],data(){return{sortOrder:0}},methods:{rotateImg(){1===this.sortOrder?this.sortOrder=0:this.sortOrder=1,this.$emit("clicked"),this.$store.commit(`${this.storeName}/sortSet`,{sortBy:this.sortBy,sortOrder:this.sortOrder})}},updated(){console.log("updated")}},o=s(3744);const l=(0,o.Z)(a,[["render",n],["__scopeId","data-v-8a032ec6"]]);var u=l},4277:function(e,t,s){s.r(t),s.d(t,{default:function(){return K}});var r=s(6252),i=s(9963),n=s(3577);const a=e=>((0,r.dD)("data-v-184c232f"),e=e(),(0,r.Cn)(),e),o={class:"card"},l={class:"table-tabs"},u={class:"mt16 pb16 pr16 pl16"},d={class:"pl16 pb16"},c=["id"],m=["for"],f=["id"],p=["id"],h=["for"],b=["id"],k=["id"],g=["for"],v=["id"],w=a((()=>(0,r._)("option",{value:"male"},"Male",-1))),_=a((()=>(0,r._)("option",{value:"female"},"Female",-1))),y=a((()=>(0,r._)("option",{value:"others"},"Others",-1))),I=[w,_,y],N=["id"],C=["for"],U=["id"],$=["id"],D=["for"],x=["id"],Z=["id"],F=["for"],L=["id"],j=["value"],M=["id"],T=["for"],V=["id"],B=["disabled"],H=["disabled"];function O(e,t,s,a,w,_){return(0,r.wg)(),(0,r.iD)("div",o,[(0,r._)("div",l,[(0,r._)("button",{onClick:t[0]||(t[0]=e=>_.openTab(e,"general")),ref:"defaultTab"+s.uk,class:"button nutral tab"},"general",512),(0,r._)("button",{onClick:t[1]||(t[1]=e=>_.openTab(e,"credentials")),class:"button nutral tab"},"credentials")]),(0,r._)("div",null,[(0,r._)("form",u,[(0,r._)("div",d,[(0,r._)("div",{class:"fg hide",ref:"general"+s.uk},[(0,r._)("div",{id:"i1"+s.uk,class:"row mt8"},[(0,r._)("label",{for:"user-firstname"+s.uk,class:"labels c1"},"firstname",8,m),(0,r.wy)((0,r._)("input",{ref:"general"+s.uk+"focus","onUpdate:modelValue":t[2]||(t[2]=e=>w.userFirstName=e),id:"user-firstname"+s.uk,type:"text"},null,8,f),[[i.nr,w.userFirstName]])],8,c),(0,r._)("div",{id:"i2"+s.uk,class:"row mt8"},[(0,r._)("label",{for:"user-lastname"+s.uk,class:"labels c1"},"lastname",8,h),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>w.userLastName=e),type:"text",id:"user-lastname"+s.uk},null,8,b),[[i.nr,w.userLastName]])],8,p),(0,r._)("div",{id:"i3"+s.uk,class:"row mt8"},[(0,r._)("label",{for:"user-gender"+s.uk,class:"labels c1"},"gender",8,g),(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>w.userGender=e),id:"user-gender"+s.uk},I,8,v),[[i.bM,w.userGender]])],8,k),(0,r._)("div",{id:"i4"+s.uk,class:"row mt8"},[(0,r._)("label",{for:"user-birthdate"+s.uk,class:"labels c1"},"birthdate",8,C),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>w.userBirthdate=e),type:"date",id:"user-birthdate"+s.uk},null,8,U),[[i.nr,w.userBirthdate]])],8,N)],512),(0,r._)("div",{class:"fg hide",ref:"credentials"+s.uk},[(0,r._)("div",{id:"i5"+s.uk,class:"row mt8"},[(0,r._)("label",{for:"user-email"+s.uk,class:"labels c1"},"username",8,D),(0,r.wy)((0,r._)("input",{ref:"credentials"+s.uk+"focus","onUpdate:modelValue":t[6]||(t[6]=e=>w.userEmail=e),type:"text",id:"user-email"+s.uk},null,8,x),[[i.nr,w.userEmail]])],8,$),(0,r._)("div",{id:"i6"+s.uk,class:"row mt8"},[(0,r._)("label",{for:"user-role"+s.uk,class:"labels c1"},"role",8,F),(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>w.userRole=e),id:"user-role"+s.uk},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(w.dbRoles,(e=>((0,r.wg)(),(0,r.iD)("option",{key:e.id,value:e.name},(0,n.zw)(e.name),9,j)))),128))],8,L),[[i.bM,w.userRole]])],8,Z),(0,r._)("div",{id:"i7"+s.uk,class:"row mt8"},[(0,r._)("label",{for:"user-pwd"+s.uk,class:"labels c1"},"password",8,T),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>w.userPassword=e),type:"password",id:"user-pwd"+s.uk},null,8,V),[[i.nr,w.userPassword]])],8,M)],512),(0,r._)("button",{disabled:!0===w.disabled,onClick:t[9]||(t[9]=(0,i.iM)((e=>_.proceed()),["prevent"])),class:"green mt16 button"},"save",8,B),(0,r._)("button",{disabled:!0===w.disabled,onClick:t[10]||(t[10]=(0,i.iM)((e=>_.canceled()),["prevent"])),class:"neutral ml8 mt16 button"},"cancel",8,H)])])])])}var E=s(9235),R=s(3262),S=s(4802),W={name:"CreateUser",props:["editUserId","uk"],data(){return{userFirstName:"",userLastName:"",userGender:"",userBirthdate:"",userEmail:"",userRole:"",userPassword:"",dbRoles:[],userId:"",disabled:!1}},mounted(){const e=this.$store.getters["roles/allRoles"];if(void 0!=e&&""!=e&&(this.dbRoles=e),void 0!=this.editUserId){const e=this.$store.getters["users/usersDataGet"](this.editUserId);void 0!=e&&""!=e&&this.populateDataProperties(e)}this.$refs["defaultTab"+this.uk].click()},methods:{openTab(e,t){var s=e.target.parentElement.getElementsByClassName("tab");let r=[...s].find((e=>1==e?.classList?.contains("tab-open")));r?.classList?.remove("tab-open"),e?.target?.classList?.add("tab-open"),this.$refs["general"+this.uk]?.classList?.add("hide"),this.$refs["credentials"+this.uk]?.classList?.add("hide"),this.$refs[t+this.uk]?.classList?.remove("hide"),this.$refs[t+this.uk+"focus"].focus()},canceled(){void 0!=this.editUserId?this.$emit("editingCompleted",{force:!0}):this.$router.push("/u/users/list")},proceed(){this.disabled=!0;const e={userId:this.userId,firstName:this.userFirstName,lastName:this.userLastName,gender:this.userGender,birthdate:this.userBirthdate,email:this.userEmail,role:this.userRole,password:this.userPassword};e.userId?(0,S.Z)({text:e.firstName+" "+e.lastName,mutationFnName:"users/refetch",mutationArgs:{userId:e.userId},promise:E.rC.edit(e),context:this}):(0,R.Z)({text:e.firstName+" "+e.lastName,url:"/u/users/list",promise:E.rC.create(e),mutationFnName:"users/refetch",context:this})},populateDataProperties(e){const{firstName:t,lastName:s,gender:r,birthdate:i,email:n,role:a,password:o,id:l}=e;this.userFirstName=t,this.userLastName=s,this.userGender=r,this.userBirthdate=new Date(i),this.userEmail=n,this.userRole=a,this.userPassword=o,this.userId=l}}},A=s(3744);const P=(0,A.Z)(W,[["render",O],["__scopeId","data-v-184c232f"]]);var K=P},2233:function(e,t,s){s.r(t),s.d(t,{default:function(){return L}});var r=s(6252),i=s(9963),n=s(3577);const a=e=>((0,r.dD)("data-v-2e2da2d8"),e=e(),(0,r.Cn)(),e),o={ref:"menu"},l={class:"flex"},u={class:"floating-container"},d={class:"flex"},c={class:"floating-container"},m={class:"flex"},f={class:"floating-container"},p=a((()=>(0,r._)("th",null,null,-1))),h=["onKeyup","onClick"],b={colspan:"3",class:"p0 m0"};function k(e,t,s,a,k,g){const v=(0,r.up)("font-awesome-icon"),w=(0,r.up)("router-link"),_=(0,r.up)("dots-menu"),y=(0,r.up)("table-sort"),I=(0,r.up)("dots-img"),N=(0,r.up)("skeleton-form"),C=(0,r.up)("table-pagination"),U=(0,r.up)("table-main"),$=(0,r.Q2)("debounce");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",o,[1==k.menuVisibisility?((0,r.wg)(),(0,r.j4)(_,{key:0},{links:(0,r.w5)((()=>[(0,r._)("li",null,[(0,r.Wm)(w,{to:{name:"edit_user",params:{editUserId:k.selectedUserId}}},{default:(0,r.w5)((()=>[(0,r.Wm)(v,{class:"menu-icons",icon:["fas","pencil"]})])),_:1},8,["to"])]),(0,r._)("li",null,[(0,r.Wm)(v,{onClick:t[0]||(t[0]=(0,i.iM)((e=>g.deleteUser(k.selectedUserId,k.selectedUserName)),["prevent"])),class:"menu-icons",icon:["fas","trash"]})])])),_:1})):(0,r.kq)("",!0)],512),(0,r.Wm)(U,null,{thead:(0,r.w5)((()=>[(0,r._)("tr",null,[(0,r._)("th",null,[(0,r._)("div",l,[((0,r.wg)(),(0,r.j4)(y,{onClicked:t[1]||(t[1]=e=>{k.i=!k.i,k.k=!k.k,k.p=!k.p}),key:k.j,sortBy:"name",sortType:"string",storeName:"users"})),(0,r._)("div",u,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>k.filterFor[0]=e),ref:"nameH",type:"text",class:"header p0",required:""},null,512),[[$,g.sort,"700ms",{lock:!0}],[i.nr,k.filterFor[0]]]),(0,r._)("span",{onClick:t[3]||(t[3]=t=>e.$refs["nameH"].focus()),class:"floating-label"},"name")])])]),(0,r._)("th",null,[(0,r._)("div",d,[((0,r.wg)(),(0,r.j4)(y,{onClicked:t[4]||(t[4]=e=>{k.i=!k.i,k.j=!k.j,k.p=!k.p}),key:k.k,sortBy:"email",sortType:"string",storeName:"users"})),(0,r._)("div",c,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>k.filterFor[1]=e),ref:"emailH",type:"text",class:"header p0",required:""},null,512),[[$,g.sort,"700ms",{lock:!0}],[i.nr,k.filterFor[1]]]),(0,r._)("span",{onClick:t[6]||(t[6]=t=>e.$refs["emailH"].focus()),class:"floating-label"},"email")])])]),(0,r._)("th",null,[(0,r._)("div",m,[((0,r.wg)(),(0,r.j4)(y,{onClicked:t[7]||(t[7]=e=>{k.j=!k.j,k.k=!k.k,k.p=!k.p}),key:k.i,sortBy:"rights",sortType:"number",storeName:"users"})),(0,r._)("div",f,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>k.filterFor[2]=e),ref:"rightsH",type:"text",class:"header p0",required:""},null,512),[[$,g.sort,"700ms",{lock:!0}],[i.nr,k.filterFor[2]]]),(0,r._)("span",{onClick:t[9]||(t[9]=t=>e.$refs["rightsH"].focus()),class:"floating-label"},"rights")])])]),p])])),tbody:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(g.users(),((e,t)=>((0,r.wg)(),(0,r.iD)(r.HY,{key:e?.id},[(0,r._)("tr",{class:"tr edit-user-tr",tabindex:"0",onKeyup:(0,i.D2)((s=>g.editUser("row"+t,e.id,s)),["enter"]),onClick:(0,i.iM)((s=>g.editUser("row"+t,e.id,s)),["prevent"])},[(0,r._)("td",null,(0,n.zw)(e.firstName+" "+e.lastName),1),(0,r._)("td",null,(0,n.zw)(e.email),1),(0,r._)("td",null,(0,n.zw)(e.rights),1),(0,r._)("td",null,[(0,r.Wm)(I,{onOpenMenu:t=>g.menu(t,{userName:e.firstName+" "+e.lastName,userId:e.id,visibility:!0}),onHideMenu:t=>g.menu(t,{userName:e.firstName+" "+e.lastName,userId:e.id,visibility:!1})},null,8,["onOpenMenu","onHideMenu"])])],40,h),(0,r._)("tr",{class:"tr tr-hidden hide",ref_for:!0,ref:"row"+t},[(0,r._)("td",b,[k.componentId?.[e.id]?((0,r.wg)(),(0,r.j4)((0,r.LL)(k.componentId?.[e.id]),{key:0,editUserId:e.id,uk:t,onEditingCompleted:s=>g.editUser("row"+t,e.id,s),class:"user-create",buttonsIndex:2},null,40,["editUserId","uk","onEditingCompleted"])):((0,r.wg)(),(0,r.j4)(N,{key:1,buttonsIndex:2}))])],512)],64)))),128))])),default:(0,r.w5)((()=>[((0,r.wg)(),(0,r.j4)(C,{key:e.$store.getters["users/getKey"],filters:k.filterFor,onTableData:t[10]||(t[10]=e=>k.usersList=e),tableName:"users"},null,8,["filters"]))])),_:1})])}var g=s(5978),v=s(665),w=s(4277),_=s(9235),y=s(2177),I=s(1435),N=s(1936),C=s(7359),U=s(1049),$=s(4814);const D=(0,r.RC)((()=>s.e(903).then(s.bind(s,4903))));var x={name:"UserList",data(){return{usersList:"",selectedUserId:"",selectedUserName:"",filteredUsersList:void 0,displayAlert:!1,menuVisibisility:"",allow:{},i:0,j:0,k:0,p:0,filterFor:["","",""],componentId:{}}},methods:{users(){return 0!=this.usersList?.length?this.usersList:this.$store.getters["users/usersListGet"](1,"id",0,this.filterFor)},editUser(e,t,{force:s}){const r=this.$refs[e][0].classList.contains("hide");1==r?this.$refs[e][0].classList.remove("hide"):this.$refs[e][0].classList.add("hide"),(0,v.Z)("edit_user")&&(this.componentId[t]="SkeletonForm",Promise.all([this.$store.dispatch("users/usersDataSet",{userId:t,force:s})]).then((()=>{this.allow[t]=!0,this.componentId[t]="UserCreate"})))},deleteUser(e,t){(0,$.Z)({text:t,promise:()=>_.rC["delete"]({userId:e}),context:this,mutationFn:"users/deleteUser",mutationArgs:{userId:e,filters:this.filterFor}})},menu(e,{userId:t,userName:s,visibility:r}){this.menuVisibisility=r,this.selectedUserId=t,this.selectedUserName=s,1==r&&e.target.parentElement.appendChild(this.$refs["menu"])},sort(){this.p=!this.p}},components:{TablePagination:D,TableMain:y.Z,DotsImg:I.Z,DotsMenu:N.Z,UserCreate:w["default"],SkeletonForm:C.Z,TableSort:U.Z,NoAccess:g["default"]}},Z=s(3744);const F=(0,Z.Z)(x,[["render",k],["__scopeId","data-v-2e2da2d8"]]);var L=F},7359:function(e,t,s){s.d(t,{Z:function(){return k}});var r=s(6252);const i=e=>((0,r.dD)("data-v-2c9935b4"),e=e(),(0,r.Cn)(),e),n={class:"card"},a={class:"table-tabs"},o={class:"mt16 pb16 pr16 pl16"},l={class:"pl16 pb16"},u={class:"fg"},d=i((()=>(0,r._)("label",{class:"skeleton labels c1"},null,-1))),c=i((()=>(0,r._)("label",{class:"skeleton input ml16"},null,-1))),m=[d,c];function f(e,t,s,i,d,c){return(0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("div",a,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.buttonsIndex,(e=>((0,r.wg)(),(0,r.iD)("button",{key:e,class:"skeleton button neutral tab"},".")))),128))]),(0,r._)("div",null,[(0,r._)("form",o,[(0,r._)("div",l,[(0,r._)("div",u,[((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)(5,(e=>(0,r._)("div",{key:e,class:"row mt8"},m))),64))])])])])])}var p={name:"SkeletonForm",props:{buttonsIndex:Number}},h=s(3744);const b=(0,h.Z)(p,[["render",f],["__scopeId","data-v-2c9935b4"]]);var k=b},1535:function(e,t,s){s.d(t,{jB:function(){return u}});const r=function(){return null!==document.ontouchstart?"click":"touchstart"},i="__vue_click_away__",n=function(e,t,s){a(e);let n=s.context,o=t.value,l=!1;setTimeout((function(){l=!0}),0),e[i]=function(t){if((!e||!e.contains(t.target))&&o&&l&&"function"===typeof o)return o.call(n,t)},document.addEventListener(r(),e[i],!1)},a=function(e){document.removeEventListener(r(),e[i],!1),delete e[i]},o=function(e,t,s){t.value!==t.oldValue&&n(e,t,s)},l={mounted:n,updated:o,unmounted:a},u={directives:{ClickAway:l}}},665:function(e,t,s){s.d(t,{Z:function(){return i}});var r=s(4907);function i(e){const t=r.Z.getters["rights/getUserRights"],s=t?.some((t=>t.code_name==e));return s}},3262:function(e,t,s){s.d(t,{Z:function(){return n}});var r=s(6737),i=s.n(r);function n({text:e,url:t,mutationFnName:s,mutationArgs:r,promise:n,context:a}){let o=r;void 0==o&&(o={}),n.then((()=>i()({title:"Success",text:`Created "${e}"`,icon:"success",button:"ok"}))).then((()=>{a.$store.commit(s,o),setTimeout((()=>a.$router.push(t)),1)})).catch((e=>{null!=e&&i()("Oops!",`We can't perform this action right now please try again\n\n details: ${e}`)})).finally((()=>{a.disabled=!1}))}},4814:function(e,t,s){s.d(t,{Z:function(){return a}});var r=s(4907),i=s(6737),n=s.n(i);function a({text:e,mutationFn:t,mutationArgs:s,promise:i}){n()({icon:"warning",title:"Alert",text:`Do you really want to delete "${e}"`,buttons:!0,dangerMode:!0}).then((e=>{if(null==e)throw null;return i()})).then((()=>(r.Z.commit(t,s),n()({title:"Success",text:`Deleted "${e}"`,icon:"success",button:"ok"})))).catch((e=>{if(null!=e)return n()("Oops!",`We can't perform this action right now please try again\n\n details: ${e}`)}))}},4802:function(e,t,s){s.d(t,{Z:function(){return a}});var r=s(4907),i=s(6737),n=s.n(i);function a({text:e,mutationFnName:t,mutationArgs:s,promise:i,context:a}){i.then((()=>(t&&r.Z.commit(t,s),a.$emit("editingCompleted",{}),n()({title:"Success",text:`Edited "${e}"`,icon:"success",button:"Ok"})))).catch((e=>{if(null!=e)return n()("Oops!",`We can't perform this action right now please try again\n\n details: ${e}`)})).finally((()=>{a.disabled=!1}))}}}]);
//# sourceMappingURL=233.e005ac59.js.map