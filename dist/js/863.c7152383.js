"use strict";(self["webpackChunkportal"]=self["webpackChunkportal"]||[]).push([[863],{8792:function(A,g,a){a.d(g,{Z:function(){return s}});var o=a(6252),t=a(3577);const e={class:"alert"};function B(A,g,a,B,E,r){return(0,o.wg)(),(0,o.iD)("div",e,[(0,o._)("p",null,(0,t.zw)(a.msg),1),(0,o._)("button",{class:"positive",onClick:g[0]||(g[0]=A=>a.fn(...a.fnParam))},"proceed"),(0,o._)("button",{class:"negative",onClick:g[1]||(g[1]=g=>A.$emit("close-alert"))},"cancel")])}var E={name:"AlertC",props:{msg:String,fn:Function,fnParam:JSON}},r=a(3744);const l=(0,r.Z)(E,[["render",B],["__scopeId","data-v-6a145a71"]]);var s=l},5863:function(A,g,a){a.r(g),a.d(g,{default:function(){return _}});var o=a(6252),t=a(9963),e=a(3577);const B=A=>((0,o.dD)("data-v-802374a8"),A=A(),(0,o.Cn)(),A),E={class:"card"},r={class:"card-head m0 pb16 pt16 pr16 pl16"},l=B((()=>(0,o._)("h5",{class:"table-head m0"},"roles",-1))),s=(0,o.Uk)("create role"),T={class:"mr16 ml16 mt16"},I={class:"tr-th"},i=(0,o.Uk)(" id "),q=B((()=>(0,o._)("th",null,"name",-1))),n=B((()=>(0,o._)("th",null,"rights",-1))),C=B((()=>(0,o._)("th",null,"actions",-1))),d={class:"actions"},N=(0,o.Uk)(" edit "),c=["onClick"];function u(A,g,a,B,u,h){const m=(0,o.up)("AlertC"),y=(0,o.up)("router-link"),M=(0,o.up)("TableFilter"),S=(0,o.up)("TableSort"),p=(0,o.up)("TablePagination");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.wy)((0,o.Wm)(m,{msg:u.alertData.msg,fn:h.deleteRole,fnParam:u.alertData.params,onCloseAlert:g[0]||(g[0]=A=>u.displayAlert=!1)},null,8,["msg","fn","fnParam"]),[[t.F8,u.displayAlert]]),(0,o._)("div",E,[(0,o._)("div",r,[l,(0,o.Wm)(y,{class:"table-action",to:"/u/roles/create-role"},{default:(0,o.w5)((()=>[s])),_:1})]),(0,o.Wm)(M,{tableData:u.rolesList,onFiltered:g[1]||(g[1]=A=>u.filteredRolesList=A),class:"mr16 ml16 mt16 actions"},null,8,["tableData"]),(0,o._)("div",T,[(0,o._)("table",null,[(0,o._)("tr",null,[(0,o._)("th",null,[(0,o._)("div",I,[i,(0,o.Wm)(S,{onSorted:g[2]||(g[2]=A=>u.filteredRolesList=A),tableData:h.roleListToDisplay(),keyToSort:"id"},null,8,["tableData"])])]),q,n,C]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(h.roleListToDisplay(),(A=>((0,o.wg)(),(0,o.iD)("tr",{class:"tr",key:A?.name},[(0,o._)("td",null,(0,e.zw)(A?.id),1),(0,o._)("td",null,(0,e.zw)(A?.name),1),(0,o._)("td",null,(0,e.zw)(A?.rights),1),(0,o._)("td",d,[(0,o.Wm)(y,{to:{name:"edit_role",params:{editRoleName:A?.name}}},{default:(0,o.w5)((()=>[N])),_:2},1032,["to"]),(0,o._)("p",{class:"delete m0 ml8",onClick:g=>h.alert(`do you want to delete ${A?.name} role`,A?.id)},"delete",8,c)])])))),128))]),(0,o.Wm)(p,{onTableData:g[3]||(g[3]=A=>u.rolesList=A),tableName:"roles"})])])])}var h=a(9669),m=a.n(h),y=a(8792),M=a(150),S=a(8614),p=a(5625),K={name:"EditRoleList",data(){return{alertData:{params:[{role_id:""}],msg:""},rolesList:"",filteredRolesList:void 0,displayAlert:!1}},methods:{roleListToDisplay(){return void 0!=this.filteredRolesList?this.filteredRolesList:this.rolesList},editRole(){m().get("/u/api/roles/edit-role",{withCredentials:!0,params:{role_name:this.roleName}})},deleteRole(A){console.log("deleteRole params",A),m().post("/u/api/roles/delete-role",{...A},{withCredentials:!0}).then((A=>{console.log("deleteRole",A.data)}))},alert(A,g){this.displayAlert=!0,this.alertData.params[0].role_id=g,this.alertData.msg=A},clear(){this.roleName=""}},components:{AlertC:y.Z,TablePagination:M.Z,TableSort:S.Z,TableFilter:p.Z}},D=a(3744);const f=(0,D.Z)(K,[["render",u],["__scopeId","data-v-802374a8"]]);var _=f},5625:function(A,g,a){a.d(g,{Z:function(){return I}});var o=a(6252),t=a(9963);const e=A=>((0,o.dD)("data-v-6a14df15"),A=A(),(0,o.Cn)(),A),B={class:"actions"},E=e((()=>(0,o._)("label",{for:"search",class:"mr8"},"search",-1)));function r(A,g,a,e,r,l){return(0,o.wg)(),(0,o.iD)("div",B,[E,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":g[0]||(g[0]=A=>r.dataToFind=A),onInput:g[1]||(g[1]=(...A)=>l.filter&&l.filter(...A)),type:"text",id:"search",class:"mr24"},null,544),[[t.nr,r.dataToFind]])])}var l={name:"TableFilter",data(){return{dataToFind:""}},props:{tableData:String},methods:{filter(){let A=[];""==this.dataToFind?this.$emit("filtered",this.tableData):(this.tableData.forEach((g=>{let a=Object.values(g).join(" ").includes(this.dataToFind);1==a&&A.push(g)})),this.$emit("filtered",A))}}},s=a(3744);const T=(0,s.Z)(l,[["render",r],["__scopeId","data-v-6a14df15"]]);var I=T},150:function(A,g,a){a.d(g,{Z:function(){return M}});var o=a(6252),t=a(9963),e=a(3577);const B=A=>((0,o.dD)("data-v-31ccc1da"),A=A(),(0,o.Cn)(),A),E={class:"flex"},r={class:"recordsPerPage"},l=B((()=>(0,o._)("label",{for:"recordsPerPage"},"entries",-1))),s=B((()=>(0,o._)("option",{value:"10"},"10",-1))),T=B((()=>(0,o._)("option",{value:"20"},"20",-1))),I=B((()=>(0,o._)("option",{value:"50"},"50",-1))),i=B((()=>(0,o._)("option",{value:"100"},"100",-1))),q=[s,T,I,i],n={class:"neutral"},C=["onClick"],d={class:"neutral"};function N(A,g,a,B,s,T){return(0,o.wg)(),(0,o.iD)("div",E,[(0,o._)("div",r,[l,(0,o.wy)((0,o._)("select",{onChange:g[0]||(g[0]=A=>T.getPageData()),id:"recordsPerPage","onUpdate:modelValue":g[1]||(g[1]=A=>s.recordsPerPage=A),type:"number",class:"ml8"},q,544),[[t.bM,s.recordsPerPage]])]),(0,o._)("ul",null,[(0,o._)("li",n,[(0,o._)("a",{href:"#",onClick:g[2]||(g[2]=A=>T.pageChange(1))},"<<")]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(T.showPage,(A=>((0,o.wg)(),(0,o.iD)("li",{class:"neutral",key:A},[(0,o._)("a",{href:"#",class:(0,e.C_)(A==s.currentPage?"green":""),onClick:g=>T.pageChange(A)},(0,e.zw)(A),11,C)])))),128)),(0,o._)("li",d,[(0,o._)("a",{href:"#",onClick:g[3]||(g[3]=A=>T.pageChange(s.pageCount))},">>")])])])}var c=a(9669),u=a.n(c),h={name:"TablePagination",data(){return{pageData:"",totalRecords:"",currentPage:1,recordsPerPage:10,pageCount:""}},computed:{showPage(){let A=5;A=Math.min(A,this.pageCount);let g=this.currentPage-Math.floor(A/2);return g=Math.max(g,1),g=Math.min(g,this.pageCount-A+1),[...Array(A)].map(((A,a)=>a+g))}},props:{tableName:String},methods:{pageChange(A){this.currentPage=A,this.getPageData()},getPageData(){this.pageCount=Math.ceil(this.totalRecords/this.recordsPerPage),u().get(`/u/api/${this.tableName}`,{params:{from:(this.currentPage-1)*this.recordsPerPage,records_per_page:this.recordsPerPage},withCredentials:!0}).then((A=>{this.$emit("tableData",A.data),console.log("table data",A.data)}))}},created(){u().get(`/u/api/${this.tableName}/count`,{withCredentials:!0}).then((A=>{this.totalRecords=A.data[0].count,this.pageCount=Math.ceil(this.totalRecords/this.recordsPerPage),console.log("total records: ",this.totalRecords),console.log("page count:",this.pageCount)})),this.getPageData()}},m=a(3744);const y=(0,m.Z)(h,[["render",N],["__scopeId","data-v-31ccc1da"]]);var M=y},8614:function(A,g,a){a.d(g,{Z:function(){return T}});var o=a(6252),t=a(9963),e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA9QAAAKOCAQAAADtv5kqAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAGAAAABgAPBrQs8AAAAHdElNRQflAxoRETHtugfXAAAKo0lEQVR42u3YsU0DQQBE0V10BVABCQWQUYODo0AoA7cBNZ0DIwJLF+8P3qtgsi/N3I8BAETNIdQAkPW0egAAcE6oASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBs+1m9AAA4NY/VCwCAU65vAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAI276O1RMAai7jZa7eAHdzCDXAg+/xIdREuL4BIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBMqAEgTKgBIEyoASBs+1y9ACDnbfUA+DeP1QsAgFOubwAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACNt+j9UT4O55vM7VGwBq5hBqIvZxFWqAB65vAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAIE2oACBNqAAgTagAI2/bVC+DP++oBAEE3F7QTfWtA0LUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjEtMDMtMjVUMjA6MDg6MzMrMDA6MDBbWVBtAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE2LTA0LTE2VDA3OjI5OjUwKzAwOjAw1WCIgQAAAABJRU5ErkJggg==";const B={class:"sort ml24"};function E(A,g,a,E,r,l){return(0,o.wg)(),(0,o.iD)("div",B,[(0,o._)("button",null,[(0,o._)("img",{onClick:g[0]||(g[0]=(0,t.iM)(((...A)=>l.rotateImg&&l.rotateImg(...A)),["prevent"])),ref:"sortImg",src:e,alt:"",class:"sorting-img"},null,512)])])}var r={name:"TableSort",data(){return{sortStatus:!1,sortedData:[]}},props:{tableData:JSON,keyToSort:String},methods:{rotateImg(){console.log("rotating"),this.sort=!this.sort,this.sort?this.$refs.sortImg.classList.add("tr-th-rotated"):this.$refs.sortImg.classList.remove("tr-th-rotated"),this.$emit("sorted",this.sortData().reverse()),this.sortedData=this.tableData},sortData(){this.sortedData=this.tableData;for(let A=1;A!=this.tableData.length;A++){let g,a=this.tableData[A];for(g=A-1;g>=0;g--){if(!(this.tableData[g]>this.tableData[A]))break;this.sortedData[g+1]=this.tableData[g]}this.sortedData[g+1]=a}return this.sortedData}}},l=a(3744);const s=(0,l.Z)(r,[["render",E],["__scopeId","data-v-8446d356"]]);var T=s}}]);
//# sourceMappingURL=863.c7152383.js.map