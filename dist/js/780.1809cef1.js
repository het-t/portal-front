"use strict";(self["webpackChunkportal"]=self["webpackChunkportal"]||[]).push([[780,693],{6780:function(t,e,s){s.r(e),s.d(e,{default:function(){return j}});var a=s(6252),r=s(9963),i=s(3577);const o=t=>((0,a.dD)("data-v-1c61cd60"),t=t(),(0,a.Cn)(),t),n={class:"table-heading"},l={class:"flex"},d={class:"floating-container"},c={class:"flex"},u={class:"floating-container"},g={class:"flex"},h={class:"floating-container"},m={class:"flex"},p={class:"floating-container"},f=o((()=>(0,a._)("th",null,"status",-1))),k={key:0},b={key:1},y=["onChange","onUpdate:modelValue"],v=["value"];function w(t,e,s,o,w,_){const $=(0,a.up)("table-sort"),P=(0,a.up)("table-pagination"),C=(0,a.up)("table-main"),T=(0,a.Q2)("debounce");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(C,null,{thead:(0,a.w5)((()=>[(0,a._)("tr",n,[(0,a._)("th",null,[(0,a._)("div",l,[((0,a.wg)(),(0,a.j4)($,{key:w.i,onClicked:e[0]||(e[0]=t=>{w.j=!w.j,w.k=!w.k,w.l=!w.l,_.sort()}),sortType:"string",sortBy:"title",storeName:"myTasks"})),(0,a._)("div",d,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>w.filterFor[0]=t),ref:"taskH",class:"header p0",type:"text",required:""},null,512),[[T,_.sort,"700ms",{lock:!0}],[r.nr,w.filterFor[0]]]),(0,a._)("span",{onClick:e[2]||(e[2]=e=>t.$refs["taskH"].focus()),class:"floating-label"},"task")])])]),(0,a._)("th",null,[(0,a._)("div",c,[((0,a.wg)(),(0,a.j4)($,{key:w.l,onClicked:e[3]||(e[3]=t=>{w.i=!w.i,w.j=!w.j,w.k=!w.k,_.sort()}),sortType:"string",sortBy:"client",storeName:"myTasks"})),(0,a._)("div",u,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>w.filterFor[2]=t),ref:"clientH",class:"header p0",type:"text",required:""},null,512),[[T,_.sort,"700ms",{lock:!0}],[r.nr,w.filterFor[2]]]),(0,a._)("span",{onClick:e[5]||(e[5]=e=>t.$refs["clientH"].focus()),class:"floating-label"},"client")])])]),(0,a._)("th",null,[(0,a._)("div",g,[((0,a.wg)(),(0,a.j4)($,{key:w.j,onClicked:e[6]||(e[6]=t=>{w.i=!w.i,w.k=!w.k,w.l=!w.l,_.sort()}),sortType:"string",sortBy:"desc",storeName:"myTasks"})),(0,a._)("div",h,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>w.filterFor[1]=t),ref:"descH",class:"header p0",type:"text",required:""},null,512),[[T,_.sort,"700ms",{lock:!0}],[r.nr,w.filterFor[1]]]),(0,a._)("span",{onClick:e[8]||(e[8]=e=>t.$refs["descH"].focus()),class:"floating-label"},"description")])])]),(0,a._)("th",null,[(0,a._)("div",m,[((0,a.wg)(),(0,a.j4)($,{key:w.k,onClicked:e[9]||(e[9]=t=>{w.i=!w.i,w.j=!w.k,w.l=!w.l,_.sort()}),sortType:"string",sortBy:"deadline",storeName:"myTasks"})),(0,a._)("div",p,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>w.filterFor[3]=t),ref:"deadlineH",class:"header p0",type:"text",required:""},null,512),[[T,_.sort,"700ms",{lock:!0}],[r.nr,w.filterFor[3]]]),(0,a._)("span",{onClick:e[11]||(e[11]=e=>t.$refs["deadlineH"].focus()),class:"floating-label"},"deadline")])])]),f])])),tbody:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(w.myTasksList,((t,e)=>((0,a.wg)(),(0,a.iD)("tr",{class:"tr",key:e},[(0,a._)("td",null,(0,i.zw)(t.title),1),(0,a._)("td",null,(0,i.zw)(t.client),1),"_#_*&^"!=t.description?((0,a.wg)(),(0,a.iD)("td",k,(0,i.zw)(t.description),1)):((0,a.wg)(),(0,a.iD)("td",b)),(0,a._)("td",null,(0,i.zw)(t.deadline),1),(0,a._)("td",null,[(0,a.wy)((0,a._)("select",{onChange:e=>_.changeStatus(t.costSaved,t.taskId,t.id,t.statusId),"onUpdate:modelValue":e=>t.statusId=e,name:"",id:""},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(w.subTaskStatuses,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},(0,i.zw)(t.status),9,v)))),128))],40,y),[[r.bM,t.statusId]])])])))),128))])),default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)(P,{key:t.$store.getters["myTasks/getKey"],filters:w.filterFor,onTableData:e[12]||(e[12]=t=>w.myTasksList=t),tableName:"myTasks"},null,8,["filters"]))])),_:1})])}var _=s(6737),$=s.n(_),P=s(4754),C=s(4802),T=s(692),N=s(3693),D=s(1049),S={components:{TableMain:T.Z,TablePagination:N["default"],TableSort:D.Z},name:"MyTasksList",data(){return{subTaskStatuses:[{id:1,status:"hold"},{id:2,status:"to do"},{id:3,status:"in progress"},{id:4,status:"pending for approval"},{id:5,status:"done"},{id:6,status:"cancel"},{id:7,status:"pending with client"},{id:8,status:"signed documents awaited"},{id:9,status:"pending for DSC"},{id:10,status:"reassigned"},{id:11,status:"approved"},{id:12,status:"Pending before authority"}],myTasksList:[],i:0,j:0,k:0,l:0,p:0,filterFor:["","",""],polling:!1}},methods:{changeStatus(t,e,s,a){0==t&&5==a?$()({text:"Provide the cost of sub-task before marking it done",content:"input",buttons:!0}).then((r=>{if(!r)throw null;return P.dT.changeStatus({taskId:e,subTaskId:s,statusId:a,cost:r,costSaved:t})})).catch((t=>console.log(t))).finally((()=>{this.$store.commit("tasks/refetch",{}),this.$store.commit("myTasks/refetch")})):(this.polling=!1,(0,C.Z)({text:"",mutationFnName:"myTasks/refetch",mutationArgs:{},promise:P.dT.changeStatus({taskId:e,subTaskId:s,statusId:a,costSaved:t}),context:this}))},sort(){this.$store.commit("myTasks/paginate")}},mounted(){var t=e=>{setTimeout((()=>{this.$store.commit("myTasks/refetch"),e?.polling&&t(e)}),6e5)};t(this),this.polling=!0}},I=s(3744);const x=(0,I.Z)(S,[["render",w],["__scopeId","data-v-1c61cd60"]]);var j=x},692:function(t,e,s){s.d(e,{Z:function(){return u}});var a=s(6252);const r={class:"card"},i={class:"mr16 ml16 mt16"},o={class:"table-main-head ml16 mb16"};function n(t,e,s,n,l,d){return(0,a.wg)(),(0,a.iD)("div",r,[(0,a._)("div",i,[(0,a._)("div",o,[(0,a.WI)(t.$slots,"tableHeader")]),(0,a._)("table",null,[(0,a._)("thead",null,[(0,a.WI)(t.$slots,"thead")]),(0,a._)("tbody",null,[(0,a.WI)(t.$slots,"tbody")])]),(0,a.WI)(t.$slots,"default")])])}var l={name:"TableMain"},d=s(3744);const c=(0,d.Z)(l,[["render",n]]);var u=c},3693:function(t,e,s){s.r(e),s.d(e,{default:function(){return P}});var a=s(6252),r=s(9963),i=s(3577);const o=t=>((0,a.dD)("data-v-56d94cac"),t=t(),(0,a.Cn)(),t),n={class:"flex table-pagination"},l={class:"recordsPerPage"},d=o((()=>(0,a._)("label",{for:"recordsPerPage"},"entries",-1))),c=o((()=>(0,a._)("option",{value:50},"50",-1))),u=o((()=>(0,a._)("option",{value:100},"100",-1))),g=o((()=>(0,a._)("option",{value:150},"150",-1))),h=o((()=>(0,a._)("option",{value:200},"200",-1))),m=[c,u,g,h],p={class:"neutral"},f=["onClick"],k={class:"neutral"};function b(t,e,s,o,c,u){return(0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("div",l,[d,(0,a.wy)((0,a._)("select",{onChange:e[0]||(e[0]=t=>u.getPageData()),id:"recordsPerPage","onUpdate:modelValue":e[1]||(e[1]=t=>c.recordsPerPage=t)},m,544),[[r.bM,c.recordsPerPage]])]),(0,a._)("ul",null,[(0,a._)("li",p,[(0,a._)("button",{onClick:e[2]||(e[2]=t=>u.pageChange(1))},"<")]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(u.showPage(),(t=>((0,a.wg)(),(0,a.iD)("li",{class:"neutral",key:t},[(0,a._)("button",{class:(0,i.C_)(t==c.currentPage?"green":""),onClick:e=>u.pageChange(t)},(0,i.zw)(t),11,f)])))),128)),(0,a._)("li",k,[(0,a._)("button",{onClick:e[3]||(e[3]=t=>u.pageChange(c.pageCount))},">")])])])}var y=s(9669),v=s.n(y),w={name:"TablePagination",data(){return{pageData:"",currentPage:1,recordsPerPage:50,pageCount:"",noCachingTotalRecords:""}},computed:{totalRecords(){return""!=this.noCachingTotalRecords?this.noCachingTotalRecords:this.$store.getters?.[`${this.tableName}/${this.tableName}CountGet`]},isStoreAvailable(){return!(1==this.noCaching)}},props:{tableName:String,sortBy:String,sortOrder:Number,filters:Array,noCaching:Boolean},methods:{showPage(){if(isNaN(this.pageCount))return 0;{let t=5;t=Math.min(t,this.pageCount);let e=this.currentPage-Math.floor(t/2);return e=Math.max(e,1),e=Math.min(e,this.pageCount-t+1),[...Array(t)].map(((t,s)=>s+e))}},pageChange(t){this.currentPage=t,this.isStoreAvailable&&this.$store.commit(`${this.tableName}/currentPageSet`,{index:t}),this.getPageData()},getPageData(){this.pageCount=Math.ceil(this.totalRecords/this.recordsPerPage);let{sortBy:t,sortOrder:e}=this.$store.getters?.[`${this.tableName}/sortGet`]?this.$store.getters?.[`${this.tableName}/sortGet`]:{},s=this.$store.getters?.[`${this.tableName}/${this.tableName}ListGet`]?.(this.currentPage,t,e,this.filters);void 0==s||0==s?.length||s?.length<this.recordsPerPage&&s?.length>=50||!this.isStoreAvailable?v().get(`/u/api/${this.tableName}`,{params:{from:(this.currentPage-1)*this.recordsPerPage,recordsPerPage:this.recordsPerPage,sortBy:t,sortOrder:e,filters:this.filters},withCredentials:!0}).then((s=>{this.isStoreAvailable&&this.$store.commit(`${this.tableName}/${this.tableName}List`,{index:this.currentPage,sortBy:t,sortOrder:e,filters:this.filters,data:s.data[this.tableName+"List"]}),this.$emit("tableData",s.data[this.tableName+"List"])})):this.$emit("tableData",s)}},created(){if(this.isStoreAvailable){const t=this.$store.getters[`${this.tableName}/getCurrentPage`];""==t||void 0==t?this.$store.commit(`${this.tableName}/currentPageSet`,{index:this.currentPage}):this.currentPage=t}""==this.totalRecords||void 0==this.totalRecords?v().get(`/u/api/${this.tableName}/count`,{params:{filters:this.filters},withCredentials:!0}).then((t=>{this.noCachingTotalRecords=t.data.count,this.isStoreAvailable&&this.$store.commit?.(`${this.tableName}/${this.tableName}CountSet`,t?.data?.count),this.getPageData()})):this.getPageData()}},_=s(3744);const $=(0,_.Z)(w,[["render",b],["__scopeId","data-v-56d94cac"]]);var P=$},1049:function(t,e,s){s.d(e,{Z:function(){return d}});var a=s(6252),r=s(9963);function i(t,e,s,i,o,n){const l=(0,a.up)("font-awesome-icon");return(0,a.wg)(),(0,a.iD)("div",{class:"sort mr8",onClick:e[0]||(e[0]=(...t)=>n.rotateImg&&n.rotateImg(...t)),onKeyup:e[1]||(e[1]=(0,r.D2)(((...t)=>n.rotateImg&&n.rotateImg(...t)),["enter"]))},["string"==s.sortType?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[1==o.sortOrder?((0,a.wg)(),(0,a.j4)(l,{key:0,class:"sort-btn",icon:"fa-solid fa-arrow-down-a-z"})):((0,a.wg)(),(0,a.j4)(l,{key:1,class:"sort-btn",icon:"fa-solid fa-arrow-up-a-z"}))],64)):"number"==s.sortType?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[1==o.sortOrder?((0,a.wg)(),(0,a.j4)(l,{key:0,class:"sort-btn",icon:"fa-solid fa-arrow-down-1-9"})):((0,a.wg)(),(0,a.j4)(l,{key:1,class:"sort-btn",icon:"fa-solid fa-arrow-up-1-9"}))],64)):(0,a.kq)("",!0)],32)}var o={name:"TableSort",props:["sortBy","storeName","sortType"],data(){return{sortOrder:0}},methods:{rotateImg(){1===this.sortOrder?this.sortOrder=0:this.sortOrder=1,this.$emit("clicked"),this.$store.commit(`${this.storeName}/sortSet`,{sortBy:this.sortBy,sortOrder:this.sortOrder})}},updated(){console.log("updated")}},n=s(3744);const l=(0,n.Z)(o,[["render",i],["__scopeId","data-v-8a032ec6"]]);var d=l},4802:function(t,e,s){s.d(e,{Z:function(){return r}});var a=s(2283);function r({text:t,mutationFnName:e,mutationArgs:s,promise:r,context:i}){r.then((()=>{e&&a.Z.commit(e,s),i.$emit("editingCompleted",{}),i.$toast.success(`Saved ${t}`)})).catch((t=>{if(null!=t)return i.$toast.error("Oops! We can't perform this action right now")})).finally((()=>{i.disabled=!1,void 0!=i?.polling&&(i.polling=!0)}))}}}]);
//# sourceMappingURL=780.1809cef1.js.map