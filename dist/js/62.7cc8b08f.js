"use strict";(self["webpackChunkportal"]=self["webpackChunkportal"]||[]).push([[62,693],{3877:function(t,e,s){s.d(e,{Z:function(){return g}});var a=s(6252),i=s(9963),r=s(3577);const n={class:"dots-parent"};function o(t,e,s,o,l,d){const c=(0,a.up)("font-awesome-icon"),u=(0,a.Q2)("click-away");return(0,a.wy)(((0,a.wg)(),(0,a.iD)("td",{onClick:e[0]||(e[0]=(0,i.iM)((t=>d.showDots(t)),["stop"])),class:"dots-parent p0"},[(0,a._)("div",n,[(0,a.Wm)(c,{class:(0,r.C_)([l.dotsVisibility,"dots-img"]),icon:["fas","ellipsis-vertical"]},null,8,["class"])])])),[[u,d.hide]])}var l=s(1535),d={name:"DotsImg",mixins:[l.jB],data(){return{dotsVisibility:""}},methods:{showDots(t){this.dotsVisibility="dots-clicked",this.$emit("openMenu",t)},hide(t){this.dotsVisibility="",this.$emit("hideMenu",t)}}},c=s(3744);const u=(0,c.Z)(d,[["render",o],["__scopeId","data-v-5d37841e"]]);var g=u},5839:function(t,e,s){s.d(e,{Z:function(){return u}});var a=s(6252),i=s(9963);const r={class:"dots-menu"};function n(t,e,s,n,o,l){return(0,a.wg)(),(0,a.iD)("div",r,[(0,a._)("ul",{onClick:e[0]||(e[0]=(0,i.iM)((t=>!0),["stop"]))},[(0,a.WI)(t.$slots,"links")])])}var o=s(1535),l={name:"dotsMenu",data(){return{menu:""}},mixins:[o.jB]},d=s(3744);const c=(0,d.Z)(l,[["render",n]]);var u=c},7062:function(t,e,s){s.r(e),s.d(e,{default:function(){return $}});var a=s(6252),i=s(9963),r=s(3577);const n=t=>((0,a.dD)("data-v-261bebf8"),t=t(),(0,a.Cn)(),t),o={ref:"menu"},l={class:"table-heading"},d={class:"flex"},c={class:"floating-container"},u={class:"flex"},g={class:"floating-container"},h=n((()=>(0,a._)("div",{style:{border:"none !important"}},null,-1))),m=["onClick","onKeyup"],p={class:"dots p12"};function f(t,e,s,n,f,b){const v=(0,a.up)("font-awesome-icon"),y=(0,a.up)("dots-menu"),_=(0,a.up)("table-sort"),w=(0,a.up)("dots-img"),C=(0,a.up)("table-pagination"),k=(0,a.up)("table-main"),P=(0,a.Q2)("debounce");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",o,[1==f.menuVisibisility?((0,a.wg)(),(0,a.j4)(y,{key:0},{links:(0,a.w5)((()=>[(0,a._)("li",{onClick:e[0]||(e[0]=(0,i.iM)(((...e)=>t.deleteOrg&&t.deleteOrg(...e)),["prevent"]))},[(0,a.Wm)(v,{class:"menu-icons",icon:["fas","trash"]}),(0,a.Uk)(" Delete ")])])),_:1})):(0,a.kq)("",!0)],512),(0,a.Wm)(k,null,{thead:(0,a.w5)((()=>[(0,a._)("tr",l,[(0,a._)("th",null,[(0,a._)("div",d,[((0,a.wg)(),(0,a.j4)(_,{key:f.i,onClicked:e[1]||(e[1]=t=>{f.j=!f.j,f.p=!f.p,b.sort()}),sortType:"string",sortBy:"id"})),(0,a._)("div",c,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>f.filterFor[0]=t),ref:"idH",class:"header p0",type:"text",required:""},null,512),[[P,b.sort,"700ms",{lock:!0}],[i.nr,f.filterFor[0]]]),(0,a._)("span",{onClick:e[3]||(e[3]=e=>t.$refs["idH"].focus()),class:"floating-label"},"Id")])])]),(0,a._)("th",null,[(0,a._)("div",u,[((0,a.wg)(),(0,a.j4)(_,{key:f.i,onClicked:e[4]||(e[4]=t=>{f.j=!f.j,f.p=!f.p,b.sort()}),sortType:"string",sortBy:"name"})),(0,a._)("div",g,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>f.filterFor[1]=t),ref:"nameH",class:"header p0",type:"text",required:""},null,512),[[P,b.sort,"700ms",{lock:!0}],[i.nr,f.filterFor[1]]]),(0,a._)("span",{onClick:e[6]||(e[6]=e=>t.$refs["nameH"].focus()),class:"floating-label"},"Name")])])]),h])])),tbody:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(f.orgsList,((t,e)=>((0,a.wg)(),(0,a.iD)("tr",{key:e,class:"tr hidden-tr-parent",onClick:(0,i.iM)((e=>b.editOrg(t.id)),["prevent"]),onKeyup:(0,i.D2)((e=>b.editOrg(t.id)),["enter"])},[(0,a._)("td",null,(0,r.zw)(t.id),1),(0,a._)("td",null,(0,r.zw)(t.name),1),(0,a._)("div",p,[(0,a.Wm)(w,{onOpenMenu:e=>b.menu(e,{org:t.name,orgId:t.id,visibility:!0}),onHideMenu:e=>b.menu(e,{org:t.name,orgId:t.id,visibility:!1})},null,8,["onOpenMenu","onHideMenu"])])],40,m)))),128))])),default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)(C,{filters:f.filterFor,onTableData:e[7]||(e[7]=t=>f.orgsList=t),key:f.p,tableName:"orgs",noCaching:!0},null,8,["filters"]))])),_:1})])}var b=s(692),v=s(3693),y=s(1049),_=s(3877),w=s(5839),C={name:"OrganizationsList",data(){return{orgsList:[],filterFor:["",""],i:0,j:0,p:0,menuVisibisility:!1}},components:{TableMain:b.Z,TablePagination:v["default"],TableSort:y.Z,DotsImg:_.Z,DotsMenu:w.Z},methods:{sort(){this.p=!this.p},menu(t,{org:e,orgId:s,visibility:a}){this.menuVisibisility=a,this.selectedOrgId=s,this.selectedOrg=e,1==a&&t.target.parentElement.append(this.$refs["menu"])},editOrg(t){this.$router.push(`/u/admin/orgs/${t}`)}}},k=s(3744);const P=(0,k.Z)(C,[["render",f],["__scopeId","data-v-261bebf8"]]);var $=P},692:function(t,e,s){s.d(e,{Z:function(){return u}});var a=s(6252);const i={class:"card"},r={class:"mr16 ml16 mt16"},n={class:"table-main-head ml16 mb16"};function o(t,e,s,o,l,d){return(0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",r,[(0,a._)("div",n,[(0,a.WI)(t.$slots,"tableHeader")]),(0,a._)("table",null,[(0,a._)("thead",null,[(0,a.WI)(t.$slots,"thead")]),(0,a._)("tbody",null,[(0,a.WI)(t.$slots,"tbody")])]),(0,a.WI)(t.$slots,"default")])])}var l={name:"TableMain"},d=s(3744);const c=(0,d.Z)(l,[["render",o]]);var u=c},3693:function(t,e,s){s.r(e),s.d(e,{default:function(){return P}});var a=s(6252),i=s(9963),r=s(3577);const n=t=>((0,a.dD)("data-v-56d94cac"),t=t(),(0,a.Cn)(),t),o={class:"flex table-pagination"},l={class:"recordsPerPage"},d=n((()=>(0,a._)("label",{for:"recordsPerPage"},"entries",-1))),c=n((()=>(0,a._)("option",{value:50},"50",-1))),u=n((()=>(0,a._)("option",{value:100},"100",-1))),g=n((()=>(0,a._)("option",{value:150},"150",-1))),h=n((()=>(0,a._)("option",{value:200},"200",-1))),m=[c,u,g,h],p={class:"neutral"},f=["onClick"],b={class:"neutral"};function v(t,e,s,n,c,u){return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",l,[d,(0,a.wy)((0,a._)("select",{onChange:e[0]||(e[0]=t=>u.getPageData()),id:"recordsPerPage","onUpdate:modelValue":e[1]||(e[1]=t=>c.recordsPerPage=t)},m,544),[[i.bM,c.recordsPerPage]])]),(0,a._)("ul",null,[(0,a._)("li",p,[(0,a._)("button",{onClick:e[2]||(e[2]=t=>u.pageChange(1))},"<")]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(u.showPage(),(t=>((0,a.wg)(),(0,a.iD)("li",{class:"neutral",key:t},[(0,a._)("button",{class:(0,r.C_)(t==c.currentPage?"green":""),onClick:e=>u.pageChange(t)},(0,r.zw)(t),11,f)])))),128)),(0,a._)("li",b,[(0,a._)("button",{onClick:e[3]||(e[3]=t=>u.pageChange(c.pageCount))},">")])])])}var y=s(9669),_=s.n(y),w={name:"TablePagination",data(){return{pageData:"",currentPage:1,recordsPerPage:50,pageCount:"",noCachingTotalRecords:""}},computed:{totalRecords(){return""!=this.noCachingTotalRecords?this.noCachingTotalRecords:this.$store.getters?.[`${this.tableName}/${this.tableName}CountGet`]},isStoreAvailable(){return!(1==this.noCaching)}},props:{tableName:String,sortBy:String,sortOrder:Number,filters:Array,noCaching:Boolean},methods:{showPage(){if(isNaN(this.pageCount))return 0;{let t=5;t=Math.min(t,this.pageCount);let e=this.currentPage-Math.floor(t/2);return e=Math.max(e,1),e=Math.min(e,this.pageCount-t+1),[...Array(t)].map(((t,s)=>s+e))}},pageChange(t){this.currentPage=t,this.isStoreAvailable&&this.$store.commit(`${this.tableName}/currentPageSet`,{index:t}),this.getPageData()},getPageData(){this.pageCount=Math.ceil(this.totalRecords/this.recordsPerPage);let{sortBy:t,sortOrder:e}=this.$store.getters?.[`${this.tableName}/sortGet`]?this.$store.getters?.[`${this.tableName}/sortGet`]:{},s=this.$store.getters?.[`${this.tableName}/${this.tableName}ListGet`]?.(this.currentPage,t,e,this.filters);void 0==s||0==s?.length||s?.length<this.recordsPerPage&&s?.length>=50||!this.isStoreAvailable?_().get(`/u/api/${this.tableName}`,{params:{from:(this.currentPage-1)*this.recordsPerPage,recordsPerPage:this.recordsPerPage,sortBy:t,sortOrder:e,filters:this.filters},withCredentials:!0}).then((s=>{this.isStoreAvailable&&this.$store.commit(`${this.tableName}/${this.tableName}List`,{index:this.currentPage,sortBy:t,sortOrder:e,filters:this.filters,data:s.data[this.tableName+"List"]}),this.$emit("tableData",s.data[this.tableName+"List"])})):this.$emit("tableData",s)}},created(){if(this.isStoreAvailable){const t=this.$store.getters[`${this.tableName}/getCurrentPage`];""==t||void 0==t?this.$store.commit(`${this.tableName}/currentPageSet`,{index:this.currentPage}):this.currentPage=t}""==this.totalRecords||void 0==this.totalRecords?_().get(`/u/api/${this.tableName}/count`,{params:{filters:this.filters},withCredentials:!0}).then((t=>{this.noCachingTotalRecords=t.data.count,this.isStoreAvailable&&this.$store.commit?.(`${this.tableName}/${this.tableName}CountSet`,t?.data?.count),this.getPageData()})):this.getPageData()}},C=s(3744);const k=(0,C.Z)(w,[["render",v],["__scopeId","data-v-56d94cac"]]);var P=k},1049:function(t,e,s){s.d(e,{Z:function(){return d}});var a=s(6252),i=s(9963);function r(t,e,s,r,n,o){const l=(0,a.up)("font-awesome-icon");return(0,a.wg)(),(0,a.iD)("div",{class:"sort mr8",onClick:e[0]||(e[0]=(...t)=>o.rotateImg&&o.rotateImg(...t)),onKeyup:e[1]||(e[1]=(0,i.D2)(((...t)=>o.rotateImg&&o.rotateImg(...t)),["enter"]))},["string"==s.sortType?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[1==n.sortOrder?((0,a.wg)(),(0,a.j4)(l,{key:0,class:"sort-btn",icon:"fa-solid fa-arrow-down-a-z"})):((0,a.wg)(),(0,a.j4)(l,{key:1,class:"sort-btn",icon:"fa-solid fa-arrow-up-a-z"}))],64)):"number"==s.sortType?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[1==n.sortOrder?((0,a.wg)(),(0,a.j4)(l,{key:0,class:"sort-btn",icon:"fa-solid fa-arrow-down-1-9"})):((0,a.wg)(),(0,a.j4)(l,{key:1,class:"sort-btn",icon:"fa-solid fa-arrow-up-1-9"}))],64)):(0,a.kq)("",!0)],32)}var n={name:"TableSort",props:["sortBy","storeName","sortType"],data(){return{sortOrder:0}},methods:{rotateImg(){1===this.sortOrder?this.sortOrder=0:this.sortOrder=1,this.$emit("clicked"),this.$store.commit(`${this.storeName}/sortSet`,{sortBy:this.sortBy,sortOrder:this.sortOrder})}},updated(){console.log("updated")}},o=s(3744);const l=(0,o.Z)(n,[["render",r],["__scopeId","data-v-8a032ec6"]]);var d=l},1535:function(t,e,s){s.d(e,{jB:function(){return d}});const a=function(){return null!==document.ontouchstart?"click":"touchstart"},i="__vue_click_away__",r=function(t,e,s){n(t);let r=s.context,o=e.value,l=!1;setTimeout((function(){l=!0}),0),t[i]=function(e){if((!t||!t.contains(e.target))&&o&&l&&"function"===typeof o)return o.call(r,e)},document.addEventListener(a(),t[i],!1)},n=function(t){document.removeEventListener(a(),t[i],!1),delete t[i]},o=function(t,e,s){e.value!==e.oldValue&&r(t,e,s)},l={mounted:r,updated:o,unmounted:n},d={directives:{ClickAway:l}}}}]);
//# sourceMappingURL=62.7cc8b08f.js.map