{"version":3,"file":"js/433.be6325dd.js","mappings":"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","sources":["webpack://portal/./src/components/RoleCreate.vue","webpack://portal/./src/components/RoleCreate.vue?3454","webpack://portal/./src/helpers/swalCreate.js"],"sourcesContent":["<template>\r\n    <div class=\"card pr16 pl16 pb16\">\r\n        <form class=\"pr16 pl16 pt16 pb16\">\r\n            <div class=\"row mt8\">\r\n                <label ref=\"focus\" for=\"role-name\" class=\"labels c1\">name</label>\r\n                <input v-model=\"roleName\" type=\"text\" id=\"role-name\"> \r\n            </div>\r\n                \r\n            <div class=\"hr\"></div>\r\n\r\n            <div class=\"row mt8\">\r\n                <label class=\"labels c1\">rights</label>\r\n                <div>\r\n                    <div class=\"mt16 flex\" v-for=\"right in rightsList\" :key=\"right\">\r\n                        <input v-model=\"roleRights\" \r\n                            :id=\"right.id\" \r\n                            :value=\"right.id\" \r\n                            class=\"m0 mr16\" \r\n                            type=\"checkbox\" \r\n                            :name=\"right.name\" \r\n                            :title=\"right?.description\"\r\n                        >\r\n                        <label :for=\"right.id\">{{right.name}}</label>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"hr\"></div>\r\n\r\n            <button \r\n                @click.prevent=\"(editRoleId == undefined || editRoleId == '') ? createRole({roleName, roleRights}) : editRole()\" \r\n                class=\"green button\"\r\n            >save</button>\r\n            <button @click.prevent=\"canceled()\" class=\"neutral ml8 button\">cancel</button>\r\n        </form>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { roles } from '@/api'\r\nimport useCreateSwal from '@/helpers/swalCreate'\r\nimport swal from 'sweetalert'\r\nimport useEditSwal from '../helpers/swalEdit'\r\n\r\n    export default {\r\n        name: 'CreateRole',\r\n        props: ['editRoleId', 'uk'],\r\n        data() {\r\n            return {\r\n                roleName: '',\r\n                roleRights: [],\r\n                rightsList: [],\r\n            }\r\n        },\r\n        methods: {\r\n            createRole({roleName, roleRights}) {\r\n                useCreateSwal({\r\n                    text: roleName,\r\n                    mutationFnName: 'roles/RESET_STATE',\r\n                    promise: () => roles.create({roleName, roleRights}),\r\n                    context: this,\r\n                    url: '/u/roles/list'\r\n                }) \r\n            },\r\n            editRole() {\r\n                const args = {\r\n                    roleId: this.editRoleId,\r\n                    roleName: this.roleName,\r\n                    roleRights: this.roleRights\r\n                }\r\n                useEditSwal({\r\n                    text: args.roleName,\r\n                    promise: () => roles.edit(args),\r\n                    mutationFnName: 'roles/RESET_STATE',\r\n                    context: this\r\n                })\r\n            },\r\n            canceled() {\r\n                swal({\r\n                    title: \"Do you really want to cancel editing?\", \r\n                    text: \"All changes will be reverted\",\r\n                    icon: \"warning\",\r\n                    buttons: true,\r\n                    dangerMode: true\r\n                })\r\n                .then((value) => {\r\n                    if (value != null) throw null\r\n                })\r\n                .catch(() => {\r\n                    if (this.editing == true) this.$emit(\"editingCompleted\", {\r\n                        editing: 0,\r\n                        role: this.roleName\r\n                    })\r\n                    else this.$router.push('/u/roles/list')\r\n                })\r\n            }\r\n        },\r\n        created() {                       \r\n            this.rightsList = this.$store.getters['rights/getAllRightsList']    //action invoked in rolesview.js\r\n            \r\n            const roleDataStore = this.$store.getters['roles/rolesDataGet'](this.editRoleId)\r\n            \r\n            console.log(\"editing\", roleDataStore)\r\n            // if (this.editRoleId != undefined) {\r\n            //     this.$store.dispatch('roles/rolesDataSet', {roleId: this.editRoleId})\r\n            // }\r\n            \r\n            if (roleDataStore != undefined && roleDataStore != '') {\r\n                console.log(\"coming inside\", roleDataStore)\r\n                this.roleName = roleDataStore[0].roleName\r\n                this.roleRights = roleDataStore.map(o => o.rightId)\r\n            }\r\n            // else this.$store.subscribe((mutation, state) => {\r\n            //     if (mutation.type == \"roles/rolesDataSet\" && mutation.payload.index == this.editRoleId) {\r\n            //         let roleData = state.roles.rolesData[this.editRoleId]\r\n            //         this.roleName = roleData[0].roleName\r\n            //         this.roleRights = roleData.map(o => o.rightId)\r\n            //     }\r\n            // })\r\n        },\r\n        mounted() {\r\n            this.$refs['focus'].focus()\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .flex {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 12px;\r\n    }\r\n    input[type=\"text\"], input[type=\"date\"] {\r\n        width: 40% !important;\r\n    }\r\n    input[type=\"checkbox\"] {\r\n        width:auto !important;\r\n        display: inline;\r\n    }\r\n    .labels {\r\n        align-self: center;\r\n    }\r\n\r\n</style>","import { render } from \"./RoleCreate.vue?vue&type=template&id=07760fbe&scoped=true\"\nimport script from \"./RoleCreate.vue?vue&type=script&lang=js\"\nexport * from \"./RoleCreate.vue?vue&type=script&lang=js\"\n\nimport \"./RoleCreate.vue?vue&type=style&index=0&id=07760fbe&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\portal\\\\frontend\\\\portal\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-07760fbe\"]])\n\nexport default __exports__","// import store from '@/store/index.js'\r\nimport swal from 'sweetalert'\r\n\r\nexport default function useCreateSwal({text, url, mutationFnName, mutationArgs, promise, context}) {\r\n    promise()\r\n    .then(() =>\r\n        swal({\r\n            title: \"Success\",\r\n            text: `Created \"${text}\"`,\r\n            icon: 'success',\r\n            button: 'ok',\r\n        })\r\n    )\r\n    .then(() => { \r\n        context.$store.commit(mutationFnName, mutationArgs)\r\n        setTimeout(() => context.$router.push(url), 1)\r\n    })\r\n    .catch((err) => {\r\n        if (err != null) swal(\"Oops!\", `We can't perform this action right now please try again\\n\\n details: ${err}`)\r\n    })\r\n}"],"names":["class","ref","for","type","id","roleName","rightsList","right","key","value","name","title","description","roleRights","undefined","editRoleId","createRole","editRole","canceled","props","data","methods","text","mutationFnName","promise","context","this","url","args","roleId","icon","buttons","dangerMode","then","catch","editing","$emit","role","$router","push","created","$store","getters","roleDataStore","console","log","map","o","rightId","mounted","$refs","focus","__exports__","render","useCreateSwal","mutationArgs","button","commit","setTimeout","err"],"sourceRoot":""}