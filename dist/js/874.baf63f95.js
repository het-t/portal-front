"use strict";(self["webpackChunkportal"]=self["webpackChunkportal"]||[]).push([[874,230,978,693],{9230:function(t,e,i){i.r(e),i.d(e,{default:function(){return H}});var n=i(6252),a=i(9963),s=i(3577);const l=t=>((0,n.dD)("data-v-75ec4376"),t=t(),(0,n.Cn)(),t),o={class:"card"},r={class:"table-tabs"},c={class:"mt16 ml16 pb32 pr16 pl16"},d={class:"fg-wrapper"},u={class:"row mt8"},m=l((()=>(0,n._)("label",{for:"client-cli-llpin",class:"labels c1"},"CIN/LLPIN",-1))),h={id:"i1",class:"row mt8"},p=l((()=>(0,n._)("label",{for:"client-name",class:"labels c1"},"name",-1))),f={id:"i3",class:"row mt8"},g=l((()=>(0,n._)("label",{for:"client-type",class:"labels c1"},"type",-1))),_=["value"],b={id:"i5",class:"row mt8"},v=l((()=>(0,n._)("label",{for:"firm-name",class:"labels c1"},"firm-name",-1))),y={id:"i6",class:"row mt8"},w=l((()=>(0,n._)("label",{for:"address",class:"labels c1"},"address",-1))),C={id:"i7",class:"row mt8"},k=l((()=>(0,n._)("label",{for:"PAN",class:"labels c1"},"PAN",-1))),N={id:"i8",class:"row mt8"},$=l((()=>(0,n._)("label",{for:"ca-email",class:"labels c1"},"email",-1))),P={class:"fg-wrapper"},I={class:"row mt8"},D=l((()=>(0,n._)("label",{for:"contact-name",class:"labels c1"},"name",-1))),T={class:"row mt8"},x=l((()=>(0,n._)("label",{for:"contact-email",class:"labels c1"},"email",-1))),A={class:"row mt8"},M=l((()=>(0,n._)("label",{for:"contact-phone",class:"labels c1"},"phone",-1))),E=["disabled"],L=["disabled"];function Z(t,e,i,l,Z,j){return(0,n.wg)(),(0,n.iD)("div",o,[(0,n._)("div",r,[(0,n._)("button",{onClick:e[0]||(e[0]=t=>j.openTab(t,"client")),ref:"defaultTab"+i.uk,class:"button neutral tab"},"client detail",512),(0,n._)("button",{onClick:e[1]||(e[1]=t=>j.openTab(t,"ca")),class:"button neutral tab"},"ca details"),(0,n._)("button",{onClick:e[2]||(e[2]=t=>j.openTab(t,"contact")),class:"button neutral tab"},"contact")]),(0,n._)("form",c,[(0,n._)("div",d,[(0,n._)("div",{class:"hide fg",ref:"client"+i.uk},[(0,n._)("div",u,[m,(0,n.wy)((0,n._)("input",{ref:"client"+i.uk+"focus","onUpdate:modelValue":e[3]||(e[3]=t=>Z.cin=t),type:"text",id:"client-cli-llpin"},null,512),[[a.nr,Z.cin]])]),(0,n._)("div",h,[p,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>Z.clientName=t),id:"client-name",type:"text"},null,512),[[a.nr,Z.clientName]])]),(0,n._)("div",f,[g,(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>Z.clientTypeId=t),id:"client-type"},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(j.clientTypes,((t,e)=>((0,n.wg)(),(0,n.iD)("option",{key:e,value:t.id},(0,s.zw)(t.type),9,_)))),128))],512),[[a.bM,Z.clientTypeId]])])],512),(0,n._)("div",{class:"hide fg",ref:"ca"+i.uk},[(0,n._)("div",b,[v,(0,n.wy)((0,n._)("input",{ref:"ca"+i.uk+"focus","onUpdate:modelValue":e[6]||(e[6]=t=>Z.firmName=t),type:"text",id:"firm-name"},null,512),[[a.nr,Z.firmName]])]),(0,n._)("div",y,[w,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>Z.firmAddress=t),type:"text",id:"address"},null,512),[[a.nr,Z.firmAddress]])]),(0,n._)("div",C,[k,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":e[8]||(e[8]=t=>Z.caPan=t),type:"text",id:"PAN"},null,512),[[a.nr,Z.caPan]])]),(0,n._)("div",N,[$,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":e[9]||(e[9]=t=>Z.caEmail=t),type:"text",id:"ca-email"},null,512),[[a.nr,Z.caEmail]])])],512)]),(0,n._)("div",P,[(0,n._)("div",{class:"hide fg",ref:"contact"+i.uk},[(0,n._)("div",I,[D,(0,n.wy)((0,n._)("input",{ref:"contact"+i.uk+"focus","onUpdate:modelValue":e[10]||(e[10]=t=>Z.conName=t),type:"text",id:"contact-name"},null,512),[[a.nr,Z.conName]])]),(0,n._)("div",T,[x,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":e[11]||(e[11]=t=>Z.conEmail=t),type:"text",id:"contact-email"},null,512),[[a.nr,Z.conEmail]])]),(0,n._)("div",A,[M,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":e[12]||(e[12]=t=>Z.conPhone=t),type:"text",id:"contact-phone"},null,512),[[a.nr,Z.conPhone]])])],512)]),(0,n._)("button",{disabled:!0===Z.disabled,onClick:e[13]||(e[13]=(0,a.iM)((t=>j.proceed()),["prevent"])),class:"green mt16 button"},"save",8,E),(0,n._)("button",{disabled:!0===Z.disabled,onClick:e[14]||(e[14]=(0,a.iM)((t=>j.canceled()),["prevent"])),class:"neutral ml8 mt16 button"},"cancel",8,L)])])}var j=i(4754),S=i(4802),V=i(3262),F={name:"ClientCreate",props:["clientData","uk"],data(){return{cin:"",clientName:"",clientTypeId:"",firmName:"",firmAddress:"",caPan:"",caEmail:"",conName:"",conEmail:"",conPhone:"",editing:!1,editClientId:"",disabled:!1}},computed:{clientTypes(){return this.$store.getters["clients/getAllTypesList"]}},methods:{openTab(t,e){var i=t.target.parentElement.getElementsByClassName("tab");let n=[...i].find((t=>1==t?.classList?.contains("tab-open")));n?.classList?.remove("tab-open"),t?.target?.classList?.add("tab-open"),this.$refs["client"+this.uk]?.classList?.add("hide"),this.$refs["ca"+this.uk]?.classList?.add("hide"),this.$refs["contact"+this.uk]?.classList?.add("hide"),this.$refs[e+this.uk]?.classList?.remove("hide"),this.$refs[e+this.uk+"focus"].focus()},canceled(){1==this.editing&&this.$emit("editingCompleted"),this.$router.push("/u/clients/list")},proceed(){this.disabled=!0;const t={clientId:this.editClientId,clientName:this.clientName,clientTypeId:this.clientTypeId,cin:this.cin,firmName:this.firmName,firmAddress:this.firmAddress,caEmail:this.caEmail,caPan:this.caPan,conName:this.conName,conEmail:this.conEmail,conPhone:this.conPhone,status:this.$store.getters["clients/getClientStatus"]};void 0!=t.clientId&&""!=t.clientId?(0,S.Z)({text:t.clientName,mutationFnName:"clients/refetch",promise:Promise.all([j.yj.edit(t)]),context:this}):(0,V.Z)({text:t.clientName,url:"/u/clients/list",promise:Promise.all([j.yj.create(t)]),mutationFnName:"clients/RESET_STATE",mutationArgs:{},context:this})}},mounted(){if(this.$refs["defaultTab"+this.uk].click(),void 0!=this.clientData&&(this.editing=!0),0!=this.editing){const{id:t,typeId:e,name:i,cin:n,caFirmName:a,caAddress:s,caPan:l,caEmail:o,conName:r,conEmail:c,conPhone:d}=JSON.parse(this.clientData);this.editClientId=t,this.clientName=i,this.cin=n,this.clientTypeId=e,this.firmName=a,this.firmAddress=s,this.caPan=l,this.caEmail=o,this.conName=r,this.conEmail=c,this.conPhone=d}}},O=i(3744);const U=(0,O.Z)(F,[["render",Z],["__scopeId","data-v-75ec4376"]]);var H=U},1361:function(t,e,i){i.r(e),i.d(e,{default:function(){return U}});var n=i(6252),a=i(9963),s=i(3577);const l=t=>((0,n.dD)("data-v-721f2d78"),t=t(),(0,n.Cn)(),t),o={ref:"menu"},r={class:"clientTag"},c=l((()=>(0,n._)("span",null,"Confirmed",-1))),d=[c],u=l((()=>(0,n._)("span",null,"Leads",-1))),m=[u],h={class:"table-heading"},p={class:"flex"},f={class:"floating-container"},g=l((()=>(0,n._)("th",null," CIN/LLPIN ",-1))),_={class:"flex"},b={class:"floating-container"},v={class:"flex"},y={class:"floating-container"},w={class:"flex"},C={class:"floating-container"},k=l((()=>(0,n._)("th",{class:"p12"},null,-1))),N=["onClick","onKeyup"],$={class:"dots p12"},P={colspan:"5",class:"p0"};function I(t,e,i,l,c,u){const I=(0,n.up)("font-awesome-icon"),D=(0,n.up)("dots-menu"),T=(0,n.up)("table-sort"),x=(0,n.up)("dots-img"),A=(0,n.up)("table-pagination"),M=(0,n.up)("table-main"),E=(0,n.Q2)("debounce");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",o,[1==c.menuVisibisility?((0,n.wg)(),(0,n.j4)(D,{key:0},{links:(0,n.w5)((()=>[(0,n._)("li",{onClick:e[0]||(e[0]=(0,a.iM)((t=>u.deleteClient(c.selectedClientId,c.selectedClient)),["prevent"]))},[(0,n.Wm)(I,{class:"menu-icons",icon:["fas","trash"]}),(0,n.Uk)(" Delete ")]),(0,n._)("li",{onClick:e[1]||(e[1]=(0,a.iM)((t=>u.changeClientTag(c.selectedClientId,1)),["prevent"]))},[(0,n.Wm)(I,{class:"menu-icon",icon:["fas","check"]}),(0,n.Uk)(" Confirmed ")]),(0,n._)("li",{onClick:e[2]||(e[2]=(0,a.iM)((t=>u.changeClientTag(c.selectedClientId,2)),["prevent"]))},[(0,n.Wm)(I,{class:"menu-icon",icon:["fas","hand-holding-dollar"]}),(0,n.Uk)(" Lead ")])])),_:1})):(0,n.kq)("",!0)],512),(0,n._)("div",r,[(0,n._)("div",{onClick:e[3]||(e[3]=(0,a.iM)((t=>u.clientStatus(1)),["prevent"])),class:(0,s.C_)(["tag-container",1===c.filterFor[4]?"active-tag":""])},d,2),(0,n._)("div",{onClick:e[4]||(e[4]=(0,a.iM)((t=>u.clientStatus(2)),["prevent"])),class:(0,s.C_)(["tag-container",2===c.filterFor[4]?"active-tag":""])},m,2)]),(0,n.Wm)(M,null,{thead:(0,n.w5)((()=>[(0,n._)("tr",h,[(0,n._)("th",null,[(0,n._)("div",p,[((0,n.wg)(),(0,n.j4)(T,{onClicked:e[5]||(e[5]=t=>{c.l=!c.l,c.j=!c.j,c.k=!c.k,c.p=!c.p,u.sort()}),key:c.i,sortBy:"name",sortType:"string",storeName:"clients"})),(0,n._)("div",f,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>c.filterFor[0]=t),ref:"nameH",type:"text",class:"header p0",required:""},null,512),[[E,u.sort,"700ms",{lock:!0}],[a.nr,c.filterFor[0]]]),(0,n._)("span",{onClick:e[7]||(e[7]=e=>t.$refs["nameH"].focus()),class:"floating-label"},"name")])])]),g,(0,n._)("th",null,[(0,n._)("div",_,[((0,n.wg)(),(0,n.j4)(T,{onClicked:e[8]||(e[8]=t=>{c.l=!c.l,c.k=!c.k,c.i=!c.i,c.p=!c.p,u.sort()}),key:c.j,sortBy:"type",sortType:"string",storeName:"clients"})),(0,n._)("div",b,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":e[9]||(e[9]=t=>c.filterFor[1]=t),ref:"typeH",type:"text",class:"header p0",required:""},null,512),[[E,u.sort,"700ms",{lock:!0}],[a.nr,c.filterFor[1]]]),(0,n._)("span",{onClick:e[10]||(e[10]=e=>t.$refs["typeH"].focus()),class:"floating-label"},"type")])])]),(0,n._)("th",null,[(0,n._)("div",v,[((0,n.wg)(),(0,n.j4)(T,{onClicked:e[11]||(e[11]=t=>{c.l=!c.l,c.j=!c.j,c.i=!c.i,c.p=!c.p,u.sort()}),key:c.k,sortBy:"ca",sortType:"string",storeName:"clients"})),(0,n._)("div",y,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":e[12]||(e[12]=t=>c.filterFor[2]=t),ref:"caH",type:"text",class:"header p0",required:""},null,512),[[E,u.sort,"700ms",{lock:!0}],[a.nr,c.filterFor[2]]]),(0,n._)("span",{onClick:e[13]||(e[13]=e=>t.$refs["caH"].focus()),class:"floating-label"},"CA")])])]),(0,n._)("th",null,[(0,n._)("div",w,[((0,n.wg)(),(0,n.j4)(T,{onClicked:e[14]||(e[14]=t=>{c.i=!c.i,c.j=!c.j,c.k=!c.k,c.p=!c.p,u.sort()}),key:c.l,sortBy:"con",sortType:"string",storeName:"clients"})),(0,n._)("div",C,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":e[15]||(e[15]=t=>c.filterFor[3]=t),ref:"conH",type:"text",class:"header p0",required:""},null,512),[[E,u.sort,"700ms",{lock:!0}],[a.nr,c.filterFor[3]]]),(0,n._)("span",{onClick:e[16]||(e[16]=e=>t.$refs["conH"].focus()),class:"floating-label"},"contact")])])]),k])])),tbody:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(c.clientList,((t,e)=>((0,n.wg)(),(0,n.iD)(n.HY,{key:e},[(0,n._)("tr",{class:"tr hidden-tr-parent",tabindex:"0",onClick:(0,a.iM)((i=>u.editClient("row"+e,t.id)),["stop"]),onKeyup:(0,a.D2)((i=>u.editClient("row"+e,t.id)),["enter"])},[(0,n._)("td",null,(0,s.zw)(t.name),1),(0,n._)("td",null,(0,s.zw)(t.cin),1),(0,n._)("td",null,(0,s.zw)(t.type),1),(0,n._)("td",null,[(0,n._)("p",null," Name: "+(0,s.zw)(t.caFirmName),1),(0,n._)("p",null," E-Mail: "+(0,s.zw)(t.caEmail),1),(0,n._)("p",null," Pan: "+(0,s.zw)(t.caPan),1),(0,n._)("p",null," Address: "+(0,s.zw)(t.caAddress),1)]),(0,n._)("td",null,[(0,n._)("p",null," Name: "+(0,s.zw)(t.conName),1),(0,n._)("p",null," Phone: "+(0,s.zw)(t.conPhone),1),(0,n._)("p",null," E-Mail: "+(0,s.zw)(t.conEmail),1)]),(0,n._)("div",$,[(0,n.Wm)(x,{onOpenMenu:e=>u.menu(e,{client:t.name+" ("+t.type+")",clientId:t.id,visibility:!0}),onHideMenu:e=>u.menu(e,{client:t.name+" ("+t.type+")",clientId:t.id,visibility:!1})},null,8,["onOpenMenu","onHideMenu"])])],40,N),(0,n._)("tr",{class:"tr tr-hidden hide mb16",ref_for:!0,ref:"row"+e},[(0,n._)("td",P,[c.componentId?.[t.id]?((0,n.wg)(),(0,n.j4)((0,n.LL)(c.componentId?.[t.id]),{key:0,uk:e,clientData:JSON.stringify(t),onEditingCompleted:i=>u.editClient("row"+e,t.id)},null,40,["uk","clientData","onEditingCompleted"])):(0,n.kq)("",!0)])],512)],64)))),128))])),default:(0,n.w5)((()=>[((0,n.wg)(),(0,n.j4)(A,{onTableData:e[17]||(e[17]=t=>c.clientList=t),filters:c.filterFor,key:t.$store.getters["clients/getKey"],tableName:"clients"},null,8,["filters"]))])),_:1})])}var D=i(5978),T=i(9230),x=i(692),A=i(3877),M=i(3693),E=i(5839),L=i(4754),Z=i(1049),j=i(665),S=i(4814),V={components:{ClientCreate:T["default"],TableMain:x.Z,DotsImg:A.Z,TablePagination:M["default"],DotsMenu:E.Z,TableSort:Z.Z,NoAccess:D["default"]},data(){return{clientList:"",selectedClientId:"",selectedClient:"",menuVisibisility:"",i:0,j:0,k:0,l:0,p:0,filterFor:["","","","",1],componentId:{}}},methods:{clientStatus(t){this.$store.commit("clients/setClientStatus",t),this.filterFor[4]=t,this.sort()},editClient(t,e){const i=this.$refs[t][0].classList.contains("hide");1==i?this.$refs[t][0].classList.remove("hide"):this.$refs[t][0].classList.add("hide"),(0,j.Z)("edit_client")?this.componentId[e]="ClientCreate":this.componentId[e]="NoAccess"},menu(t,{client:e,clientId:i,visibility:n}){this.menuVisibisility=n,this.selectedClientId=i,this.selectedClient=e,1==n&&t.target.parentElement.appendChild(this.$refs["menu"])},deleteClient(t,e){(0,S.Z)({text:e,promise:()=>L.yj["delete"]({clientId:t}),mutationFn:"clients/deleteClient",mutationArgs:{clientId:t,filters:this.filterFor},context:this})},changeClientTag(t,e){L.yj.tag({id:t,tagId:e}).then((()=>{this.$store.commit("clients/refetch")})).catch((t=>console.log(t)))},sort(){this.$store.commit("clients/paginate")}}},F=i(3744);const O=(0,F.Z)(V,[["render",I],["__scopeId","data-v-721f2d78"]]);var U=O},3877:function(t,e,i){i.d(e,{Z:function(){return m}});var n=i(6252),a=i(9963),s=i(3577);const l={class:"dots-parent"};function o(t,e,i,o,r,c){const d=(0,n.up)("font-awesome-icon"),u=(0,n.Q2)("click-away");return(0,n.wy)(((0,n.wg)(),(0,n.iD)("td",{onClick:e[0]||(e[0]=(0,a.iM)((t=>c.showDots(t)),["stop"])),class:"dots-parent p0"},[(0,n._)("div",l,[(0,n.Wm)(d,{class:(0,s.C_)([r.dotsVisibility,"dots-img"]),icon:["fas","ellipsis-vertical"]},null,8,["class"])])])),[[u,c.hide]])}var r=i(1535),c={name:"DotsImg",mixins:[r.jB],data(){return{dotsVisibility:""}},methods:{showDots(t){this.dotsVisibility="dots-clicked",this.$emit("openMenu",t)},hide(t){this.dotsVisibility="",this.$emit("hideMenu",t)}}},d=i(3744);const u=(0,d.Z)(c,[["render",o],["__scopeId","data-v-5d37841e"]]);var m=u},5839:function(t,e,i){i.d(e,{Z:function(){return u}});var n=i(6252),a=i(9963);const s={class:"dots-menu"};function l(t,e,i,l,o,r){return(0,n.wg)(),(0,n.iD)("div",s,[(0,n._)("ul",{onClick:e[0]||(e[0]=(0,a.iM)((t=>!0),["stop"]))},[(0,n.WI)(t.$slots,"links")])])}var o=i(1535),r={name:"dotsMenu",data(){return{menu:""}},mixins:[o.jB]},c=i(3744);const d=(0,c.Z)(r,[["render",l]]);var u=d},5978:function(t,e,i){i.r(e),i.d(e,{default:function(){return r}});var n=i(6252);function a(t,e){return(0,n.wg)(),(0,n.iD)("div",null," you dont have access to this page ")}var s=i(3744);const l={},o=(0,s.Z)(l,[["render",a]]);var r=o},692:function(t,e,i){i.d(e,{Z:function(){return u}});var n=i(6252);const a={class:"card"},s={class:"mr16 ml16 mt16"},l={class:"table-main-head ml16 mb16"};function o(t,e,i,o,r,c){return(0,n.wg)(),(0,n.iD)("div",a,[(0,n._)("div",s,[(0,n._)("div",l,[(0,n.WI)(t.$slots,"tableHeader")]),(0,n._)("table",null,[(0,n._)("thead",null,[(0,n.WI)(t.$slots,"thead")]),(0,n._)("tbody",null,[(0,n.WI)(t.$slots,"tbody")])]),(0,n.WI)(t.$slots,"default")])])}var r={name:"TableMain"},c=i(3744);const d=(0,c.Z)(r,[["render",o]]);var u=d},3693:function(t,e,i){i.r(e),i.d(e,{default:function(){return N}});var n=i(6252),a=i(9963),s=i(3577);const l=t=>((0,n.dD)("data-v-56d94cac"),t=t(),(0,n.Cn)(),t),o={class:"flex table-pagination"},r={class:"recordsPerPage"},c=l((()=>(0,n._)("label",{for:"recordsPerPage"},"entries",-1))),d=l((()=>(0,n._)("option",{value:50},"50",-1))),u=l((()=>(0,n._)("option",{value:100},"100",-1))),m=l((()=>(0,n._)("option",{value:150},"150",-1))),h=l((()=>(0,n._)("option",{value:200},"200",-1))),p=[d,u,m,h],f={class:"neutral"},g=["onClick"],_={class:"neutral"};function b(t,e,i,l,d,u){return(0,n.wg)(),(0,n.iD)("div",o,[(0,n._)("div",r,[c,(0,n.wy)((0,n._)("select",{onChange:e[0]||(e[0]=t=>u.getPageData()),id:"recordsPerPage","onUpdate:modelValue":e[1]||(e[1]=t=>d.recordsPerPage=t)},p,544),[[a.bM,d.recordsPerPage]])]),(0,n._)("ul",null,[(0,n._)("li",f,[(0,n._)("button",{onClick:e[2]||(e[2]=t=>u.pageChange(1))},"<")]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(u.showPage(),(t=>((0,n.wg)(),(0,n.iD)("li",{class:"neutral",key:t},[(0,n._)("button",{class:(0,s.C_)(t==d.currentPage?"green":""),onClick:e=>u.pageChange(t)},(0,s.zw)(t),11,g)])))),128)),(0,n._)("li",_,[(0,n._)("button",{onClick:e[3]||(e[3]=t=>u.pageChange(d.pageCount))},">")])])])}var v=i(9669),y=i.n(v),w={name:"TablePagination",data(){return{pageData:"",currentPage:1,recordsPerPage:50,pageCount:"",noCachingTotalRecords:""}},computed:{totalRecords(){return""!=this.noCachingTotalRecords?this.noCachingTotalRecords:this.$store.getters?.[`${this.tableName}/${this.tableName}CountGet`]},isStoreAvailable(){return!(1==this.noCaching)}},props:{tableName:String,sortBy:String,sortOrder:Number,filters:Array,noCaching:Boolean},methods:{showPage(){if(isNaN(this.pageCount))return 0;{let t=5;t=Math.min(t,this.pageCount);let e=this.currentPage-Math.floor(t/2);return e=Math.max(e,1),e=Math.min(e,this.pageCount-t+1),[...Array(t)].map(((t,i)=>i+e))}},pageChange(t){this.currentPage=t,this.isStoreAvailable&&this.$store.commit(`${this.tableName}/currentPageSet`,{index:t}),this.getPageData()},getPageData(){this.pageCount=Math.ceil(this.totalRecords/this.recordsPerPage);let{sortBy:t,sortOrder:e}=this.$store.getters?.[`${this.tableName}/sortGet`]?this.$store.getters?.[`${this.tableName}/sortGet`]:{},i=this.$store.getters?.[`${this.tableName}/${this.tableName}ListGet`]?.(this.currentPage,t,e,this.filters);void 0==i||0==i?.length||i?.length<this.recordsPerPage&&i?.length>=50||!this.isStoreAvailable?y().get(`/u/api/${this.tableName}`,{params:{from:(this.currentPage-1)*this.recordsPerPage,recordsPerPage:this.recordsPerPage,sortBy:t,sortOrder:e,filters:this.filters},withCredentials:!0}).then((i=>{this.isStoreAvailable&&this.$store.commit(`${this.tableName}/${this.tableName}List`,{index:this.currentPage,sortBy:t,sortOrder:e,filters:this.filters,data:i.data[this.tableName+"List"]}),this.$emit("tableData",i.data[this.tableName+"List"])})):this.$emit("tableData",i)}},created(){if(this.isStoreAvailable){const t=this.$store.getters[`${this.tableName}/getCurrentPage`];""==t||void 0==t?this.$store.commit(`${this.tableName}/currentPageSet`,{index:this.currentPage}):this.currentPage=t}""==this.totalRecords||void 0==this.totalRecords?y().get(`/u/api/${this.tableName}/count`,{params:{filters:this.filters},withCredentials:!0}).then((t=>{this.noCachingTotalRecords=t.data.count,this.isStoreAvailable&&this.$store.commit?.(`${this.tableName}/${this.tableName}CountSet`,t?.data?.count),this.getPageData()})):this.getPageData()}},C=i(3744);const k=(0,C.Z)(w,[["render",b],["__scopeId","data-v-56d94cac"]]);var N=k},1049:function(t,e,i){i.d(e,{Z:function(){return c}});var n=i(6252),a=i(9963);function s(t,e,i,s,l,o){const r=(0,n.up)("font-awesome-icon");return(0,n.wg)(),(0,n.iD)("div",{class:"sort mr8",onClick:e[0]||(e[0]=(...t)=>o.rotateImg&&o.rotateImg(...t)),onKeyup:e[1]||(e[1]=(0,a.D2)(((...t)=>o.rotateImg&&o.rotateImg(...t)),["enter"]))},["string"==i.sortType?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[1==l.sortOrder?((0,n.wg)(),(0,n.j4)(r,{key:0,class:"sort-btn",icon:"fa-solid fa-arrow-down-a-z"})):((0,n.wg)(),(0,n.j4)(r,{key:1,class:"sort-btn",icon:"fa-solid fa-arrow-up-a-z"}))],64)):"number"==i.sortType?((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[1==l.sortOrder?((0,n.wg)(),(0,n.j4)(r,{key:0,class:"sort-btn",icon:"fa-solid fa-arrow-down-1-9"})):((0,n.wg)(),(0,n.j4)(r,{key:1,class:"sort-btn",icon:"fa-solid fa-arrow-up-1-9"}))],64)):(0,n.kq)("",!0)],32)}var l={name:"TableSort",props:["sortBy","storeName","sortType"],data(){return{sortOrder:0}},methods:{rotateImg(){1===this.sortOrder?this.sortOrder=0:this.sortOrder=1,this.$emit("clicked"),this.$store.commit(`${this.storeName}/sortSet`,{sortBy:this.sortBy,sortOrder:this.sortOrder})}},updated(){console.log("updated")}},o=i(3744);const r=(0,o.Z)(l,[["render",s],["__scopeId","data-v-8a032ec6"]]);var c=r},1535:function(t,e,i){i.d(e,{jB:function(){return c}});const n=function(){return null!==document.ontouchstart?"click":"touchstart"},a="__vue_click_away__",s=function(t,e,i){l(t);let s=i.context,o=e.value,r=!1;setTimeout((function(){r=!0}),0),t[a]=function(e){if((!t||!t.contains(e.target))&&o&&r&&"function"===typeof o)return o.call(s,e)},document.addEventListener(n(),t[a],!1)},l=function(t){document.removeEventListener(n(),t[a],!1),delete t[a]},o=function(t,e,i){e.value!==e.oldValue&&s(t,e,i)},r={mounted:s,updated:o,unmounted:l},c={directives:{ClickAway:r}}},665:function(t,e,i){i.d(e,{Z:function(){return a}});var n=i(2283);function a(t){const e=n.Z.getters["rights/getUserRights"],i=e?.some((e=>e.code_name==t));return i}},3262:function(t,e,i){function n({text:t,url:e,mutationFnName:i,mutationArgs:n,promise:a,context:s}){let l=n;void 0==l&&(l={}),a.then((()=>s.$toast.success(`saved ${t}`))).then((()=>{i&&s.$store.commit(i,l),setTimeout((()=>s.$router.push(e)),1)})).catch((t=>{null!=t&&s.$toast.error("Oops! We can't perform this action right now")})).finally((()=>{s.disabled=!1}))}i.d(e,{Z:function(){return n}})},4814:function(t,e,i){i.d(e,{Z:function(){return l}});var n=i(2283),a=i(6737),s=i.n(a);function l({text:t,mutationFn:e,mutationArgs:i,promise:a,context:l}){s()({icon:"warning",title:"Alert",text:`Do you really want to delete "${t}"`,buttons:!0,dangerMode:!0}).then((t=>{if(null==t)throw null;return a()})).then((()=>(n.Z.commit(e,i),l.$toast.success("Deleted")))).catch((t=>{null!=t&&l.$toast.error("Oops! We can't perform this action right now")}))}},4802:function(t,e,i){i.d(e,{Z:function(){return a}});var n=i(2283);function a({text:t,mutationFnName:e,mutationArgs:i,promise:a,context:s}){a.then((()=>{e&&n.Z.commit(e,i),s.$emit("editingCompleted",{}),s.$toast.success(`Saved ${t}`)})).catch((t=>{if(null!=t)return s.$toast.error("Oops! We can't perform this action right now")})).finally((()=>{s.disabled=!1,void 0!=s?.polling&&(s.polling=!0)}))}}}]);
//# sourceMappingURL=874.baf63f95.js.map