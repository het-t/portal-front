{"version":3,"file":"js/885.06bb29ad.js","mappings":"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","sources":["webpack://portal/./src/components/UserCreate.vue","webpack://portal/./src/components/UserCreate.vue?9b3a","webpack://portal/./src/helpers/swalCreate.js","webpack://portal/./src/helpers/swalEdit.js"],"sourcesContent":["<template>\r\n    <div class=\"card\">\r\n        <div class=\"table-tabs\">\r\n            <button @click=\"openTab($event, 'general')\" :ref=\"('defaultTab'+uk)\" class=\"button nutral tab\">general</button>\r\n            <button @click=\"openTab($event, 'credentials')\" class=\"button nutral tab\">credentials</button>\r\n        </div>\r\n\r\n        <div>\r\n            <form class=\"mt16 pb16 pr16 pl16\">\r\n                <div class=\"pl16 pb16\">\r\n                    <div class=\"fg hide\" :ref=\"('general'+uk)\">\r\n                        <div :id=\"('i1'+uk)\" class=\"row mt8\">\r\n                            <label :for=\"('user-firstname'+uk)\" class=\"labels c1\">firstname</label>\r\n                            <input :ref=\"('general'+uk+'focus')\" v-model=\"userFirstName\" :id=\"('user-firstname'+uk)\" type=\"text\">\r\n                        </div>\r\n\r\n                        <div :id=\"('i2'+uk)\" class=\"row mt8\">\r\n                            <label :for=\"('user-lastname'+uk)\" class=\"labels c1\">lastname</label>\r\n                            <input v-model=\"userLastName\" type=\"text\" :id=\"('user-lastname'+uk)\">\r\n                        </div>\r\n\r\n                        <div :id=\"('i3'+uk)\" class=\"row mt8\">\r\n                            <label :for=\"('user-gender'+uk)\" class=\"labels c1\">gender</label>\r\n                            <select v-model=\"userGender\" :id=\"('user-gender'+uk)\">\r\n                                <option value=\"male\">Male</option>\r\n                                <option value=\"female\">Female</option>\r\n                                <option value=\"others\">Others</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        <div :id=\"('i4'+uk)\" class=\"row mt8\">\r\n                            <label :for=\"('user-birthdate'+uk)\" class=\"labels c1\">birthdate</label>\r\n                            <input v-model=\"userBirthdate\" type=\"date\" :id=\"('user-birthdate'+uk)\">\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"fg hide\" :ref=\"('credentials'+uk)\">\r\n                        <div :id=\"('i5'+uk)\" class=\"row mt8\">\r\n                            <label :for=\"('user-email'+uk)\" class=\"labels c1\">username</label>\r\n                            <input :ref=\"('credentials'+uk+'focus')\" v-model=\"userEmail\" type=\"text\" :id=\"('user-email'+uk)\">\r\n                        </div>\r\n\r\n                        <div v-if=\"orgId == ''\" :id=\"('i6'+uk)\" class=\"row mt8\">\r\n                            <label :for=\"('user-role'+uk)\" class=\"labels c1\">role</label>\r\n                            <select v-model=\"userRole\" :id=\"('user-role'+uk)\">\r\n                                <option v-for=\"(role) in dbRoles\" :key=\"role.id\" :value=\"role.name\">\r\n                                    {{role.name}}\r\n                                </option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        <div :id=\"('i7'+uk)\" class=\"row mt8\">\r\n                            <label :for=\"('user-pwd'+uk)\" class=\"labels c1\">password</label>\r\n                            <input :disabled=\"editUserId == undefined ? false : true\" v-model=\"userPassword\" type=\"password\" :id=\"('user-pwd'+uk)\">\r\n                        </div>\r\n                    </div>\r\n\r\n                    <button :disabled=\"disabled === true\" @click.prevent=\"proceed()\" class=\"green mt16 button\">save</button>\r\n                    <button :disabled=\"disabled === true\" @click.prevent=\"canceled()\" class=\"neutral ml8 mt16 button\">cancel</button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </div>\r\n\r\n\r\n</template>\r\n\r\n<script>\r\nimport { users, admin } from '@/api/index.js'\r\nimport useCreateSwal from '@/helpers/swalCreate'\r\nimport useEditSwal from '../helpers/swalEdit'\r\n\r\n    export default {\r\n        name: 'CreateUser',\r\n        props: ['editUserId', 'uk'],\r\n        data() {\r\n            return {\r\n                userFirstName: '',\r\n                userLastName: '',\r\n                userGender: '',\r\n                userBirthdate: '',\r\n                userEmail: '',\r\n                userRole: '',\r\n                userPassword: '',\r\n                dbRoles: [],\r\n                userId: '',\r\n                disabled: false,\r\n                orgId: ''\r\n            }\r\n        },\r\n        mounted() {\r\n            if (this.editUserId != undefined) {\r\n                const userData = this.$store.getters['users/usersDataGet'](this.editUserId)\r\n\r\n                if (userData != undefined && userData != '') {\r\n                    this.populateDataProperties(userData)\r\n                }\r\n            }\r\n            if (this.orgId == '') {\r\n                const rolesList = this.$store.getters['roles/allRoles']\r\n\r\n                if (rolesList != undefined && rolesList != '') {\r\n                    this.dbRoles = rolesList\r\n                }\r\n            }\r\n            else {\r\n                this.orgId = this.$route.params?.orgId != undefined ? this.$route.params.orgId : ''\r\n            }\r\n\r\n            this.$refs['defaultTab'+this.uk].click()\r\n        },\r\n        methods: {\r\n            openTab(e, newTab) {\r\n                var tabs = e.target.parentElement.getElementsByClassName('tab')\r\n                let curTab = [...tabs].find(tab => tab?.classList?.contains('tab-open') == true)\r\n                curTab?.classList?.remove('tab-open')\r\n                e?.target?.classList?.add('tab-open')\r\n                this.$refs['general'+this.uk]?.classList?.add('hide')\r\n                this.$refs['credentials'+this.uk]?.classList?.add('hide')\r\n                this.$refs[newTab+this.uk]?.classList?.remove('hide')\r\n                this.$refs[newTab+this.uk+'focus'].focus()\r\n            },\r\n            canceled() {\r\n                if (this.editUserId != undefined) this.$emit(\"editingCompleted\", {force: true})\r\n                else {\r\n                    if (this.orgId != '') this.$router.push('/u/admin/orgs')\r\n                    else this.$router.push('/u/users/list')\r\n                }\r\n            },\r\n            proceed() {\r\n                this.disabled = true\r\n                const args = {\r\n                    userId: this.userId,\r\n                    firstName: this.userFirstName,\r\n                    lastName: this.userLastName,\r\n                    gender: this.userGender,\r\n                    birthdate: this.userBirthdate,\r\n                    email: this.userEmail,\r\n                    role: this.userRole,\r\n                    password: this.userPassword,\r\n                    orgId: this.orgId\r\n                }\r\n\r\n                if (this.orgId != '') {\r\n                    useCreateSwal({\r\n                        text: args.firstName + '' + args.lastName,\r\n                        url: `/u/admin/orgs/${args.orgId}`,\r\n                        promise: admin.users.create(args),\r\n                        context: this\r\n                    })\r\n                }\r\n                else {\r\n                    if (!args.userId) {\r\n                        useCreateSwal({\r\n                            text: args.firstName + ' ' + args.lastName,\r\n                            url: '/u/users/list',\r\n                            promise: users.create(args),\r\n                            mutationFnName: 'users/refetch',\r\n                            context: this\r\n                        })\r\n                    }\r\n                    else {\r\n                        useEditSwal({\r\n                            text: args.firstName + ' ' + args.lastName,\r\n                            mutationFnName: 'users/refetch',\r\n                            mutationArgs: {userId: args.userId},\r\n                            promise: users.edit(args),\r\n                            context: this\r\n                        })\r\n                    }\r\n                }\r\n            },\r\n            populateDataProperties(o) {\r\n                const {\r\n                    firstName,\r\n                    lastName,\r\n                    gender,\r\n                    birthdate,\r\n                    email,\r\n                    role,\r\n                    password,\r\n                    id\r\n                } = o\r\n\r\n                this.userFirstName = firstName\r\n                this.userLastName = lastName\r\n                this.userGender = gender\r\n                this.userBirthdate = new Date(birthdate)\r\n                this.userEmail = email\r\n                this.userRole = role\r\n                this.userPassword = password\r\n                this.userId = id\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n.table-tabs {\r\n    display: flex;\r\n}\r\n.tab {\r\n    padding: auto;\r\n    width: 50%;\r\n    background-color: white;\r\n    border-radius: 0;\r\n}\r\n.tab-open {\r\n    border: solid 1px #d2d2d2;\r\n    color:  #e7eaec;\r\n    background-color: #2F4050;\r\n}\r\n\r\n\r\n\r\ninput, select {\r\n    width: 100%;\r\n}\r\ninput[type=\"checkbox\"] {\r\n    width:auto !important;\r\n    display: inline;\r\n}\r\n.labels {\r\n    align-self: center;\r\n}\r\n</style>","import { render } from \"./UserCreate.vue?vue&type=template&id=3f09db75&scoped=true\"\nimport script from \"./UserCreate.vue?vue&type=script&lang=js\"\nexport * from \"./UserCreate.vue?vue&type=script&lang=js\"\n\nimport \"./UserCreate.vue?vue&type=style&index=0&id=3f09db75&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\portal\\\\frontend\\\\portal\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3f09db75\"]])\n\nexport default __exports__","export default function useCreateSwal({text, url, mutationFnName, mutationArgs, promise, context}) {\r\n    let args = mutationArgs\r\n    if (args == undefined) args = {}\r\n\r\n    promise\r\n    .then(() =>\r\n        context.$toast.success(`saved ${text}`)\r\n    )\r\n    .then(() => { \r\n        if (mutationFnName) context.$store.commit(mutationFnName, args)\r\n        setTimeout(() => context.$router.push(url), 1)\r\n    })\r\n    .catch((err) => {\r\n        if (err != null) context.$toast.error(`Oops! We can't perform this action right now`)\r\n    })\r\n    .finally(() => {\r\n        context.disabled = false\r\n    })\r\n}","import store from '@/store/index.js'\r\n\r\nexport default function useEditSwal({text, mutationFnName, mutationArgs, promise, context}) {\r\n    promise\r\n    .then(() => {\r\n        if (mutationFnName) store.commit(mutationFnName, mutationArgs)\r\n        context.$emit('editingCompleted', {}) //to toggle hidden-tr\r\n        context.$toast.success(`Saved ${text}`)\r\n    })\r\n    .catch((err) =>{ \r\n        if (err != null) return context.$toast.error(`Oops! We can't perform this action right now`)\r\n    })\r\n    .finally(() => {\r\n        context.disabled = false\r\n        if (context?.polling != undefined) context.polling = true\r\n    })\r\n}"],"names":["class","value","openTab","$event","ref","uk","id","for","type","userFirstName","userLastName","userGender","userBirthdate","userEmail","orgId","dbRoles","role","key","name","userRole","disabled","undefined","editUserId","userPassword","proceed","canceled","props","data","userId","mounted","this","userData","$store","getters","populateDataProperties","rolesList","$route","params","$refs","click","methods","e","newTab","tabs","target","parentElement","getElementsByClassName","curTab","find","tab","classList","contains","remove","add","focus","$emit","force","$router","push","args","firstName","lastName","gender","birthdate","email","password","text","url","promise","context","mutationFnName","mutationArgs","o","Date","__exports__","render","useCreateSwal","then","$toast","success","commit","setTimeout","catch","err","error","finally","useEditSwal","polling"],"sourceRoot":""}