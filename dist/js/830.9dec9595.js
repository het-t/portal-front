"use strict";(self["webpackChunkportal"]=self["webpackChunkportal"]||[]).push([[830],{6830:function(e,t,i){i.r(t),i.d(t,{default:function(){return I}});var l=i(6252),s=i(9963),o=i(3577);const r=e=>((0,l.dD)("data-v-5af4d39c"),e=e(),(0,l.Cn)(),e),a={class:"card pr16 pl16 pb16"},n={class:"pr16 pl16 pt16 pb16"},d={class:"row mt8"},c={ref:"focus",for:"role-name",class:"labels c1"},u=r((()=>(0,l._)("div",{class:"hr"},null,-1))),m={class:"row mt8"},h=r((()=>(0,l._)("label",{class:"labels c1"},"rights",-1))),p=["id","value","name","title"],g=["for"],f=r((()=>(0,l._)("div",{class:"hr"},null,-1))),b=["disabled"],v=["disabled"];function R(e,t,i,r,R,N){return(0,l.wg)(),(0,l.iD)("div",a,[(0,l._)("form",n,[(0,l._)("div",d,[(0,l._)("label",c,"name",512),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>R.roleName=e),type:"text",id:"role-name"},null,512),[[s.nr,R.roleName]])]),u,(0,l._)("div",m,[h,(0,l._)("div",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(R.rightsList,(e=>((0,l.wg)(),(0,l.iD)("div",{class:"mt16 flex",key:e},[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>R.roleRights=e),id:e.id,value:e.id,class:"m0 mr16",type:"checkbox",name:e.name,title:e?.description},null,8,p),[[s.e8,R.roleRights]]),(0,l._)("label",{for:e.id},(0,o.zw)(e.name),9,g)])))),128))])]),f,(0,l._)("button",{disabled:!0===R.disabled,onClick:t[2]||(t[2]=(0,s.iM)((e=>void 0==i.editRoleId||""==i.editRoleId?N.createRole({roleName:R.roleName,roleRights:R.roleRights}):N.editRole()),["prevent"])),class:"green button"},"save",8,b),(0,l._)("button",{disabled:!0===R.disabled,onClick:t[3]||(t[3]=(0,s.iM)((e=>N.canceled()),["prevent"])),class:"neutral ml8 button"},"cancel",8,v)])])}var N=i(9235),_=i(3262),x=i(4802),w={name:"CreateRole",props:["editRoleId","uk"],data(){return{roleName:"",roleRights:[],rightsList:[],disabled:!1}},methods:{createRole({roleName:e,roleRights:t}){this.disabled=!0,(0,_.Z)({text:e,mutationFnName:"roles/RESET_STATE",promise:N.uJ.create({roleName:e,roleRights:t}),context:this,url:"/u/roles/list"})},editRole(){this.disabled=!0;const e={roleId:this.editRoleId,roleName:this.roleName,roleRights:this.roleRights};(0,x.Z)({text:e.roleName,mutationFnName:"roles/refetch",mutationArgs:{roleId:e.roleId},promise:N.uJ.edit(e),context:this})},canceled(){void 0!=this.editRoleId?this.$emit("editingCompleted",{force:!0}):this.$router.push("/u/roles/list")}},created(){this.rightsList=this.$store.getters["rights/getAllRightsList"];const e=this.$store.getters["roles/rolesDataGet"](this.editRoleId);console.log("editing",e),void 0!=e&&""!=e&&(console.log("coming inside",e),this.roleName=e[0].roleName,this.roleRights=e.map((e=>e.rightId)))},mounted(){this.$refs["focus"].focus()}},$=i(3744);const k=(0,$.Z)(w,[["render",R],["__scopeId","data-v-5af4d39c"]]);var I=k},3262:function(e,t,i){i.d(t,{Z:function(){return o}});var l=i(6737),s=i.n(l);function o({text:e,url:t,mutationFnName:i,mutationArgs:l,promise:o,context:r}){let a=l;void 0==a&&(a={}),o.then((()=>s()({title:"Success",text:`Created "${e}"`,icon:"success",button:"ok"}))).then((()=>{r.$store.commit(i,a),setTimeout((()=>r.$router.push(t)),1)})).catch((e=>{null!=e&&s()("Oops!",`We can't perform this action right now please try again\n\n details: ${e}`)})).finally((()=>{r.disabled=!1}))}},4802:function(e,t,i){i.d(t,{Z:function(){return r}});var l=i(4907),s=i(6737),o=i.n(s);function r({text:e,mutationFnName:t,mutationArgs:i,promise:s,context:r}){s.then((()=>(t&&l.Z.commit(t,i),r.$emit("editingCompleted",{}),o()({title:"Success",text:`Edited "${e}"`,icon:"success",button:"Ok"})))).catch((e=>{if(null!=e)return o()("Oops!",`We can't perform this action right now please try again\n\n details: ${e}`)})).finally((()=>{r.disabled=!1}))}}}]);
//# sourceMappingURL=830.9dec9595.js.map