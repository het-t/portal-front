{"version":3,"file":"js/900.e99cb619.js","mappings":"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","sources":["webpack://portal/./src/components/RoleCreate.vue","webpack://portal/./src/components/RoleCreate.vue?3454","webpack://portal/./src/helpers/swalCreate.js","webpack://portal/./src/helpers/swalEdit.js"],"sourcesContent":["<template>\r\n    <div class=\"card pr16 pl16 pb16\">\r\n        <form class=\"pr16 pl16 pt16 pb16\">\r\n            <div class=\"row mt8\">\r\n                <label ref=\"focus\" for=\"role-name\" class=\"labels c1\">name</label>\r\n                <input v-model=\"roleName\" type=\"text\" id=\"role-name\" class=\"role-name\"> \r\n            </div>\r\n                \r\n            <div class=\"hr\"></div>\r\n\r\n            <div class=\"row mt8\">\r\n                <label class=\"labels c1\">rights</label>\r\n                <div>\r\n                    <div class=\"mt16 flex\" v-for=\"right in getAllRightsList\" :key=\"right\">\r\n                        <input v-model=\"roleRights\" \r\n                            :id=\"right.id\" \r\n                            :value=\"right.id\" \r\n                            class=\"m0 mr16\" \r\n                            type=\"checkbox\" \r\n                            :name=\"right.name\" \r\n                            :title=\"right?.description\"\r\n                        >\r\n                        <label :for=\"right.id\">{{right.name}}</label>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"hr\"></div>\r\n\r\n            <button \r\n                :disabled=\"disabled === true\"\r\n                @click.prevent=\"(editRoleId == undefined || editRoleId == '') ? createRole({roleName, roleRights}) : editRole()\" \r\n                class=\"green button mt8\"\r\n            >save</button>\r\n            <button \r\n                :disabled=\"disabled === true\" \r\n                @click.prevent=\"canceled()\" \r\n                class=\"neutral ml8 button mt8\"\r\n            >cancel</button>\r\n        </form>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { roles } from '@/api'\r\nimport useCreateSwal from '@/helpers/swalCreate'\r\nimport useEditSwal from '../helpers/swalEdit'\r\nimport { mapGetters } from 'vuex'\r\n\r\n    export default {\r\n        name: 'CreateRole',\r\n        props: ['editRoleId', 'uk'],\r\n        data() {\r\n            return {\r\n                roleName: '',\r\n                roleRights: [],\r\n                rightsList: [],\r\n                disabled: false\r\n            }\r\n        },\r\n        computed: {\r\n            ...mapGetters('rights', [\r\n                'getAllRightsList'\r\n            ]),\r\n            ...mapGetters('roles', [\r\n                'rolesDataGet'\r\n            ]),\r\n        },\r\n        methods: {\r\n            createRole({roleName, roleRights}) {\r\n                this.disabled = true\r\n                useCreateSwal({\r\n                    text: roleName,\r\n                    mutationFnName: 'roles/RESET_STATE',\r\n                    promise: roles.create({roleName, roleRights}),\r\n                    context: this,\r\n                    url: '/u/roles/list'\r\n                }) \r\n            },\r\n            editRole() {\r\n                this.disabled = true\r\n                const args = {\r\n                    roleId: this.editRoleId,\r\n                    roleName: this.roleName,\r\n                    roleRights: this.roleRights\r\n                }\r\n                \r\n                useEditSwal({\r\n                    text: args.roleName,\r\n                    mutationFnName: 'roles/refetch',\r\n                    mutationArgs: {roleId: args.roleId},\r\n                    promise: roles.edit(args),\r\n                    context: this\r\n                })\r\n            },\r\n            canceled() {\r\n                if (this.editRoleId != undefined) {\r\n                    this.$emit(\"editingCompleted\", {force: true})\r\n                }\r\n                else this.$router.push('/u/roles/list')\r\n            }\r\n        },\r\n        created() {                       \r\n            this.rightsList = this.$store.getters['rights/getAllRightsList']    //action invoked in rolesview.js\r\n            \r\n            const roleDataStore = this.$store.getters['roles/rolesDataGet'](this.editRoleId)\r\n                        \r\n            if (roleDataStore != undefined && roleDataStore != '') {\r\n                this.roleName = roleDataStore[0].roleName\r\n                this.roleRights = roleDataStore.map(o => o.rightId)\r\n            }\r\n        },\r\n        mounted() {\r\n            this.$refs['focus'].focus()\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .flex {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 12px;\r\n    }\r\n    .role-name {\r\n        width: 30%;\r\n    }\r\n    input[type=\"checkbox\"] {\r\n        width:auto !important;\r\n        display: inline;\r\n    }\r\n    .labels {\r\n        align-self: center;\r\n    }\r\n\r\n</style>","import { render } from \"./RoleCreate.vue?vue&type=template&id=5b0ef01d&scoped=true\"\nimport script from \"./RoleCreate.vue?vue&type=script&lang=js\"\nexport * from \"./RoleCreate.vue?vue&type=script&lang=js\"\n\nimport \"./RoleCreate.vue?vue&type=style&index=0&id=5b0ef01d&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\portal\\\\frontend\\\\portal\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5b0ef01d\"]])\n\nexport default __exports__","export default function useCreateSwal({text, url, mutationFnName, mutationArgs, promise, context}) {\r\n    let args = mutationArgs\r\n    if (args == undefined) args = {}\r\n\r\n    promise\r\n    .then(() =>\r\n        context.$toast.success(`saved ${text}`)\r\n    )\r\n    .then(() => { \r\n        if (mutationFnName) context.$store.commit(mutationFnName, args)\r\n        setTimeout(() => context.$router.push(url), 1)\r\n    })\r\n    .catch((err) => {\r\n        if (err != null) context.$toast.error(`Oops! We can't perform this action right now`)\r\n    })\r\n    .finally(() => {\r\n        context.disabled = false\r\n    })\r\n}","import store from '@/store/index.js'\r\n\r\nexport default function useEditSwal({text, mutationFnName, mutationArgs, promise, context}) {\r\n    promise\r\n    .then(() => {\r\n        if (mutationFnName) store.commit(mutationFnName, mutationArgs)\r\n        context.$emit('editingCompleted', {}) //to toggle hidden-tr\r\n        context.$toast.success(`Saved ${text}`)\r\n    })\r\n    .catch((err) =>{ \r\n        if (err != null) return context.$toast.error(`Oops! We can't perform this action right now`)\r\n    })\r\n    .finally(() => {\r\n        context.disabled = false\r\n        if (context?.polling != undefined) context.polling = true\r\n    })\r\n}"],"names":["class","ref","for","type","id","roleName","getAllRightsList","right","key","value","name","title","description","roleRights","disabled","undefined","editRoleId","createRole","editRole","canceled","props","data","rightsList","computed","methods","this","text","mutationFnName","promise","context","url","args","roleId","mutationArgs","$emit","force","$router","push","created","$store","getters","roleDataStore","map","o","rightId","mounted","$refs","focus","__exports__","render","useCreateSwal","then","$toast","success","commit","setTimeout","catch","err","error","finally","useEditSwal","polling"],"sourceRoot":""}