"use strict";(self["webpackChunkportal"]=self["webpackChunkportal"]||[]).push([[216],{6216:function(e,t,l){l.r(t),l.d(t,{default:function(){return D}});var a=l(6252),s=l(3577),r=l(9963);const o=e=>((0,a.dD)("data-v-63fe4360"),e=e(),(0,a.Cn)(),e),i={class:"card"},n={class:"card-head m0 pb16 pt16 pr16 pl16"},d={class:"table-head m0"},h={class:"mr16 ml16 mt16 mb16 pr12 pl12"},c={class:"row mt8"},m=o((()=>(0,a._)("label",{for:"role-name",class:"labels c1"},"name",-1))),p=o((()=>(0,a._)("div",{class:"hr"},null,-1))),u={class:"row mt8"},g=o((()=>(0,a._)("label",{class:"labels c1"},"rights",-1))),R=["id","value","name","title"],v=["for"],_=o((()=>(0,a._)("div",{class:"hr"},null,-1)));function b(e,t,l,o,b,f){return(0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",n,[(0,a._)("h5",d,(0,s.zw)(b.formHead),1)]),(0,a._)("form",h,[(0,a._)("div",c,[m,(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>b.roleName=e),type:"text",id:"role-name"},null,512),[[r.nr,b.roleName]])]),p,(0,a._)("div",u,[g,(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(b.dbRights,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"mt16",key:e},[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>b.roleRights=e),id:e.name,value:e.name,class:"m0 mr16",type:"checkbox",name:e.name,title:e?.description},null,8,R),[[r.e8,b.roleRights]]),(0,a._)("label",{for:e.name},(0,s.zw)(e.name),9,v)])))),128))])]),_,(0,a._)("button",{onClick:t[2]||(t[2]=(0,r.iM)((e=>f.clear()),["prevent"])),class:"neutral button"},"cancel"),(0,a._)("button",{onClick:t[3]||(t[3]=(0,r.iM)((e=>(f.proceed(),f.clear())),["prevent"])),class:"green ml8 button"},(0,s.zw)(b.proceedBtn),1)])])}var f=l(9669),w=l.n(f),N=l(3907),C={name:"CreateRole",props:["editRoleName"],data(){return{roleName:"",roleRights:[],dbRights:[],formHead:"create role",proceedBtn:"create"}},methods:{...(0,N.nv)(["promptMessage"]),proceed(){this.$router.push("/u/roles/list"),this.promptMessage({title:"Role Created",msg:"successfully"}),void 0!=this.editRoleName?this.editRole():this.createRole()},createRole(){console.log(this.roleRights),w().get("/u/api/roles/create-role",{withCredentials:!0,params:{role_name:this.roleName,role_rights:this.roleRights}})},editRole(){w().post("/u/api/roles/edit-role",{params:{role_name:this.roleName,role_rights:this.roleRights}},{withCredentials:!0})},clear(){this.roleName="",this.roleRights=[]}},created(){void 0!=this.editRoleName&&(this.formHead="edit role",this.proceedBtn="save",console.log("editing role",this.editRoleName),w().get("/u/api/roles/edit",{withCredentials:!0,params:{editRoleName:this.editRoleName}}).then((e=>{const t=e.data;this.roleName=t.name,this.roleRights=t.rights.split(","),console.log(this.roleRights)}))),w().get("/u/api/roles/get-rights",{withCredentials:!0}).then((e=>{console.log("rights => ",e.data),this.dbRights=e.data}))}},k=l(3744);const y=(0,k.Z)(C,[["render",b],["__scopeId","data-v-63fe4360"]]);var D=y}}]);
//# sourceMappingURL=216.f0597eea.js.map