"use strict";(self["webpackChunkportal"]=self["webpackChunkportal"]||[]).push([[213],{3213:function(e,s,t){t.r(s),t.d(s,{default:function(){return K}});var r=t(6252),a=t(9963),i=t(3577);const l=e=>((0,r.dD)("data-v-ce2bc5ba"),e=e(),(0,r.Cn)(),e),u={class:"card"},n={class:"table-tabs"},o={class:"mt16 pb16 pr16 pl16"},d={class:"pl16 pb16"},c=["id"],m=["for"],h=["id"],p=["id"],b=["for"],f=["id"],k=["id"],_=["for"],w=["id"],v=l((()=>(0,r._)("option",{value:"male"},"Male",-1))),g=l((()=>(0,r._)("option",{value:"female"},"Female",-1))),N=l((()=>(0,r._)("option",{value:"others"},"Others",-1))),y=[v,g,N],C=["id"],E=["for"],$=["id"],L=["id"],T=["for"],x=["id"],R=["id"],U=["for"],F=["id"],D=["value"],I=["id"],P=["for"],V=["id"];function B(e,s,t,l,v,g){return(0,r.wg)(),(0,r.iD)("div",u,[(0,r._)("div",n,[(0,r._)("button",{onClick:s[0]||(s[0]=e=>g.openTab(e,"general")),ref:"defaultTab"+t.uk,class:"button nutral tab"},"general",512),(0,r._)("button",{onClick:s[1]||(s[1]=e=>g.openTab(e,"credentials")),class:"button nutral tab"},"credentials")]),(0,r._)("div",null,[(0,r._)("form",o,[(0,r._)("div",d,[(0,r._)("div",{class:"fg hide",ref:"general"+t.uk},[(0,r._)("div",{id:"i1"+t.uk,class:"row mt8"},[(0,r._)("label",{for:"user-firstname"+t.uk,class:"labels c1"},"firstname",8,m),(0,r.wy)((0,r._)("input",{ref:"general"+t.uk+"focus","onUpdate:modelValue":s[2]||(s[2]=e=>v.userFirstName=e),id:"user-firstname"+t.uk,type:"text"},null,8,h),[[a.nr,v.userFirstName]])],8,c),(0,r._)("div",{id:"i2"+t.uk,class:"row mt8"},[(0,r._)("label",{for:"user-lastname"+t.uk,class:"labels c1"},"lastname",8,b),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":s[3]||(s[3]=e=>v.userLastName=e),type:"text",id:"user-lastname"+t.uk},null,8,f),[[a.nr,v.userLastName]])],8,p),(0,r._)("div",{id:"i3"+t.uk,class:"row mt8"},[(0,r._)("label",{for:"user-gender"+t.uk,class:"labels c1"},"gender",8,_),(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":s[4]||(s[4]=e=>v.userGender=e),id:"user-gender"+t.uk},y,8,w),[[a.bM,v.userGender]])],8,k),(0,r._)("div",{id:"i4"+t.uk,class:"row mt8"},[(0,r._)("label",{for:"user-birthdate"+t.uk,class:"labels c1"},"birthdate",8,E),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":s[5]||(s[5]=e=>v.userBirthdate=e),type:"date",id:"user-birthdate"+t.uk},null,8,$),[[a.nr,v.userBirthdate]])],8,C)],512),(0,r._)("div",{class:"fg hide",ref:"credentials"+t.uk},[(0,r._)("div",{id:"i5"+t.uk,class:"row mt8"},[(0,r._)("label",{for:"user-email"+t.uk,class:"labels c1"},"username",8,T),(0,r.wy)((0,r._)("input",{ref:"credentials"+t.uk+"focus","onUpdate:modelValue":s[6]||(s[6]=e=>v.userEmail=e),type:"text",id:"user-email"+t.uk},null,8,x),[[a.nr,v.userEmail]])],8,L),(0,r._)("div",{id:"i6"+t.uk,class:"row mt8"},[(0,r._)("label",{for:"user-role"+t.uk,class:"labels c1"},"role",8,U),(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":s[7]||(s[7]=e=>v.userRole=e),id:"user-role"+t.uk},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(v.dbRoles,(e=>((0,r.wg)(),(0,r.iD)("option",{key:e.id,value:e.name},(0,i.zw)(e.name),9,D)))),128))],8,F),[[a.bM,v.userRole]])],8,R),(0,r._)("div",{id:"i7"+t.uk,class:"row mt8"},[(0,r._)("label",{for:"user-pwd"+t.uk,class:"labels c1"},"password",8,P),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":s[8]||(s[8]=e=>v.userPassword=e),type:"password",id:"user-pwd"+t.uk},null,8,V),[[a.nr,v.userPassword]])],8,I)],512),(0,r._)("button",{onClick:s[9]||(s[9]=(0,a.iM)((e=>g.proceed()),["prevent"])),class:"green mt16 button"},"save"),(0,r._)("button",{onClick:s[10]||(s[10]=(0,a.iM)((e=>g.canceled()),["prevent"])),class:"neutral ml8 mt16 button"},"cancel")])])])])}var G=t(9235),M=t(3262),A=t(6737),S=t.n(A),Z=t(4802),O={name:"CreateUser",props:["editUserId","uk"],data(){return{userFirstName:"",userLastName:"",userGender:"",userBirthdate:"",userEmail:"",userRole:"",userPassword:"",dbRoles:[],userId:""}},mounted(){const e=this.$store.getters["roles/allRoles"];if(void 0!=e&&""!=e&&(this.dbRoles=e),void 0!=this.editUserId){const e=this.$store.getters["users/usersDataGet"](this.editUserId);void 0!=e&&""!=e&&this.populateDataProperties(e)}this.$refs["defaultTab"+this.uk].click()},methods:{openTab(e,s){var t=e.target.parentElement.getElementsByClassName("tab");let r=[...t].find((e=>1==e?.classList?.contains("tab-open")));r?.classList?.remove("tab-open"),e?.target?.classList?.add("tab-open"),this.$refs["general"+this.uk]?.classList?.add("hide"),this.$refs["credentials"+this.uk]?.classList?.add("hide"),this.$refs[s+this.uk]?.classList?.remove("hide"),this.$refs[s+this.uk+"focus"].focus()},canceled(){S()({title:"Do you really want to cancel editing?",text:"All changes will be reverted",icon:"warning",buttons:!0,dangerMode:!0}).then((e=>{if(null!=e)throw"Aborted"})).catch((()=>{1==this.editing?this.$emit("editingCompleted",{editing:0,user:this.userFirstName+this.userLastName}):this.$router.push("/u/users/list")}))},proceed(){const e={userId:this.userId,firstName:this.userFirstName,lastName:this.userLastName,gender:this.userGender,birthdate:this.userBirthdate,email:this.userEmail,role:this.userRole,password:this.userPassword};e.userId?(0,Z.Z)({text:e.firstName+" "+e.lastName,mutationFnName:"users/RESET_STATE",promise:()=>G.rC.edit(e),context:this}):(0,M.Z)({text:e.firstName+" "+e.lastName,url:"/u/users/list",mutationFnName:"users/RESET_STATE",promise:()=>G.rC.create(e),context:this})},populateDataProperties(e){const{firstName:s,lastName:t,gender:r,birthdate:a,email:i,role:l,password:u,id:n}=e;this.userFirstName=s,this.userLastName=t,this.userGender=r,this.userBirthdate=new Date(a),this.userEmail=i,this.userRole=l,this.userPassword=u,this.userId=n}}},z=t(3744);const H=(0,z.Z)(O,[["render",B],["__scopeId","data-v-ce2bc5ba"]]);var K=H},3262:function(e,s,t){t.d(s,{Z:function(){return i}});var r=t(6737),a=t.n(r);function i({text:e,url:s,mutationFnName:t,mutationArgs:r,promise:i,context:l}){i().then((()=>a()({title:"Success",text:`Created "${e}"`,icon:"success",button:"ok"}))).then((()=>{l.$store.commit(t,r),setTimeout((()=>l.$router.push(s)),1)})).catch((e=>{null!=e&&a()("Oops!",`We can't perform this action right now please try again\n\n details: ${e}`)}))}}}]);
//# sourceMappingURL=213.a5f89361.js.map