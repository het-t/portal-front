"use strict";(self["webpackChunkportal"]=self["webpackChunkportal"]||[]).push([[884],{5884:function(e,t,a){a.r(t),a.d(t,{default:function(){return D}});var r=a(6252),s=a(9963),i=a(3577);const o=e=>((0,r.dD)("data-v-a142ede8"),e=e(),(0,r.Cn)(),e),n={class:"flex"},l={class:"recordsPerPage"},h=o((()=>(0,r._)("label",{for:"recordsPerPage"},"entries",-1))),g=o((()=>(0,r._)("option",{value:10},"10",-1))),c=o((()=>(0,r._)("option",{value:20},"20",-1))),u=o((()=>(0,r._)("option",{value:50},"50",-1))),d=o((()=>(0,r._)("option",{value:100},"100",-1))),P=[g,c,u,d],m={class:"neutral"},p=["onClick"],b={class:"neutral"};function C(e,t,a,o,g,c){return(0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("div",l,[h,(0,r.wy)((0,r._)("select",{onChange:t[0]||(t[0]=e=>c.getPageData()),id:"recordsPerPage","onUpdate:modelValue":t[1]||(t[1]=e=>g.recordsPerPage=e),class:"ml8"},P,544),[[s.bM,g.recordsPerPage]])]),(0,r._)("ul",null,[(0,r._)("li",m,[(0,r._)("a",{href:"#",onClick:t[2]||(t[2]=e=>c.pageChange(1))},"<")]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(c.showPage(),(e=>((0,r.wg)(),(0,r.iD)("li",{class:"neutral",key:e},[(0,r._)("a",{href:"#",class:(0,i.C_)(e==g.currentPage?"green":""),onClick:t=>c.pageChange(e)},(0,i.zw)(e),11,p)])))),128)),(0,r._)("li",b,[(0,r._)("a",{href:"#",onClick:t[3]||(t[3]=e=>c.pageChange(g.pageCount))},">")])])])}var $=a(9669),f=a.n($),N={name:"TablePagination",data(){return{pageData:"",currentPage:1,recordsPerPage:10,pageCount:""}},computed:{totalRecords(){return this.$store.getters[`${this.tableName}/${this.tableName}CountGet`]}},props:{tableName:String,sortBy:String,sortOrder:Number,filters:Array},methods:{showPage(){if(isNaN(this.pageCount))return 0;{let e=5;e=Math.min(e,this.pageCount);let t=this.currentPage-Math.floor(e/2);return t=Math.max(t,1),t=Math.min(t,this.pageCount-e+1),[...Array(e)].map(((e,a)=>a+t))}},pageChange(e){this.currentPage=e,this.$store.commit(`${this.tableName}/currentPageSet`,{index:e}),this.getPageData()},getPageData(){this.pageCount=Math.ceil(this.totalRecords/this.recordsPerPage);const{sortBy:e,sortOrder:t}=this.$store.getters[`${this.tableName}/sortGet`];let a=this.$store.getters[`${this.tableName}/${this.tableName}ListGet`]?.(this.currentPage,e,t,this.filters);void 0==a||0==a?.length||a?.length<this.recordsPerPage&&a?.length>=10?f().get(`/u/api/${this.tableName}`,{params:{from:(this.currentPage-1)*this.recordsPerPage,recordsPerPage:this.recordsPerPage,sortBy:e,sortOrder:t,filters:this.filters},withCredentials:!0}).then((a=>{this.$store.commit(`${this.tableName}/${this.tableName}List`,{index:this.currentPage,sortBy:e,sortOrder:t,filters:this.filters,data:a.data[this.tableName+"List"]}),this.$emit("tableData",a.data[this.tableName+"List"])})):this.$emit("tableData",a)}},created(){this.$store.commit(`${this.tableName}/currentPageSet`,{index:this.currentPage}),""==this.totalRecords?f().get(`/u/api/${this.tableName}/count`,{withCredentials:!0}).then((e=>{this.$store.commit(`${this.tableName}/${this.tableName}CountSet`,e?.data?.count),this.getPageData()})):this.getPageData()}},_=a(3744);const v=(0,_.Z)(N,[["render",C],["__scopeId","data-v-a142ede8"]]);var D=v}}]);
//# sourceMappingURL=884.da5c9d0d.js.map