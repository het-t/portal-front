"use strict";(self["webpackChunkportal"]=self["webpackChunkportal"]||[]).push([[903],{4903:function(t,e,a){a.r(e),a.d(e,{default:function(){return D}});var r=a(6252),s=a(9963),i=a(3577);const o=t=>((0,r.dD)("data-v-18a9769c"),t=t(),(0,r.Cn)(),t),n={class:"flex"},l={class:"recordsPerPage"},h=o((()=>(0,r._)("label",{for:"recordsPerPage"},"entries",-1))),g=o((()=>(0,r._)("option",{value:10},"10",-1))),c=o((()=>(0,r._)("option",{value:20},"20",-1))),u=o((()=>(0,r._)("option",{value:50},"50",-1))),d=o((()=>(0,r._)("option",{value:100},"100",-1))),P=[g,c,u,d],m={class:"neutral"},p=["onClick"],b={class:"neutral"};function C(t,e,a,o,g,c){return(0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("div",l,[h,(0,r.wy)((0,r._)("select",{onChange:e[0]||(e[0]=t=>c.getPageData()),id:"recordsPerPage","onUpdate:modelValue":e[1]||(e[1]=t=>g.recordsPerPage=t),class:"ml8"},P,544),[[s.bM,g.recordsPerPage]])]),(0,r._)("ul",null,[(0,r._)("li",m,[(0,r._)("button",{onClick:e[2]||(e[2]=t=>c.pageChange(1))},"<")]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(c.showPage(),(t=>((0,r.wg)(),(0,r.iD)("li",{class:"neutral",key:t},[(0,r._)("button",{class:(0,i.C_)(t==g.currentPage?"green":""),onClick:e=>c.pageChange(t)},(0,i.zw)(t),11,p)])))),128)),(0,r._)("li",b,[(0,r._)("button",{onClick:e[3]||(e[3]=t=>c.pageChange(g.pageCount))},">")])])])}var $=a(9669),N=a.n($),f={name:"TablePagination",data(){return{pageData:"",currentPage:1,recordsPerPage:10,pageCount:""}},computed:{totalRecords(){return this.$store.getters[`${this.tableName}/${this.tableName}CountGet`]}},props:{tableName:String,sortBy:String,sortOrder:Number,filters:Array},methods:{showPage(){if(isNaN(this.pageCount))return 0;{let t=5;t=Math.min(t,this.pageCount);let e=this.currentPage-Math.floor(t/2);return e=Math.max(e,1),e=Math.min(e,this.pageCount-t+1),[...Array(t)].map(((t,a)=>a+e))}},pageChange(t){this.currentPage=t,this.$store.commit(`${this.tableName}/currentPageSet`,{index:t}),this.getPageData()},getPageData(){this.pageCount=Math.ceil(this.totalRecords/this.recordsPerPage);const{sortBy:t,sortOrder:e}=this.$store.getters[`${this.tableName}/sortGet`];let a=this.$store.getters[`${this.tableName}/${this.tableName}ListGet`]?.(this.currentPage,t,e,this.filters);void 0==a||0==a?.length||a?.length<this.recordsPerPage&&a?.length>=10?N().get(`/u/api/${this.tableName}`,{params:{from:(this.currentPage-1)*this.recordsPerPage,recordsPerPage:this.recordsPerPage,sortBy:t,sortOrder:e,filters:this.filters},withCredentials:!0}).then((a=>{this.$store.commit(`${this.tableName}/${this.tableName}List`,{index:this.currentPage,sortBy:t,sortOrder:e,filters:this.filters,data:a.data[this.tableName+"List"]}),this.$emit("tableData",a.data[this.tableName+"List"])})):this.$emit("tableData",a)}},created(){this.$store.commit(`${this.tableName}/currentPageSet`,{index:this.currentPage}),""==this.totalRecords?N().get(`/u/api/${this.tableName}/count`,{withCredentials:!0}).then((t=>{this.$store.commit(`${this.tableName}/${this.tableName}CountSet`,t?.data?.count),this.getPageData()})):this.getPageData()}},_=a(3744);const v=(0,_.Z)(f,[["render",C],["__scopeId","data-v-18a9769c"]]);var D=v}}]);
//# sourceMappingURL=903.5a58c769.js.map