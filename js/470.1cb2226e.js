"use strict";(self["webpackChunkportal"]=self["webpackChunkportal"]||[]).push([[470,884],{5884:function(t,e,a){a.r(e),a.d(e,{default:function(){return C}});var r=a(6252),s=a(9963),i=a(3577);const o=t=>((0,r.dD)("data-v-a142ede8"),t=t(),(0,r.Cn)(),t),l={class:"flex"},n={class:"recordsPerPage"},c=o((()=>(0,r._)("label",{for:"recordsPerPage"},"entries",-1))),d=o((()=>(0,r._)("option",{value:10},"10",-1))),u=o((()=>(0,r._)("option",{value:20},"20",-1))),g=o((()=>(0,r._)("option",{value:50},"50",-1))),m=o((()=>(0,r._)("option",{value:100},"100",-1))),h=[d,u,g,m],p={class:"neutral"},f=["onClick"],y={class:"neutral"};function _(t,e,a,o,d,u){return(0,r.wg)(),(0,r.iD)("div",l,[(0,r._)("div",n,[c,(0,r.wy)((0,r._)("select",{onChange:e[0]||(e[0]=t=>u.getPageData()),id:"recordsPerPage","onUpdate:modelValue":e[1]||(e[1]=t=>d.recordsPerPage=t),class:"ml8"},h,544),[[s.bM,d.recordsPerPage]])]),(0,r._)("ul",null,[(0,r._)("li",p,[(0,r._)("a",{href:"#",onClick:e[2]||(e[2]=t=>u.pageChange(1))},"<")]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(u.showPage(),(t=>((0,r.wg)(),(0,r.iD)("li",{class:"neutral",key:t},[(0,r._)("a",{href:"#",class:(0,i.C_)(t==d.currentPage?"green":""),onClick:e=>u.pageChange(t)},(0,i.zw)(t),11,f)])))),128)),(0,r._)("li",y,[(0,r._)("a",{href:"#",onClick:e[3]||(e[3]=t=>u.pageChange(d.pageCount))},">")])])])}var k=a(9669),v=a.n(k),b={name:"TablePagination",data(){return{pageData:"",currentPage:1,recordsPerPage:10,pageCount:""}},computed:{totalRecords(){return this.$store.getters[`${this.tableName}/${this.tableName}CountGet`]}},props:{tableName:String,sortBy:String,sortOrder:Number,filters:Array},methods:{showPage(){if(isNaN(this.pageCount))return 0;{let t=5;t=Math.min(t,this.pageCount);let e=this.currentPage-Math.floor(t/2);return e=Math.max(e,1),e=Math.min(e,this.pageCount-t+1),[...Array(t)].map(((t,a)=>a+e))}},pageChange(t){this.currentPage=t,this.$store.commit(`${this.tableName}/currentPageSet`,{index:t}),this.getPageData()},getPageData(){this.pageCount=Math.ceil(this.totalRecords/this.recordsPerPage);const{sortBy:t,sortOrder:e}=this.$store.getters[`${this.tableName}/sortGet`];let a=this.$store.getters[`${this.tableName}/${this.tableName}ListGet`]?.(this.currentPage,t,e,this.filters);void 0==a||0==a?.length||a?.length<this.recordsPerPage&&a?.length>=10?v().get(`/u/api/${this.tableName}`,{params:{from:(this.currentPage-1)*this.recordsPerPage,recordsPerPage:this.recordsPerPage,sortBy:t,sortOrder:e,filters:this.filters},withCredentials:!0}).then((a=>{this.$store.commit(`${this.tableName}/${this.tableName}List`,{index:this.currentPage,sortBy:t,sortOrder:e,filters:this.filters,data:a.data[this.tableName+"List"]}),this.$emit("tableData",a.data[this.tableName+"List"])})):this.$emit("tableData",a)}},created(){this.$store.commit(`${this.tableName}/currentPageSet`,{index:this.currentPage}),""==this.totalRecords?v().get(`/u/api/${this.tableName}/count`,{withCredentials:!0}).then((t=>{this.$store.commit(`${this.tableName}/${this.tableName}CountSet`,t?.data?.count),this.getPageData()})):this.getPageData()}},w=a(3744);const P=(0,w.Z)(b,[["render",_],["__scopeId","data-v-a142ede8"]]);var C=P},1049:function(t,e,a){a.d(e,{Z:function(){return c}});var r=a(6252),s=a(9963);function i(t,e,a,i,o,l){const n=(0,r.up)("font-awesome-icon");return(0,r.wg)(),(0,r.iD)("div",{class:"sort mr8",onClick:e[0]||(e[0]=(...t)=>l.rotateImg&&l.rotateImg(...t)),onKeyup:e[1]||(e[1]=(0,s.D2)(((...t)=>l.rotateImg&&l.rotateImg(...t)),["enter"]))},["string"==a.sortType?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[1==o.sortOrder?((0,r.wg)(),(0,r.j4)(n,{key:0,class:"sort-btn",icon:"fa-solid fa-arrow-down-a-z"})):((0,r.wg)(),(0,r.j4)(n,{key:1,class:"sort-btn",icon:"fa-solid fa-arrow-up-a-z"}))],64)):"number"==a.sortType?((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[1==o.sortOrder?((0,r.wg)(),(0,r.j4)(n,{key:0,class:"sort-btn",icon:"fa-solid fa-arrow-down-1-9"})):((0,r.wg)(),(0,r.j4)(n,{key:1,class:"sort-btn",icon:"fa-solid fa-arrow-up-1-9"}))],64)):(0,r.kq)("",!0)],32)}var o={name:"TableSort",props:["sortBy","storeName","sortType"],data(){return{sortOrder:0}},methods:{rotateImg(){1===this.sortOrder?this.sortOrder=0:this.sortOrder=1,this.$emit("clicked"),this.$store.commit(`${this.storeName}/sortSet`,{sortBy:this.sortBy,sortOrder:this.sortOrder})}},updated(){console.log("updated")}},l=a(3744);const n=(0,l.Z)(o,[["render",i],["__scopeId","data-v-8a032ec6"]]);var c=n},470:function(t,e,a){a.r(e),a.d(e,{default:function(){return H}});var r=a(6252),s=a(9963),i=a(3577);const o=t=>((0,r.dD)("data-v-39599b5d"),t=t(),(0,r.Cn)(),t),l={class:"card"},n={class:"mt16 ml16 mr16"},c={class:"flex"},d=o((()=>(0,r._)("div",{class:"floating-container"}," id ",-1))),u={class:"flex"},g={class:"floating-container"},m={class:"flex"},h={class:"floating-container"},p={class:"flex"},f={class:"floating-container"},y=o((()=>(0,r._)("th",null,[(0,r._)("div",{class:"flex"},[(0,r._)("div",{class:"floating-container"}," key ")])],-1))),_={class:"flex"},k={class:"floating-container"},v={class:"w"},b={class:"flex"},w={class:"floating-container"},P={class:"w"},C={class:"pagination mr16 ml16"};function $(t,e,a,o,$,N){const D=(0,r.up)("table-sort"),j=(0,r.up)("TablePagination"),x=(0,r.Q2)("debounce");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",l,[(0,r._)("div",n,[(0,r._)("table",null,[(0,r._)("tr",null,[(0,r._)("th",null,[(0,r._)("div",c,[((0,r.wg)(),(0,r.j4)(D,{onClicked:e[0]||(e[0]=t=>{$.i=!$.i,$.k=!$.k,$.m=!$.m,$.n=!$.n,$.o=!$.o,$.p=!$.p}),key:$.j,sortBy:"id",sortType:"number",storeName:"activity"})),d])]),(0,r._)("th",null,[(0,r._)("div",u,[((0,r.wg)(),(0,r.j4)(D,{onClicked:e[1]||(e[1]=t=>{$.j=!$.j,$.k=!$.k,$.m=!$.m,$.n=!$.n,$.o=!$.o,$.p=!$.p}),key:$.i,sortBy:"user",sortType:"string",storeName:"activity"})),(0,r._)("div",g,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>$.filterFor[0]=t),ref:"userH",type:"text",class:"header p0",required:""},null,512),[[x,N.sort,"700ms",{lock:!0}],[s.nr,$.filterFor[0]]]),(0,r._)("span",{onClick:e[3]||(e[3]=e=>t.$refs["userH"].focus()),class:"floating-label"},"user")])])]),(0,r._)("th",null,[(0,r._)("div",m,[((0,r.wg)(),(0,r.j4)(D,{onClicked:e[4]||(e[4]=t=>{$.i=!$.i,$.j=!$.j,$.m=!$.m,$.n=!$.n,$.o=!$.o,$.p=!$.p}),key:$.k,sortBy:"act",sortType:"string",storeName:"activity"})),(0,r._)("div",h,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>$.filterFor[1]=t),ref:"activityH",type:"text",class:"header p0",required:""},null,512),[[x,N.sort,"700ms",{lock:!0}],[s.nr,$.filterFor[1]]]),(0,r._)("span",{onClick:e[6]||(e[6]=e=>t.$refs["activityH"].focus()),class:"floating-label"},"activity")])])]),(0,r._)("th",null,[(0,r._)("div",p,[((0,r.wg)(),(0,r.j4)(D,{onClicked:e[7]||(e[7]=t=>{$.i=!$.i,$.j=!$.j,$.k=!$.k,$.n=!$.n,$.o=!$.o,$.p=!$.p}),key:$.m,sortBy:"table",sortType:"string",storeName:"activity"})),(0,r._)("div",f,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[8]||(e[8]=t=>$.filterFor[2]=t),ref:"tableH",type:"text",class:"header p0",required:""},null,512),[[x,N.sort,"700ms",{lock:!0}],[s.nr,$.filterFor[2]]]),(0,r._)("span",{onClick:e[9]||(e[9]=e=>t.$refs["tableH"].focus()),class:"floating-label"},"table")])])]),y,(0,r._)("th",null,[(0,r._)("div",_,[((0,r.wg)(),(0,r.j4)(D,{onClicked:e[10]||(e[10]=t=>{$.i=!$.i,$.j=!$.j,$.k=!$.k,$.m=!$.m,$.o=!$.o,$.p=!$.p}),key:$.n,sortBy:"details",sortType:"string",storeName:"activity"})),(0,r._)("div",k,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[11]||(e[11]=t=>$.filterFor[3]=t),ref:"detailsH",type:"text",class:"header p0",required:""},null,512),[[x,N.sort,"700ms",{lock:!0}],[s.nr,$.filterFor[3]]]),(0,r._)("span",{onClick:e[12]||(e[12]=e=>t.$refs["detailsH"].focus()),class:"floating-label"},"details")])])]),(0,r._)("th",v,[(0,r._)("div",b,[((0,r.wg)(),(0,r.j4)(D,{onClicked:e[13]||(e[13]=t=>{$.i=!$.i,$.j=!$.j,$.k=!$.k,$.m=!$.m,$.n=!$.n,$.p=!$.p}),key:$.o,sortBy:"time",sortType:"number",storeName:"activity"})),(0,r._)("div",w,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[14]||(e[14]=t=>$.filterFor[4]=t),ref:"timeH",type:"text",class:"header p0",required:""},null,512),[[x,N.sort,"700ms",{lock:!0}],[s.nr,$.filterFor[4]]]),(0,r._)("span",{onClick:e[15]||(e[15]=e=>t.$refs["timeH"].focus()),class:"floating-label"},"time")])])])]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)($.activityData,(t=>((0,r.wg)(),(0,r.iD)("tr",{class:"tr",key:t?.id},[(0,r._)("td",null,(0,i.zw)(t?.id),1),(0,r._)("td",null,(0,i.zw)(t?.email),1),(0,r._)("td",null,(0,i.zw)(t?.activity),1),(0,r._)("td",null,(0,i.zw)(t?.referenceTable),1),(0,r._)("td",null,(0,i.zw)(t?.referenceTablePkId),1),(0,r._)("td",null,(0,i.zw)(t?.detail),1),(0,r._)("td",P,(0,i.zw)(new Date(t?.datestamp).toLocaleString()),1)])))),128))])]),(0,r._)("div",C,[((0,r.wg)(),(0,r.j4)(j,{onTableData:e[16]||(e[16]=t=>N.tablePagination(t)),filters:$.filterFor,key:$.p,tableName:"activity"},null,8,["filters"]))])])])}var N=a(5884),D=a(1049),j={name:"UserActivity",data(){return{activityData:[],i:0,j:0,k:0,l:0,m:0,n:0,o:0,p:0,filterFor:["","","","",""]}},methods:{tablePagination(t){console.log("in user activity",t),this.activityData=t},sort(){this.p=!this.p}},components:{TablePagination:N["default"],TableSort:D.Z}},x=a(3744);const T=(0,x.Z)(j,[["render",$],["__scopeId","data-v-39599b5d"]]);var H=T}}]);
//# sourceMappingURL=470.1cb2226e.js.map