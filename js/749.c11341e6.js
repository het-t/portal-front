"use strict";(self["webpackChunkportal"]=self["webpackChunkportal"]||[]).push([[749],{8792:function(e,t,a){a.d(t,{Z:function(){return c}});var s=a(6252),r=a(3577);const l={class:"alert"};function n(e,t,a,n,i,o){return(0,s.wg)(),(0,s.iD)("div",l,[(0,s._)("p",null,(0,r.zw)(a.msg),1),(0,s._)("button",{class:"positive",onClick:t[0]||(t[0]=e=>a.fn(...a.fnParam))},"proceed"),(0,s._)("button",{class:"negative",onClick:t[1]||(t[1]=t=>e.$emit("close-alert"))},"cancel")])}var i={name:"AlertC",props:{msg:String,fn:Function,fnParam:JSON}},o=a(3744);const d=(0,o.Z)(i,[["render",n],["__scopeId","data-v-6a145a71"]]);var c=d},5625:function(e,t,a){a.d(t,{Z:function(){return g}});var s=a(6252),r=a(9963);const l=e=>((0,s.dD)("data-v-6a14df15"),e=e(),(0,s.Cn)(),e),n={class:"actions"},i=l((()=>(0,s._)("label",{for:"search",class:"mr8"},"search",-1)));function o(e,t,a,l,o,d){return(0,s.wg)(),(0,s.iD)("div",n,[i,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.dataToFind=e),onInput:t[1]||(t[1]=(...e)=>d.filter&&d.filter(...e)),type:"text",id:"search",class:"mr24"},null,544),[[r.nr,o.dataToFind]])])}var d={name:"TableFilter",data(){return{dataToFind:""}},props:{tableData:String},methods:{filter(){let e=[];""==this.dataToFind?this.$emit("filtered",this.tableData):(this.tableData.forEach((t=>{let a=Object.values(t).join(" ").includes(this.dataToFind);1==a&&e.push(t)})),this.$emit("filtered",e))}}},c=a(3744);const u=(0,c.Z)(d,[["render",o],["__scopeId","data-v-6a14df15"]]);var g=u},150:function(e,t,a){a.d(t,{Z:function(){return k}});var s=a(6252),r=a(9963),l=a(3577);const n=e=>((0,s.dD)("data-v-31ccc1da"),e=e(),(0,s.Cn)(),e),i={class:"flex"},o={class:"recordsPerPage"},d=n((()=>(0,s._)("label",{for:"recordsPerPage"},"entries",-1))),c=n((()=>(0,s._)("option",{value:"10"},"10",-1))),u=n((()=>(0,s._)("option",{value:"20"},"20",-1))),g=n((()=>(0,s._)("option",{value:"50"},"50",-1))),h=n((()=>(0,s._)("option",{value:"100"},"100",-1))),p=[c,u,g,h],m={class:"neutral"},f=["onClick"],_={class:"neutral"};function P(e,t,a,n,c,u){return(0,s.wg)(),(0,s.iD)("div",i,[(0,s._)("div",o,[d,(0,s.wy)((0,s._)("select",{onChange:t[0]||(t[0]=e=>u.getPageData()),id:"recordsPerPage","onUpdate:modelValue":t[1]||(t[1]=e=>c.recordsPerPage=e),type:"number",class:"ml8"},p,544),[[r.bM,c.recordsPerPage]])]),(0,s._)("ul",null,[(0,s._)("li",m,[(0,s._)("a",{href:"#",onClick:t[2]||(t[2]=e=>u.pageChange(1))},"<<")]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(u.showPage,(e=>((0,s.wg)(),(0,s.iD)("li",{class:"neutral",key:e},[(0,s._)("a",{href:"#",class:(0,l.C_)(e==c.currentPage?"green":""),onClick:t=>u.pageChange(e)},(0,l.zw)(e),11,f)])))),128)),(0,s._)("li",_,[(0,s._)("a",{href:"#",onClick:t[3]||(t[3]=e=>u.pageChange(c.pageCount))},">>")])])])}var v=a(9669),C=a.n(v),b={name:"TablePagination",data(){return{pageData:"",totalRecords:"",currentPage:1,recordsPerPage:10,pageCount:""}},computed:{showPage(){let e=5;e=Math.min(e,this.pageCount);let t=this.currentPage-Math.floor(e/2);return t=Math.max(t,1),t=Math.min(t,this.pageCount-e+1),[...Array(e)].map(((e,a)=>a+t))}},props:{tableName:String},methods:{pageChange(e){this.currentPage=e,this.getPageData()},getPageData(){this.pageCount=Math.ceil(this.totalRecords/this.recordsPerPage),C().get(`/u/api/${this.tableName}`,{params:{from:(this.currentPage-1)*this.recordsPerPage,records_per_page:this.recordsPerPage},withCredentials:!0}).then((e=>{this.$emit("tableData",e.data),console.log("table data",e.data)}))}},created(){C().get(`/u/api/${this.tableName}/count`,{withCredentials:!0}).then((e=>{this.totalRecords=e.data[0].count,this.pageCount=Math.ceil(this.totalRecords/this.recordsPerPage),console.log("total records: ",this.totalRecords),console.log("page count:",this.pageCount)})),this.getPageData()}},D=a(3744);const w=(0,D.Z)(b,[["render",P],["__scopeId","data-v-31ccc1da"]]);var k=w},1749:function(e,t,a){a.r(t),a.d(t,{default:function(){return U}});var s=a(6252),r=a(9963),l=a(3577);const n=e=>((0,s.dD)("data-v-0d073fe0"),e=e(),(0,s.Cn)(),e),i={class:"card"},o={class:"card-head m0 pb16 pt16 pr16 pl16"},d=n((()=>(0,s._)("h5",{class:"table-head m0"},"users",-1))),c=(0,s.Uk)(" create user "),u={class:"mr16 ml16 mt16"},g=n((()=>(0,s._)("tr",null,[(0,s._)("th",null,"name"),(0,s._)("th",null,"rights"),(0,s._)("th",null,"actions")],-1))),h={class:"actions"},p=(0,s.Uk)(" edit "),m=["onClick"];function f(e,t,a,n,f,_){const P=(0,s.up)("AlertC"),v=(0,s.up)("router-link"),C=(0,s.up)("TableFilter"),b=(0,s.up)("TablePagination"),D=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.wy)((0,s.Wm)(P,{msg:f.alertData.msg,fn:_.deleteUser,fnParam:f.alertData.params,onCloseAlert:t[0]||(t[0]=e=>f.displayAlert=!1)},null,8,["msg","fn","fnParam"]),[[r.F8,f.displayAlert]]),(0,s._)("div",i,[(0,s._)("div",o,[d,(0,s.Wm)(v,{class:"table-action",to:"/u/users/create-user"},{default:(0,s.w5)((()=>[c])),_:1})]),(0,s.Wm)(C,{tableData:f.usersList,onFiltered:t[1]||(t[1]=e=>f.filteredUsersList=e),class:"mr16 ml16 mt16 actions"},null,8,["tableData"]),(0,s._)("div",u,[(0,s._)("table",null,[g,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(_.usersListToDisplay(),(e=>((0,s.wg)(),(0,s.iD)("tr",{class:"tr",key:e?.id},[(0,s._)("td",null,(0,l.zw)(e.first_name+" "+e.last_name),1),(0,s._)("td",null,(0,l.zw)(e.rights),1),(0,s._)("td",h,[(0,s.Wm)(v,{to:{name:"edit_user",params:{editUserId:e.id}}},{default:(0,s.w5)((()=>[p])),_:2},1032,["to"]),(0,s._)("p",{class:"delete m0 ml8",onClick:t=>_.alert(`do you want to delete ${e.id} user`,e.id)}," delete",8,m)])])))),128))]),(0,s.Wm)(b,{onTableData:t[2]||(t[2]=e=>f.usersList=e),tableName:"users"})])]),(0,s.Wm)(D,{editUser:e.$route.params.editUser},null,8,["editUser"])])}var _=a(9669),P=a.n(_),v=a(8792),C=a(150),b=a(5625),D={name:"UserList",data(){return{alertData:{params:[{user_id:""}],msg:""},usersList:"",filteredUsersList:void 0,displayAlert:!1}},methods:{usersListToDisplay(){return void 0!=this.filteredUsersList?(console.log("filtered"),this.filteredUsersList):(console.log("original"),this.usersList)},deleteUser(e){P().post("/u/api/users/delete-user",{...e},{withCredentials:!0}).then((e=>{console.log("deleteUser",e.data)}))},alert(e,t){this.displayAlert=!0,this.alertData.params[0].user_id=t,this.alertData.msg=e}},components:{AlertC:v.Z,TablePagination:C.Z,TableFilter:b.Z}},w=a(3744);const k=(0,w.Z)(D,[["render",f],["__scopeId","data-v-0d073fe0"]]);var U=k}}]);
//# sourceMappingURL=749.c11341e6.js.map