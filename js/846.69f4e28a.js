"use strict";(self["webpackChunkportal"]=self["webpackChunkportal"]||[]).push([[846,903],{9846:function(t,e,a){a.r(e),a.d(e,{default:function(){return D}});var s=a(6252),r=a(9963),i=a(3577);const n=t=>((0,s.dD)("data-v-3f1ee184"),t=t(),(0,s.Cn)(),t),o={class:"table-heading"},l={class:"flex"},d={class:"floating-container"},c={class:"flex"},u={class:"floating-container"},g={class:"flex"},h={class:"floating-container"},p={class:"flex"},m={class:"floating-container"},f=n((()=>(0,s._)("th",null,"status",-1))),k=["onChange","onUpdate:modelValue"],y=["value"];function b(t,e,a,n,b,w){const _=(0,s.up)("table-sort"),P=(0,s.up)("table-pagination"),C=(0,s.up)("table-main"),v=(0,s.Q2)("debounce");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(C,null,{thead:(0,s.w5)((()=>[(0,s._)("tr",o,[(0,s._)("th",null,[(0,s._)("div",l,[((0,s.wg)(),(0,s.j4)(_,{key:b.i,onClicked:e[0]||(e[0]=t=>{b.j=!b.j,b.k=!b.k,b.l=!b.l,b.p=!b.p}),sortType:"string",sortBy:"title",storeName:"myTasks"})),(0,s._)("div",d,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>b.filterFor[0]=t),ref:"taskH",class:"header p0",type:"text",required:""},null,512),[[v,w.sort,"700ms",{lock:!0}],[r.nr,b.filterFor[0]]]),(0,s._)("span",{onClick:e[2]||(e[2]=e=>t.$refs["taskH"].focus()),class:"floating-label"},"task")])])]),(0,s._)("th",null,[(0,s._)("div",c,[((0,s.wg)(),(0,s.j4)(_,{key:b.l,onClicked:e[3]||(e[3]=t=>{b.i=!b.i,b.j=!b.j,b.k=!b.k,b.p=!b.p}),sortType:"string",sortBy:"client",storeName:"myTasks"})),(0,s._)("div",u,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>b.filterFor[2]=t),ref:"clientH",class:"header p0",type:"text",required:""},null,512),[[v,w.sort,"700ms",{lock:!0}],[r.nr,b.filterFor[2]]]),(0,s._)("span",{onClick:e[5]||(e[5]=e=>t.$refs["clientH"].focus()),class:"floating-label"},"client")])])]),(0,s._)("th",null,[(0,s._)("div",g,[((0,s.wg)(),(0,s.j4)(_,{key:b.j,onClicked:e[6]||(e[6]=t=>{b.i=!b.i,b.k=!b.k,b.l=!b.l,b.p=!b.p}),sortType:"string",sortBy:"desc",storeName:"myTasks"})),(0,s._)("div",h,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>b.filterFor[1]=t),ref:"descH",class:"header p0",type:"text",required:""},null,512),[[v,w.sort,"700ms",{lock:!0}],[r.nr,b.filterFor[1]]]),(0,s._)("span",{onClick:e[8]||(e[8]=e=>t.$refs["descH"].focus()),class:"floating-label"},"description")])])]),(0,s._)("th",null,[(0,s._)("div",p,[((0,s.wg)(),(0,s.j4)(_,{key:b.k,onClicked:e[9]||(e[9]=t=>{b.i=!b.i,b.j=!b.k,b.l=!b.l,b.p=!b.p}),sortType:"string",sortBy:"deadline",storeName:"myTasks"})),(0,s._)("div",m,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>b.filterFor[3]=t),ref:"deadlineH",class:"header p0",type:"text",required:""},null,512),[[v,w.sort,"700ms",{lock:!0}],[r.nr,b.filterFor[3]]]),(0,s._)("span",{onClick:e[11]||(e[11]=e=>t.$refs["deadlineH"].focus()),class:"floating-label"},"deadline")])])]),f])])),tbody:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(b.myTasksList,((t,e)=>((0,s.wg)(),(0,s.iD)("tr",{class:"tr",key:e},[(0,s._)("td",null,(0,i.zw)(t.title),1),(0,s._)("td",null,(0,i.zw)(t.client),1),(0,s._)("td",null,(0,i.zw)(t.description),1),(0,s._)("td",null,(0,i.zw)(t.deadline),1),(0,s._)("td",null,[(0,s.wy)((0,s._)("select",{onChange:e=>w.changeStatus(t.taskId,t.id,t.statusId,t.title),"onUpdate:modelValue":e=>t.statusId=e,name:"",id:""},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(b.subTaskStatuses,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,i.zw)(t.status),9,y)))),128))],40,k),[[r.bM,t.statusId]])])])))),128))])),default:(0,s.w5)((()=>[((0,s.wg)(),(0,s.j4)(P,{key:b.p,filters:b.filterFor,onTableData:e[12]||(e[12]=t=>b.myTasksList=t),tableName:"myTasks"},null,8,["filters"]))])),_:1})])}var w=a(9235),_=a(4802),P=a(2177),C=a(4903),v=a(1049),$={components:{TableMain:P.Z,TablePagination:C["default"],TableSort:v.Z},name:"MyTasksList",data(){return{subTaskStatuses:[{id:1,status:"hold"},{id:2,status:"to do"},{id:3,status:"in progress"},{id:4,status:"pending for approval"},{id:5,status:"done"},{id:6,status:"cancel"},{id:7,status:"pending with client"},{id:8,status:"pending with signed documents"},{id:9,status:"pending with DSC"}],myTasksList:[],i:0,j:0,k:0,l:0,p:0,filterFor:["","",""]}},methods:{changeStatus(t,e,a,s){(0,_.Z)({text:s,mutationFnName:"tasks/RESET_STATE",mutationArgs:{isMaster:!1},promise:w.dT.changeStatus({taskId:t,subTaskId:e,statusId:a}),context:this})},sort(){this.p=!this.p}}},T=a(3744);const N=(0,T.Z)($,[["render",b],["__scopeId","data-v-3f1ee184"]]);var D=N},4903:function(t,e,a){a.r(e),a.d(e,{default:function(){return v}});var s=a(6252),r=a(9963),i=a(3577);const n=t=>((0,s.dD)("data-v-18a9769c"),t=t(),(0,s.Cn)(),t),o={class:"flex"},l={class:"recordsPerPage"},d=n((()=>(0,s._)("label",{for:"recordsPerPage"},"entries",-1))),c=n((()=>(0,s._)("option",{value:10},"10",-1))),u=n((()=>(0,s._)("option",{value:20},"20",-1))),g=n((()=>(0,s._)("option",{value:50},"50",-1))),h=n((()=>(0,s._)("option",{value:100},"100",-1))),p=[c,u,g,h],m={class:"neutral"},f=["onClick"],k={class:"neutral"};function y(t,e,a,n,c,u){return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",l,[d,(0,s.wy)((0,s._)("select",{onChange:e[0]||(e[0]=t=>u.getPageData()),id:"recordsPerPage","onUpdate:modelValue":e[1]||(e[1]=t=>c.recordsPerPage=t),class:"ml8"},p,544),[[r.bM,c.recordsPerPage]])]),(0,s._)("ul",null,[(0,s._)("li",m,[(0,s._)("button",{onClick:e[2]||(e[2]=t=>u.pageChange(1))},"<")]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(u.showPage(),(t=>((0,s.wg)(),(0,s.iD)("li",{class:"neutral",key:t},[(0,s._)("button",{class:(0,i.C_)(t==c.currentPage?"green":""),onClick:e=>u.pageChange(t)},(0,i.zw)(t),11,f)])))),128)),(0,s._)("li",k,[(0,s._)("button",{onClick:e[3]||(e[3]=t=>u.pageChange(c.pageCount))},">")])])])}var b=a(9669),w=a.n(b),_={name:"TablePagination",data(){return{pageData:"",currentPage:1,recordsPerPage:10,pageCount:""}},computed:{totalRecords(){return this.$store.getters[`${this.tableName}/${this.tableName}CountGet`]}},props:{tableName:String,sortBy:String,sortOrder:Number,filters:Array},methods:{showPage(){if(isNaN(this.pageCount))return 0;{let t=5;t=Math.min(t,this.pageCount);let e=this.currentPage-Math.floor(t/2);return e=Math.max(e,1),e=Math.min(e,this.pageCount-t+1),[...Array(t)].map(((t,a)=>a+e))}},pageChange(t){this.currentPage=t,this.$store.commit(`${this.tableName}/currentPageSet`,{index:t}),this.getPageData()},getPageData(){this.pageCount=Math.ceil(this.totalRecords/this.recordsPerPage);const{sortBy:t,sortOrder:e}=this.$store.getters[`${this.tableName}/sortGet`];let a=this.$store.getters[`${this.tableName}/${this.tableName}ListGet`]?.(this.currentPage,t,e,this.filters);void 0==a||0==a?.length||a?.length<this.recordsPerPage&&a?.length>=10?w().get(`/u/api/${this.tableName}`,{params:{from:(this.currentPage-1)*this.recordsPerPage,recordsPerPage:this.recordsPerPage,sortBy:t,sortOrder:e,filters:this.filters},withCredentials:!0}).then((a=>{this.$store.commit(`${this.tableName}/${this.tableName}List`,{index:this.currentPage,sortBy:t,sortOrder:e,filters:this.filters,data:a.data[this.tableName+"List"]}),this.$emit("tableData",a.data[this.tableName+"List"])})):this.$emit("tableData",a)}},created(){this.$store.commit(`${this.tableName}/currentPageSet`,{index:this.currentPage}),""==this.totalRecords?w().get(`/u/api/${this.tableName}/count`,{withCredentials:!0}).then((t=>{this.$store.commit(`${this.tableName}/${this.tableName}CountSet`,t?.data?.count),this.getPageData()})):this.getPageData()}},P=a(3744);const C=(0,P.Z)(_,[["render",y],["__scopeId","data-v-18a9769c"]]);var v=C},1049:function(t,e,a){a.d(e,{Z:function(){return d}});var s=a(6252),r=a(9963);function i(t,e,a,i,n,o){const l=(0,s.up)("font-awesome-icon");return(0,s.wg)(),(0,s.iD)("div",{class:"sort mr8",onClick:e[0]||(e[0]=(...t)=>o.rotateImg&&o.rotateImg(...t)),onKeyup:e[1]||(e[1]=(0,r.D2)(((...t)=>o.rotateImg&&o.rotateImg(...t)),["enter"]))},["string"==a.sortType?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[1==n.sortOrder?((0,s.wg)(),(0,s.j4)(l,{key:0,class:"sort-btn",icon:"fa-solid fa-arrow-down-a-z"})):((0,s.wg)(),(0,s.j4)(l,{key:1,class:"sort-btn",icon:"fa-solid fa-arrow-up-a-z"}))],64)):"number"==a.sortType?((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[1==n.sortOrder?((0,s.wg)(),(0,s.j4)(l,{key:0,class:"sort-btn",icon:"fa-solid fa-arrow-down-1-9"})):((0,s.wg)(),(0,s.j4)(l,{key:1,class:"sort-btn",icon:"fa-solid fa-arrow-up-1-9"}))],64)):(0,s.kq)("",!0)],32)}var n={name:"TableSort",props:["sortBy","storeName","sortType"],data(){return{sortOrder:0}},methods:{rotateImg(){1===this.sortOrder?this.sortOrder=0:this.sortOrder=1,this.$emit("clicked"),this.$store.commit(`${this.storeName}/sortSet`,{sortBy:this.sortBy,sortOrder:this.sortOrder})}},updated(){console.log("updated")}},o=a(3744);const l=(0,o.Z)(n,[["render",i],["__scopeId","data-v-8a032ec6"]]);var d=l},4802:function(t,e,a){a.d(e,{Z:function(){return n}});var s=a(4907),r=a(6737),i=a.n(r);function n({text:t,mutationFnName:e,mutationArgs:a,promise:r,context:n}){r.then((()=>(e&&s.Z.commit(e,a),n.$emit("editingCompleted",{}),i()({title:"Success",text:`Edited "${t}"`,icon:"success",button:"Ok"})))).catch((t=>{if(null!=t)return i()("Oops!",`We can't perform this action right now please try again\n\n details: ${t}`)})).finally((()=>{n.disabled=!1}))}}}]);
//# sourceMappingURL=846.69f4e28a.js.map