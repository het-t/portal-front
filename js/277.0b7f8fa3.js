"use strict";(self["webpackChunkportal"]=self["webpackChunkportal"]||[]).push([[277],{4277:function(e,s,t){t.r(s),t.d(s,{default:function(){return H}});var a=t(6252),r=t(9963),i=t(3577);const l=e=>((0,a.dD)("data-v-184c232f"),e=e(),(0,a.Cn)(),e),u={class:"card"},d={class:"table-tabs"},n={class:"mt16 pb16 pr16 pl16"},o={class:"pl16 pb16"},c=["id"],m=["for"],h=["id"],p=["id"],f=["for"],b=["id"],k=["id"],v=["for"],_=["id"],w=l((()=>(0,a._)("option",{value:"male"},"Male",-1))),g=l((()=>(0,a._)("option",{value:"female"},"Female",-1))),N=l((()=>(0,a._)("option",{value:"others"},"Others",-1))),y=[w,g,N],$=["id"],C=["for"],x=["id"],I=["id"],U=["for"],L=["id"],F=["id"],R=["for"],D=["id"],E=["value"],P=["id"],V=["for"],B=["id"],G=["disabled"],T=["disabled"];function Z(e,s,t,l,w,g){return(0,a.wg)(),(0,a.iD)("div",u,[(0,a._)("div",d,[(0,a._)("button",{onClick:s[0]||(s[0]=e=>g.openTab(e,"general")),ref:"defaultTab"+t.uk,class:"button nutral tab"},"general",512),(0,a._)("button",{onClick:s[1]||(s[1]=e=>g.openTab(e,"credentials")),class:"button nutral tab"},"credentials")]),(0,a._)("div",null,[(0,a._)("form",n,[(0,a._)("div",o,[(0,a._)("div",{class:"fg hide",ref:"general"+t.uk},[(0,a._)("div",{id:"i1"+t.uk,class:"row mt8"},[(0,a._)("label",{for:"user-firstname"+t.uk,class:"labels c1"},"firstname",8,m),(0,a.wy)((0,a._)("input",{ref:"general"+t.uk+"focus","onUpdate:modelValue":s[2]||(s[2]=e=>w.userFirstName=e),id:"user-firstname"+t.uk,type:"text"},null,8,h),[[r.nr,w.userFirstName]])],8,c),(0,a._)("div",{id:"i2"+t.uk,class:"row mt8"},[(0,a._)("label",{for:"user-lastname"+t.uk,class:"labels c1"},"lastname",8,f),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":s[3]||(s[3]=e=>w.userLastName=e),type:"text",id:"user-lastname"+t.uk},null,8,b),[[r.nr,w.userLastName]])],8,p),(0,a._)("div",{id:"i3"+t.uk,class:"row mt8"},[(0,a._)("label",{for:"user-gender"+t.uk,class:"labels c1"},"gender",8,v),(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":s[4]||(s[4]=e=>w.userGender=e),id:"user-gender"+t.uk},y,8,_),[[r.bM,w.userGender]])],8,k),(0,a._)("div",{id:"i4"+t.uk,class:"row mt8"},[(0,a._)("label",{for:"user-birthdate"+t.uk,class:"labels c1"},"birthdate",8,C),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":s[5]||(s[5]=e=>w.userBirthdate=e),type:"date",id:"user-birthdate"+t.uk},null,8,x),[[r.nr,w.userBirthdate]])],8,$)],512),(0,a._)("div",{class:"fg hide",ref:"credentials"+t.uk},[(0,a._)("div",{id:"i5"+t.uk,class:"row mt8"},[(0,a._)("label",{for:"user-email"+t.uk,class:"labels c1"},"username",8,U),(0,a.wy)((0,a._)("input",{ref:"credentials"+t.uk+"focus","onUpdate:modelValue":s[6]||(s[6]=e=>w.userEmail=e),type:"text",id:"user-email"+t.uk},null,8,L),[[r.nr,w.userEmail]])],8,I),(0,a._)("div",{id:"i6"+t.uk,class:"row mt8"},[(0,a._)("label",{for:"user-role"+t.uk,class:"labels c1"},"role",8,R),(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":s[7]||(s[7]=e=>w.userRole=e),id:"user-role"+t.uk},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(w.dbRoles,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.id,value:e.name},(0,i.zw)(e.name),9,E)))),128))],8,D),[[r.bM,w.userRole]])],8,F),(0,a._)("div",{id:"i7"+t.uk,class:"row mt8"},[(0,a._)("label",{for:"user-pwd"+t.uk,class:"labels c1"},"password",8,V),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":s[8]||(s[8]=e=>w.userPassword=e),type:"password",id:"user-pwd"+t.uk},null,8,B),[[r.nr,w.userPassword]])],8,P)],512),(0,a._)("button",{disabled:!0===w.disabled,onClick:s[9]||(s[9]=(0,r.iM)((e=>g.proceed()),["prevent"])),class:"green mt16 button"},"save",8,G),(0,a._)("button",{disabled:!0===w.disabled,onClick:s[10]||(s[10]=(0,r.iM)((e=>g.canceled()),["prevent"])),class:"neutral ml8 mt16 button"},"cancel",8,T)])])])])}var M=t(9235),O=t(3262),A=t(4802),S={name:"CreateUser",props:["editUserId","uk"],data(){return{userFirstName:"",userLastName:"",userGender:"",userBirthdate:"",userEmail:"",userRole:"",userPassword:"",dbRoles:[],userId:"",disabled:!1}},mounted(){const e=this.$store.getters["roles/allRoles"];if(void 0!=e&&""!=e&&(this.dbRoles=e),void 0!=this.editUserId){const e=this.$store.getters["users/usersDataGet"](this.editUserId);void 0!=e&&""!=e&&this.populateDataProperties(e)}this.$refs["defaultTab"+this.uk].click()},methods:{openTab(e,s){var t=e.target.parentElement.getElementsByClassName("tab");let a=[...t].find((e=>1==e?.classList?.contains("tab-open")));a?.classList?.remove("tab-open"),e?.target?.classList?.add("tab-open"),this.$refs["general"+this.uk]?.classList?.add("hide"),this.$refs["credentials"+this.uk]?.classList?.add("hide"),this.$refs[s+this.uk]?.classList?.remove("hide"),this.$refs[s+this.uk+"focus"].focus()},canceled(){void 0!=this.editUserId?this.$emit("editingCompleted",{force:!0}):this.$router.push("/u/users/list")},proceed(){this.disabled=!0;const e={userId:this.userId,firstName:this.userFirstName,lastName:this.userLastName,gender:this.userGender,birthdate:this.userBirthdate,email:this.userEmail,role:this.userRole,password:this.userPassword};e.userId?(0,A.Z)({text:e.firstName+" "+e.lastName,mutationFnName:"users/refetch",mutationArgs:{userId:e.userId},promise:M.rC.edit(e),context:this}):(0,O.Z)({text:e.firstName+" "+e.lastName,url:"/u/users/list",promise:M.rC.create(e),mutationFnName:"users/refetch",context:this})},populateDataProperties(e){const{firstName:s,lastName:t,gender:a,birthdate:r,email:i,role:l,password:u,id:d}=e;this.userFirstName=s,this.userLastName=t,this.userGender=a,this.userBirthdate=new Date(r),this.userEmail=i,this.userRole=l,this.userPassword=u,this.userId=d}}},W=t(3744);const z=(0,W.Z)(S,[["render",Z],["__scopeId","data-v-184c232f"]]);var H=z},3262:function(e,s,t){t.d(s,{Z:function(){return i}});var a=t(6737),r=t.n(a);function i({text:e,url:s,mutationFnName:t,mutationArgs:a,promise:i,context:l}){let u=a;void 0==u&&(u={}),i.then((()=>r()({title:"Success",text:`Created "${e}"`,icon:"success",button:"ok"}))).then((()=>{l.$store.commit(t,u),setTimeout((()=>l.$router.push(s)),1)})).catch((e=>{null!=e&&r()("Oops!",`We can't perform this action right now please try again\n\n details: ${e}`)})).finally((()=>{l.disabled=!1}))}},4802:function(e,s,t){t.d(s,{Z:function(){return l}});var a=t(4907),r=t(6737),i=t.n(r);function l({text:e,mutationFnName:s,mutationArgs:t,promise:r,context:l}){r.then((()=>(s&&a.Z.commit(s,t),l.$emit("editingCompleted",{}),i()({title:"Success",text:`Edited "${e}"`,icon:"success",button:"Ok"})))).catch((e=>{if(null!=e)return i()("Oops!",`We can't perform this action right now please try again\n\n details: ${e}`)})).finally((()=>{l.disabled=!1}))}}}]);
//# sourceMappingURL=277.0b7f8fa3.js.map